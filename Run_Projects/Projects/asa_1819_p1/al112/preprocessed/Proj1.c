/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct node
{
  int value;
  struct node *next;
} *link;
typedef struct 
{
  int u;
  int v;
} Edge;
typedef struct graph
{
  int V;
  int E;
  link *adj;
} *Graph;
typedef struct 
{
  int d;
  int low;
  int tag;
} Info;
Edge createEdge(int u, int v);
Graph initGraph(int v, int e);
link insertBegin(int value, link head);
link removeBegin(link head);
void insertEdge(Graph graph, Edge edge);
link pop(int last, link head);
void tarjanVisit(int u);
void Tarjan();
void formatEdges();
void radixSort();
int isEqual(Edge a, Edge b);
Edge *removeRepeated();
void printResults();
int V;
int E;
int u;
int v;
int i = 0;
int idIndex = 0;
static Graph graph;
Edge edge;
Edge edge1;
Info *info;
int *IDs;
int *SubNetIds;
Edge *edges;
Edge *edges1;
int visited = 0;
link L = 0;
Edge *res;
int lenght_res = 0;
int nr_SCC = 0;
int nr_connections = 0;
int nr_Subnet = 0;
int main()
{
  V = new_sym_var(sizeof(int) * 8);
  E = new_sym_var(sizeof(int) * 8);
  graph = initGraph(V, E);
  info = malloc(V * (sizeof(Info)));
  IDs = malloc(V * (sizeof(int)));
  SubNetIds = malloc(V * (sizeof(int)));
  edges = malloc(E * (sizeof(Edge)));
  edges1 = malloc(E * (sizeof(Edge)));
  while (i < E)
  {
    u = new_sym_var(sizeof(int) * 8);
    v = new_sym_var(sizeof(int) * 8);
    edge = createEdge(u - 1, v - 1);
    edge1 = createEdge(v - 1, u - 1);
    insertEdge(graph, edge);
    insertEdge(graph, edge1);
    edges[i] = edge;
    edges1[i] = edge1;
    i++;
  }

  Tarjan();
  printResults();
  return 0;
}

Edge createEdge(int u, int v)
{
  Edge edge;
  edge.u = u;
  edge.v = v;
  return edge;
}

Graph initGraph(int v, int e)
{
  int i;
  Graph graph = malloc(sizeof(struct graph));
  graph->V = v;
  graph->E = e;
  graph->adj = malloc(v * (sizeof(link)));
  for (i = 0; i < v; i++)
    graph->adj[i] = 0;

  return graph;
}

link insertBegin(int value, link head)
{
  link x = malloc(sizeof(struct node));
  x->value = value;
  x->next = head;
  return x;
}

link removeBegin(link head)
{
  link x = head;
  head = x->next;
  free(x);
  return head;
}

void insertEdge(Graph graph, Edge edge)
{
  int u = edge.u;
  int v = edge.v;
  graph->adj[u] = insertBegin(v, graph->adj[u]);
}

link pop(int last, link head)
{
  link x = head;
  int min = x->value;
  while ((x != 0) && (x->value != last))
  {
    if (x->value < min)
    {
      min = x->value;
    }
    else
    {
      
    }

    info[x->value].tag = nr_SCC;
    x = removeBegin(x);
  }

  if (x->value < min)
  {
    min = x->value;
  }
  else
  {
    
  }

  info[x->value].tag = nr_SCC;
  x = removeBegin(x);
  IDs[nr_SCC] = min;
  return x;
}

void tarjanVisit(int u)
{
  link x;
  info[u].d = (info[u].low = visited);
  visited++;
  L = insertBegin(u, L);
  for (x = graph->adj[u]; x != 0; x = x->next)
  {
    int v = x->value;
    if ((info[v].d == (-1)) || (info[v].tag == (-1)))
    {
      if (info[v].d == (-1))
      {
        tarjanVisit(v);
      }
      else
      {
        
      }

      info[u].low = (info[u].low <= info[v].low) ? (info[u].low) : (info[v].low);
      ;
    }
    else
    {
      
    }

  }

  if (info[u].d == info[u].low)
  {
    L = pop(u, L);
    nr_SCC++;
  }
  else
  {
    
  }

}

void Tarjan()
{
  for (i = 0; i < V; i++)
  {
    info[i].d = -1;
    info[i].tag = -1;
  }

  for (i = 0; i < V; i++)
  {
    if (info[i].d == (-1))
    {
      tarjanVisit(i);
      SubNetIds[idIndex] = i;
      idIndex++;
    }
    else
    {
      
    }

  }

  SubNetIds[idIndex] = V;
}

void printResults()
{
  int j;
  printf("%d\n", nr_SCC);
  for (j = 1; j < (idIndex + 1); j++)
    printf("%d ", SubNetIds[j]);

  printf("\n");
}

