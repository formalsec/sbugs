/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>


typedef struct STUDENTS
{
  int grade;
  int friendCount;
  int *friends;
} STUDENTS;
STUDENTS *create_array_structs(int *numStudents, int *totalFriendships);
void read_input(int numStudents, int totalFriendships, int *maxGrade, STUDENTS *students);
void new_grades(int numStudents, int maxGrade, STUDENTS *students);
void free_mem(int numStudents, STUDENTS *students);
int main(void)
{
  int numStudents = 0;
  int totalFriendships = 0;
  int maxGrade = 0;
  STUDENTS *students = create_array_structs(&numStudents, &totalFriendships);
  read_input(numStudents, totalFriendships, &maxGrade, students);
  new_grades(numStudents, maxGrade, students);
  free_mem(numStudents, students);
  return 0;
}

STUDENTS *create_array_structs(int *numStudents, int *totalFriendships)
{
  int i = 0;
  char buff[20];
  fgets(buff, 20, stdin);
  *numStudents = atoi(strtok(buff, ","));
  *totalFriendships = atoi(strtok(0, "\n"));
  STUDENTS *structure = (STUDENTS *) malloc((*numStudents) * (sizeof(STUDENTS)));
  for (i = 0; i < (*numStudents); i++)
  {
    structure[i].grade = -1;
    structure[i].friendCount = 0;
    structure[i].friends = (int *) malloc(1 * (sizeof(int)));
  }

  return structure;
}

void read_input(int numStudents, int totalFriendships, int *maxGrade, STUDENTS *students)
{
  char buff[20];
  int i = 0;
  int student1 = -1;
  int student2 = -1;
  for (i = 0; i < numStudents; i++)
  {
    fgets(buff, 20, stdin);
    students[i].grade = atoi(buff);
    if (atoi(buff) > (*maxGrade))
    {
      *maxGrade = atoi(buff);
    }
    else
    {
      
    }

  }

  for (i = 0; i < totalFriendships; i++)
  {
    fgets(buff, 20, stdin);
    student1 = atoi(strtok(buff, " ")) - 1;
    student2 = atoi(strtok(0, "\n")) - 1;
    students[student1].friends[students[student1].friendCount] = student2;
    students[student1].friendCount += 1;
    students[student1].friends = (int *) realloc(students[student1].friends, (students[student1].friendCount + 1) * (sizeof(int)));
  }

}

void new_grades(int numStudents, int maxGrade, STUDENTS *students)
{
  int student1 = 0;
  int student2 = 0;
  int i = 0;
  int friend = 0;
  int flag = 0;
  for (i = 0; i < numStudents; i++)
  {
    flag = 0;
    for (student1 = 0; student1 < numStudents; student1++)
    {
      if (students[student1].grade != maxGrade)
      {
        for (student2 = 0; student2 < students[student1].friendCount; student2++)
        {
          friend = students[student1].friends[student2];
          if (students[friend].grade > students[student1].grade)
          {
            students[student1].grade = students[friend].grade;
            flag = 1;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

    }

    if (flag == 0)
    {
      break;
    }
    else
    {
      
    }

  }

  for (i = 0; i < numStudents; i++)
    printf("%d\n", students[i].grade);

}

void free_mem(int numStudents, STUDENTS *students)
{
  int i = 0;
  for (i = 0; i < numStudents; i++)
    free(students[i].friends);

  free(students);
}

