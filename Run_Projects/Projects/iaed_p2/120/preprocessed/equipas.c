/*File generated by PreProcessor.py*/


#include "equipas.h"


int hash(char *v, int mod)
{
  int h = 0;
  int a = 127;
  for (; (*v) != '\0'; v++)
    h = ((a * h) + (*v)) % mod;

  return h;
}

void init_hash_teams(NodeTeam **heads, int mod)
{
  int i;
  for (i = 0; i < mod; i++)
  {
    heads[i] = 0;
  }

}

Team *create_team(char *nameT)
{
  Team *newTeam;
  char *nameTeam;
  nameTeam = str_dup(nameT);
  newTeam = (Team *) malloc(sizeof(Team));
  newTeam->name = nameTeam;
  newTeam->victories = 0;
  return newTeam;
}

void hash_insert_team(NodeTeam **heads, Team *team, int mod)
{
  int key = hash(team->name, mod);
  heads[key] = hash_put_begin_teams(heads[key], team);
}

NodeTeam *hash_put_begin_teams(NodeTeam *head, Team *team)
{
  NodeTeam *newHead = (NodeTeam *) malloc(sizeof(NodeTeam));
  newHead->team = team;
  newHead->next = head;
  return newHead;
}

Team *hash_search_team(NodeTeam **heads, char *name, int mod)
{
  int key = hash(name, mod);
  return search_team(heads[key], name);
}

Team *search_team(NodeTeam *head, char *name)
{
  NodeTeam *current = head;
  char *currentName;
  while (current != 0)
  {
    currentName = current->team->name;
    if (strcmp(currentName, name) == 0)
    {
      {
        return current->team;
      }
    }
    else
    {
      
    }

    current = current->next;
  }

  return 0;
}

void destroy_hash_teams(NodeTeam **heads, int mod)
{
  int i;
  for (i = 0; i < mod; i++)
  {
    destroy_list_teams(heads[i]);
  }

}

void destroy_list_teams(NodeTeam *head)
{
  NodeTeam *aux;
  while ((aux = head) != 0)
  {
    head = head->next;
    free_team(aux->team);
    free(aux);
  }

  head = 0;
}

void free_team(Team *e)
{
  free(e->name);
  free(e);
}

char *str_dup(char *string)
{
  char *duplicatedString;
  duplicatedString = (char *) malloc(strlen(string) + 1);
  strcpy(duplicatedString, string);
  return duplicatedString;
}

