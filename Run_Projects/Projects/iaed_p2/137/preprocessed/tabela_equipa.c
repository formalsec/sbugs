/*File generated by PreProcessor.py*/


#include "tabela_equipa.h"


int hashTabEq(char *s)
{
  int h = 0;
  int a = 127;
  for (; (*s) != '\0'; s++)
    h = ((a * h) + (*s)) % 499;

  return h;
}

TabEquipas *novaTabEq()
{
  int i;
  TabEquipas *tab = malloc(sizeof(TabEquipas));
  tab->lst = malloc(499 * (sizeof(LstEqs *)));
  tab->n_eqs = 0;
  for (i = 0; i < 499; i++)
    tab->lst[i] = novaListaEqs();

  return tab;
}

void pushTabEq(TabEquipas *tab, Equipa eq)
{
  int h;
  h = hashTabEq(eq.nome);
  pushEq(eq, tab->lst[h]);
  tab->n_eqs++;
}

Equipa *procuraTabEq(TabEquipas *tab, char *nome)
{
  int h;
  Equipa *e;
  h = hashTabEq(nome);
  e = procuraEq(tab->lst[h], nome);
  return e;
}

Equipa *copiaTabEq(TabEquipas *tab)
{
  int i;
  int j;
  int k = 0;
  Equipa **arr = malloc(499 * (sizeof(Equipa *)));
  Equipa *res = malloc(tab->n_eqs * (sizeof(Equipa)));
  for (i = 0; i < 499; i++)
    arr[i] = copiaLstEq(tab->lst[i]);

  for (i = 0; i < 499; i++)
    for (j = 0; j < tab->lst[i]->n_eqs; j++)
    res[k++] = arr[i][j];


  for (i = 0; i < 499; i++)
    free(arr[i]);

  free(arr);
  return res;
}

void destroiTabEq(TabEquipas *tab)
{
  int i;
  for (i = 0; i < 499; i++)
    destroiLstEq(tab->lst[i]);

  free(tab->lst);
  free(tab);
}

int comparaEq(const void *a, const void *b)
{
  Equipa *eqA = (Equipa *) a;
  Equipa *eqB = (Equipa *) b;
  if (eqB->vitorias != eqA->vitorias)
  {
    return eqB->vitorias - eqA->vitorias;
  }
  else
  {
    return strcmp(eqA->nome, eqB->nome);
  }

}

