/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <stdbool.h>
#include "teamHTable.h"
#include "gameHTable.h"


int cmd_a(int NL, glink **HTgame, tlink **HTteams, glink **STgame, int counter_game);
int cmd_A(int NL, tlink **HTteams);
void cmd_p(int NL, glink **HTgame);
void cmd_P(int NL, tlink **HTteams);
void cmd_l(glink **STgame, int NL, int counter_game);
int cmd_r(int NL, glink **STgame, glink **HTgame, int counter_game);
void cmd_s(int NL, glink **HTgame, tlink **HTteams);
pTeam **cmd_g(int NL, pTeam **STteams, int counter_team, tlink **HTteams);
int cmd_a(int NL, glink **HTgame, tlink **HTteams, glink **STgame, int counter_game)
{
  char buffer0[1024];
  char buffer1[1024];
  char buffer2[1024];
  int res1;
  int res2;
  glink *link = malloc(sizeof(struct node_game));
  if (5 != 5)
  {
    {
      printf("argumentos invalidos a.\n");
      return 0;
    }
  }
  else
  {
    for (int buffer0_index = 0; buffer0_index < 10; buffer0_index++)
    {
      buffer0[buffer0_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer0[10 - 1] = '\0';
    for (int buffer1_index = 0; buffer1_index < 10; buffer1_index++)
    {
      buffer1[buffer1_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer1[10 - 1] = '\0';
    for (int buffer2_index = 0; buffer2_index < 10; buffer2_index++)
    {
      buffer2[buffer2_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer2[10 - 1] = '\0';
    res1 = new_sym_var(sizeof(int) * 8);
    res2 = new_sym_var(sizeof(int) * 8);
    
  }

  if (verifica_jogo(buffer0, buffer1, buffer2, HTgame, HTteams) == 1)
  {
    {
      printf("%d Jogo existente.\n", NL);
      return 0;
    }
  }
  else
  {
    
  }

  if (verifica_jogo(buffer0, buffer1, buffer2, HTgame, HTteams) == 4)
  {
    {
      printf("%d Equipa inexistente.\n", NL);
      return 0;
    }
  }
  else
  {
    if (verifica_jogo(buffer0, buffer1, buffer2, HTgame, HTteams) == 5)
    {
      {
        link = glinkInsert(buffer0, buffer1, buffer2, res1, res2, link, HTgame, HTteams);
        gorderInsert(&link, STgame, counter_game);
        return 1;
      }
    }
    else
    {
      
    }

  }

  return 1;
}

int cmd_A(int NL, tlink **HTteams)
{
  char buffer0[1024];
  tlink *link = malloc(sizeof(struct node_team));
  if (1 != 1)
  {
    {
      printf("argumentos invalidos A.\n");
      return 0;
    }
  }
  else
  {
    for (int buffer0_index = 0; buffer0_index < 10; buffer0_index++)
    {
      buffer0[buffer0_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer0[10 - 1] = '\0';
    if (tLinkInsert(buffer0, link, HTteams) == 0)
    {
      {
        printf("%d Equipa existente.\n", NL);
        return 0;
      }
    }
    else
    {
      {
        link = tLinkInsert(buffer0, link, HTteams);
        return 1;
      }
    }

  }

}

void cmd_p(int NL, glink **HTgame)
{
  char buffer0[1024];
  char *name;
  pGame *jogo = malloc(sizeof(struct game));
  if (1 != 1)
  {
    {
      err("Argumentos invalidos.");
    }
  }
  else
  {
    for (int buffer0_index = 0; buffer0_index < 10; buffer0_index++)
    {
      buffer0[buffer0_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer0[10 - 1] = '\0';
    if (search_game(HTgame, buffer0) == 0)
    {
      {
        printf("%d Jogo inexistente.\n", NL);
      }
    }
    else
    {
      {
        name = my_strdup(buffer0);
        jogo = search_game(HTgame, name)->g;
        printf("%d %s %s %s %d %d\n", NL, jogo->name, jogo->team1->name, jogo->team2->name, jogo->score1, jogo->score2);
      }
    }

  }

}

void cmd_P(int NL, tlink **HTteams)
{
  char buffer0[1024];
  char *name;
  pTeam *equipa = malloc(sizeof(struct team));
  if (1 != 1)
  {
    {
      err("Argumentos invalidos");
    }
  }
  else
  {
    for (int buffer0_index = 0; buffer0_index < 10; buffer0_index++)
    {
      buffer0[buffer0_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer0[10 - 1] = '\0';
    if (search_team(HTteams, buffer0) == 0)
    {
      {
        printf("%d Equipa inexistente.\n", NL);
      }
    }
    else
    {
      {
        name = my_strdup(buffer0);
        equipa = search_team(HTteams, name)->t;
        printf("%d %s %d\n", NL, equipa->name, equipa->wins);
      }
    }

  }

}

void cmd_l(glink **STgame, int NL, int counter_game)
{
  int i = 0;
  for (i = 0; i < counter_game; i++)
  {
    if (STgame[i] != 0)
    {
      {
        printf("%d %s %s %s %d %d\n", NL, STgame[i]->g->name, STgame[i]->g->team1->name, STgame[i]->g->team2->name, STgame[i]->g->score1, STgame[i]->g->score2);
      }
    }
    else
    {
      
    }

  }

}

int cmd_r(int NL, glink **STgame, glink **HTgame, int counter_game)
{
  char buffer0[1024];
  if (1 != 1)
  {
    {
      err("Argumentos invalidos.");
      return 0;
    }
  }
  else
  {
    for (int buffer0_index = 0; buffer0_index < 10; buffer0_index++)
    {
      buffer0[buffer0_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer0[10 - 1] = '\0';
    if (search_game(HTgame, buffer0) == 0)
    {
      {
        printf("%d Jogo inexistente.\n", NL);
        return 0;
      }
    }
    else
    {
      {
        STgame = gorderRemove(buffer0, STgame, counter_game);
        glinkRemove(buffer0, HTgame);
        return 1;
      }
    }

  }

}

void cmd_s(int NL, glink **HTgame, tlink **HTteams)
{
  char buffer0[1024];
  int res1;
  int res2;
  if (3 != 3)
  {
    {
      err("Argumentos invalidos.");
    }
  }
  else
  {
    for (int buffer0_index = 0; buffer0_index < 10; buffer0_index++)
    {
      buffer0[buffer0_index] = new_sym_var(sizeof(char) * 8);
    }

    buffer0[10 - 1] = '\0';
    res1 = new_sym_var(sizeof(int) * 8);
    res2 = new_sym_var(sizeof(int) * 8);
    if (search_game(HTgame, buffer0) == 0)
    {
      {
        printf("%d Jogo inexistente.\n", NL);
      }
    }
    else
    {
      {
        gchangeScore(buffer0, res1, res2, HTgame, HTteams);
      }
    }

  }

}

pTeam **cmd_g(int NL, pTeam **STteams, int counter_team, tlink **HTteams)
{
  int i;
  int soma = 0;
  if (teamisEmpty(HTteams))
  {
    {
      return 0;
    }
  }
  else
  {
    {
      if (counter_team == 1)
      {
        STteams = team_array(counter_team);
      }
      else
      {
        
      }

      STteams = search_el(STteams, HTteams, counter_team);
      for (i = 0; i < counter_team; i++)
      {
        if (STteams[i] != 0)
        {
          {
            if (STteams[i]->wins > soma)
            {
              soma = STteams[i]->wins;
            }
            else
            {
              
            }

          }
        }
        else
        {
          
        }

      }

      printf("%d Melhores %d\n", NL, soma);
      STteams = abc_winners(STteams, counter_team);
      for (i = 0; i < counter_team; i++)
      {
        if (STteams[i] != 0)
        {
          {
            if (counter_team > 1)
            {
              {
                if (STteams[i]->wins >= soma)
                {
                  printf("%d * %s\n", NL, STteams[i]->name);
                }
                else
                {
                  
                }

              }
            }
            else
            {
              {
                printf("%d * %s\n", NL, STteams[i]->name);
              }
            }

          }
        }
        else
        {
          
        }

      }

    }
  }

  return STteams;
}

int main()
{
  char command;
  int counter_game = 0;
  int counter_team = 0;
  int NL = 0;
  glink **HTgame = 0;
  tlink **HTteams = 0;
  glink **STgame = 0;
  pTeam **STteams = 0;
  HTgame = init_HTgame(9677 * 2);
  HTteams = init_HTteams(9677 * 2);
  STgame = init_STgame(9677 * 2);
  while (1)
  {
    command = getchar();
    switch (command)
    {
      case 'a':
        ++NL;
        if (cmd_a(NL, HTgame, HTteams, STgame, counter_game) == 1)
      {
        ++counter_game;
      }
      else
      {
        
      }

        if (counter_game > (9677 / 2))
      {
        HTgame = expand(HTgame, 9677 * 4);
      }
      else
      {
        
      }

        if (counter_game > (9677 * 2))
      {
        STgame = simplexpand(STgame, 9677 * 4);
      }
      else
      {
        
      }

        break;

      case 'A':
        ++NL;
        if (cmd_A(NL, HTteams) == 1)
      {
        ++counter_team;
      }
      else
      {
        
      }

        if (counter_team > (9677 / 2))
      {
        HTteams = texpand(HTteams, 9677 * 4);
      }
      else
      {
        
      }

        break;

      case 'l':
        ++NL;
        cmd_l(STgame, NL, counter_game);
        break;

      case 'p':
        ++NL;
        cmd_p(NL, HTgame);
        break;

      case 'P':
        ++NL;
        cmd_P(NL, HTteams);
        break;

      case 'r':
        ++NL;
        if (cmd_r(NL, STgame, HTgame, counter_game) == 1)
      {
        --counter_game;
      }
      else
      {
        
      }

        break;

      case 's':
        ++NL;
        cmd_s(NL, HTgame, HTteams);
        break;

      case 'g':
        ++NL;
        cmd_g(NL, STteams, counter_team, HTteams);
        break;

      case 'x':
        return 0;

      default:
        err("comando desconhecido");

    }

    getchar();
  }

  free_gTable(*HTgame);
  free_gTable(*STgame);
  free(STteams);
  free(STgame);
  free(HTgame);
  free(HTteams);
  return 0;
}

