/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <stdbool.h>
#include <assert.h>
#include "funcoes.h"


int procura_equipa(char *equipa_nome, PRINCIPAL p)
{
  int i = hashCode(equipa_nome, p->cap_equipas);
  while (p->hashEquipa[i] != 0)
  {
    if (strcmp(p->hashEquipa[i]->nome, equipa_nome) == 0)
    {
      {
        return i;
      }
    }
    else
    {
      
    }

    ++i;
    i %= p->cap_equipas;
  }

  return -1;
}

void adiciona_vitoria(char *equipa_nome, PRINCIPAL p)
{
  int i = procura_equipa(equipa_nome, p);
  if (i != (-1))
  {
    {
      p->hashEquipa[i]->vitorias++;
    }
  }
  else
  {
    
  }

}

void remove_vitoria(char *equipa_nome, PRINCIPAL p)
{
  int i = procura_equipa(equipa_nome, p);
  if (i != (-1))
  {
    {
      p->hashEquipa[i]->vitorias--;
    }
  }
  else
  {
    
  }

}

int insert_equipa(char *nome, PRINCIPAL p)
{
  int i;
  if (p->tamanho_equipas >= (p->cap_equipas * 0.7))
  {
    {
      p->cap_equipas += 20;
      p->hashEquipa = (EQUIPA *) realloc(p->hashEquipa, (sizeof(EQUIPA)) * p->cap_equipas);
    }
  }
  else
  {
    
  }

  i = hashCode(nome, p->cap_equipas);
  while (p->hashEquipa[i] != 0)
  {
    ++i;
    i %= p->cap_equipas;
  }

  p->hashEquipa[i] = (EQUIPA) malloc(sizeof(struct equipa));
  p->hashEquipa[i]->nome = strdup(nome);
  p->hashEquipa[i]->vitorias = 0;
  p->lista_equipas[p->tamanho_equipas] = p->hashEquipa[i];
  p->tamanho_equipas++;
  return 0;
}

void delete_equipa(char *equipa_nome, PRINCIPAL p)
{
  int i;
  int j;
  i = procura_equipa(equipa_nome, p);
  if (i != (-1))
  {
    p->hashEquipa[i] = 0;
  }
  else
  {
    
  }

  while (p->hashEquipa[i] != 0)
  {
    if (strcmp(p->hashEquipa[i]->nome, equipa_nome) == 0)
    {
      break;
    }
    else
    {
      i = (i + 1) % p->cap_equipas;
    }

  }

  if (p->hashEquipa[i] == 0)
  {
    return;
  }
  else
  {
    
  }

  free(p->hashEquipa[i]->nome);
  free(p->hashEquipa[i]);
  p->hashEquipa[i] = 0;
  for (j = (i + 1) % p->cap_equipas; p->hashEquipa[j] != 0; j = (j + 1) % p->cap_equipas)
  {
    p->hashEquipa[j] = 0;
    insert_equipa(p->hashEquipa[j]->nome, p);
  }

}

void display_equipa(PRINCIPAL p)
{
  int i = 0;
  for (i = 0; i < p->cap_equipas; i++)
  {
    if (p->hashEquipa[i] != 0)
    {
      {
        printf("(%s, %d)\n", p->hashEquipa[i]->nome, p->hashEquipa[i]->vitorias);
      }
    }
    else
    {
      printf("~~\n");
    }

  }

  printf("\n");
}

