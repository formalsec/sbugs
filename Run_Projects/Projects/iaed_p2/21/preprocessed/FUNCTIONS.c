/*File generated by PreProcessor.py*/


#include "FUNCTIONS.h"
#include "TEAM.h"
#include "MATCH.h"
#include "TEAMHTABLE.h"
#include "MATCHHTABLE.h"


void fa(int counter)
{
  char *name;
  char *team1;
  char *team2;
  Match m;
  int score1;
  int score2;
  name = (char *) malloc((sizeof(char)) * 1024);
  team1 = (char *) malloc((sizeof(char)) * 1024);
  team2 = (char *) malloc((sizeof(char)) * 1024);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  for (int team1_index = 0; team1_index < 10; team1_index++)
  {
    team1[team1_index] = new_sym_var(sizeof(char) * 8);
  }

  team1[10 - 1] = '\0';
  for (int team2_index = 0; team2_index < 10; team2_index++)
  {
    team2[team2_index] = new_sym_var(sizeof(char) * 8);
  }

  team2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (matchSearch(name) != 0)
  {
    printf("%d Jogo existente.\n", counter);
  }
  else
  {
    if ((teamSearch(team1) == 0) || (teamSearch(team2) == 0))
    {
      printf("%d Equipa inexistente.\n", counter);
    }
    else
    {
      Team t;
      m = newMatch(name, team1, team2, score1, score2);
      matchInsert(m);
      t = getWinTeam(m);
      if ((THeadList != 0) && (((t != 0) && (t->score >= THeadList->team->score)) || ((t == 0) && (score1 >= THeadList->team->score))))
      {
        TfreeHead(THeadList);
        TlistInit();
      }
      else
      {
        
      }

    }

  }

  free(name);
  free(team1);
  free(team2);
}

void fA(int counter)
{
  Team t;
  char *name = (char *) malloc((sizeof(char)) * 1024);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (teamSearch(name) == 0)
  {
    t = newTeam(name);
    teamInsert(t);
    if (!(((THeadList != 0) && (t != 0)) && (t->score < THeadList->team->score)))
    {
      TfreeHead(THeadList);
      TlistInit();
    }
    else
    {
      
    }

  }
  else
  {
    printf("%d Equipa existente.\n", counter);
  }

  free(name);
}

void fl(int counter)
{
  matchNode a;
  getchar();
  for (a = head; a != 0; a = a->next)
  {
    if (strcmp(a->match->name, ":") != 0)
    {
      printf("%d %s %s %s %d %d\n", counter, a->match->name, a->match->team1->name, a->match->team2->name, a->match->score1, a->match->score2);
    }
    else
    {
      
    }

  }

}

void fp(int counter)
{
  matchNode a;
  char *name = (char *) malloc((sizeof(char)) * 1024);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  a = matchSearch(name);
  if (a == 0)
  {
    printf("%d Jogo inexistente.\n", counter);
  }
  else
  {
    printf("%d %s %s %s %d %d\n", counter, a->match->name, a->match->team1->name, a->match->team2->name, a->match->score1, a->match->score2);
  }

  free(name);
}

void fP(int counter)
{
  teamNode n;
  char *name = (char *) malloc((sizeof(char)) * 1024);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  n = teamSearch(name);
  if (n == 0)
  {
    printf("%d Equipa inexistente.\n", counter);
  }
  else
  {
    printf("%d %s %d\n", counter, n->team->name, n->team->score);
  }

  free(name);
}

void fr(int counter)
{
  matchNode m;
  char *name = (char *) malloc((sizeof(char)) * 1024);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  m = matchSearch(name);
  if (m == 0)
  {
    printf("%d Jogo inexistente.\n", counter);
  }
  else
  {
    Team t;
    int tscore;
    int eq;
    t = getWinTeam(m->match);
    if (t != 0)
    {
      tscore = t->score;
    }
    else
    {
      
    }

    eq = m->match->team1->score;
    removeScores(m->match);
    matchDelete(m->match);
    if ((THeadList != 0) && (((t != 0) && (tscore >= THeadList->team->score)) || ((t == 0) && (eq >= THeadList->team->score))))
    {
      TfreeHead(THeadList);
      TlistInit();
    }
    else
    {
      
    }

  }

  free(name);
}

void fs(int counter)
{
  matchNode match;
  int s1;
  int s2;
  char *name = (char *) malloc((sizeof(char)) * 1024);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  s1 = new_sym_var(sizeof(int) * 8);
  s2 = new_sym_var(sizeof(int) * 8);
  match = matchSearch(name);
  if (match == 0)
  {
    printf("%d Jogo inexistente.\n", counter);
  }
  else
  {
    Team win1;
    Team win2;
    Team loser1;
    int win1score;
    win1 = getWinTeam(match->match);
    if (win1 != 0)
    {
      win1score = win1->score;
    }
    else
    {
      
    }

    loser1 = getLoserTeam(match->match);
    changeScores(match->match, s1, s2);
    win2 = getWinTeam(match->match);
    if ((THeadList != 0) && (((((((win1 != 0) && (win2 != 0)) && (win1 != win2)) && (win1score >= THeadList->team->score)) || ((((loser1 != 0) && (win2 != 0)) && (win2 == loser1)) && (loser1->score >= THeadList->team->score))) || (((win1 == 0) && (win2 != 0)) && (win2->score >= THeadList->team->score))) || (((win1 != 0) && (win2 == 0)) && (win1score >= THeadList->team->score))))
    {
      TfreeHead(THeadList);
      TlistInit();
    }
    else
    {
      
    }

  }

  free(name);
}

void fg(int counter)
{
  teamNode aux;
  int i;
  int max = -1;
  getchar();
  if (THeadList == 0)
  {
    for (i = 0; i < 257; i++)
    {
      for (aux = teamHeads[i]; aux != 0; aux = aux->next)
      {
        if (aux->team->score > max)
        {
          TfreeHead(THeadList);
          TlistInit();
          addTeamNodeList(aux->team);
          max = aux->team->score;
        }
        else
        {
          if (aux->team->score == max)
          {
            addTeamNodeList(aux->team);
          }
          else
          {
            
          }

        }

      }

    }

  }
  else
  {
    
  }

  if (THeadList != 0)
  {
    printf("%d Melhores %d\n", counter, THeadList->team->score);
    for (aux = THeadList; aux != 0; aux = aux->next)
    {
      printf("%d * %s\n", counter, aux->team->name);
    }

  }
  else
  {
    
  }

}

void fx()
{
  MfreeHead(head);
  TfreeHead(THeadList);
  matchHashFREE();
  teamHashFREE();
}

