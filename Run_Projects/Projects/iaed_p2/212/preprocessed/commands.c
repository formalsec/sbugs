/*File generated by PreProcessor.py*/


#include "commands.h"


void cmd_a(link *head, link *last, Tree **g, Tree2 **t, int nl)
{
  struct jogo game;
  link aux = 0;
  Tree2 *f = 0;
  Tree2 *h = 0;
  char line[4][1024];
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[0][line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[0][10 - 1] = '\0';
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[1][line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[1][10 - 1] = '\0';
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[2][line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[2][10 - 1] = '\0';
  game.score1 = new_sym_var(sizeof(unsigned int) * 8);
  game.score2 = new_sym_var(sizeof(unsigned int) * 8);
  if (searchTree(*g, line[0]) != 0)
  {
    printf("%d Jogo existente.\n", nl);
    return;
  }
  else
  {
    
  }

  h = searchTree2(*t, line[1]);
  if (h == 0)
  {
    printf("%d Equipa inexistente.\n", nl);
    return;
  }
  else
  {
    
  }

  f = searchTree2(*t, line[2]);
  if (f == 0)
  {
    printf("%d Equipa inexistente.\n", nl);
    return;
  }
  else
  {
    
  }

  game.nome = malloc((sizeof(char)) * (strlen(line[0]) + 1));
  strcpy(game.nome, line[0]);
  game.equipa1 = malloc((sizeof(char)) * (strlen(line[1]) + 1));
  strcpy(game.equipa1, line[1]);
  game.equipa2 = malloc((sizeof(char)) * (strlen(line[2]) + 1));
  strcpy(game.equipa2, line[2]);
  if (game.score1 > game.score2)
  {
    h->win += 1;
  }
  else
  {
    
  }

  if (game.score1 < game.score2)
  {
    f->win += 1;
  }
  else
  {
    
  }

  *head = insertEnd(*head, last, game, &aux);
  *g = insertTree(*g, aux);
}

void cmd_A(Tree2 **g, int nl)
{
  char *name;
  char line[1024];
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[10 - 1] = '\0';
  if (searchTree2(*g, line) != 0)
  {
    printf("%d Equipa existente.\n", nl);
    return;
  }
  else
  {
    
  }

  name = malloc((sizeof(char)) * (strlen(line) + 1));
  strcpy(name, line);
  *g = insertTree2(*g, name);
}

void cmd_l(link head, int nl)
{
  print(head, nl);
}

void cmd_p(Tree **g, int nl)
{
  Tree *f = 0;
  char line[1024];
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[10 - 1] = '\0';
  f = searchTree(*g, line);
  if (f == 0)
  {
    printf("%d Jogo inexistente.\n", nl);
    return;
  }
  else
  {
    
  }

  printSingle(f->x, nl);
}

void cmd_P(Tree2 **g, int nl)
{
  Tree2 *f = 0;
  char line[1024];
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[10 - 1] = '\0';
  f = searchTree2(*g, line);
  if (f == 0)
  {
    printf("%d Equipa inexistente.\n", nl);
    return;
  }
  else
  {
    
  }

  printf("%d %s %d\n", nl, f->x, f->win);
}

void cmd_r(link *head, link *last, Tree **g, Tree2 **t, int nl)
{
  char line[1024];
  Tree *f;
  Tree2 *e1;
  Tree2 *e2;
  int sAux1;
  int sAux2;
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[10 - 1] = '\0';
  f = searchTree(*g, line);
  if (f == 0)
  {
    printf("%d Jogo inexistente.\n", nl);
    return;
  }
  else
  {
    
  }

  sAux1 = f->x->game.score1;
  sAux2 = f->x->game.score2;
  if (sAux1 > sAux2)
  {
    e1 = searchTree2(*t, f->x->game.equipa1);
    e1->win--;
  }
  else
  {
    
  }

  if (sAux1 < sAux2)
  {
    e2 = searchTree2(*t, f->x->game.equipa2);
    e2->win--;
  }
  else
  {
    
  }

  *g = deleteR(*g, line, head, last, nl);
}

void cmd_s(Tree **g, Tree2 **t, int nl)
{
  Tree *f = 0;
  Tree2 *e1;
  Tree2 *e2;
  int s1;
  int s2;
  int sAux1;
  int sAux2;
  char line[1024];
  for (int line_index = 0; line_index < 10; line_index++)
  {
    line[line_index] = new_sym_var(sizeof(char) * 8);
  }

  line[10 - 1] = '\0';
  s1 = new_sym_var(sizeof(int) * 8);
  s2 = new_sym_var(sizeof(int) * 8);
  f = searchTree(*g, line);
  if (f == 0)
  {
    printf("%d Jogo inexistente.\n", nl);
    return;
  }
  else
  {
    
  }

  sAux1 = f->x->game.score1;
  sAux2 = f->x->game.score2;
  f->x->game.score1 = s1;
  f->x->game.score2 = s2;
  e1 = searchTree2(*t, f->x->game.equipa1);
  e2 = searchTree2(*t, f->x->game.equipa2);
  if (sAux1 < sAux2)
  {
    if (s1 == s2)
    {
      e2->win--;
    }
    else
    {
      
    }

    if (s1 > s2)
    {
      e2->win--;
      e1->win++;
    }
    else
    {
      
    }

  }
  else
  {
    
  }

  if (sAux1 > sAux2)
  {
    if (s1 == s2)
    {
      e1->win--;
    }
    else
    {
      
    }

    if (s1 < s2)
    {
      e1->win--;
      e2->win++;
    }
    else
    {
      
    }

  }
  else
  {
    
  }

  if (sAux1 == sAux2)
  {
    if (s1 < s2)
    {
      e2->win++;
    }
    else
    {
      
    }

    if (s1 > s2)
    {
      e1->win++;
    }
    else
    {
      
    }

  }
  else
  {
    
  }

}

void cmd_g(Tree2 *g, int nl)
{
  int win = 0;
  if (g != 0)
  {
    traverse(g, &win);
    printf("%d Melhores %d\n", nl, win);
    printMostWins(g, win, nl);
  }
  else
  {
    
  }

}

void cmd_x(Tree *g, Tree2 *t)
{
  freeTree(g);
  freeTree2(t);
}

