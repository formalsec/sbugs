/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "equipas.h"
#include "jogos.h"
#include "game_lists.h"
#include "team_lists.h"
#include "game_hashtable.h"
#include "team_hashtable.h"
#include "iteam_hashtable.h"
#include "sort.h"


static glink listOrd;
static int nl = 1;
void apagaLista(glink l)
{
  glink tmp;
  while (l != 0)
  {
    tmp = l;
    l = l->next;
    free(tmp);
  }

}

void a()
{
  char *nome;
  char *equipa1;
  char *equipa2;
  int score1;
  int score2;
  Jogo jogo;
  Equipa eq1;
  Equipa eq2;
  nome = malloc((sizeof(char)) * 1024);
  equipa1 = malloc((sizeof(char)) * 1024);
  equipa2 = malloc((sizeof(char)) * 1024);
  getchar();
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
  {
    equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa1[10 - 1] = '\0';
  for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
  {
    equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (haJogo(nome) != 1)
  {
    {
      if (haEquipa(equipa1) && haEquipa(equipa2))
      {
        {
          eq1 = Tsearch(equipa1);
          eq2 = Tsearch(equipa2);
          jogo = novoJogo(nome, eq1, eq2, score1, score2);
          Ginsert(jogo);
          listOrd = GinsertEnd(listOrd, jogo);
          if (score1 > score2)
          {
            {
              iTdelete(eq1);
              aumentaVitorias(eq1);
              iTinsert(eq1);
            }
          }
          else
          {
            
          }

          if (score2 > score1)
          {
            {
              iTdelete(eq2);
              aumentaVitorias(eq2);
              iTinsert(eq2);
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        {
          printf("%d Equipa inexistente.\n", nl);
        }
      }

    }
  }
  else
  {
    {
      printf("%d Jogo existente.\n", nl);
    }
  }

  free(nome);
  free(equipa1);
  free(equipa2);
}

void A()
{
  char *nome;
  Equipa equipa;
  nome = malloc((sizeof(char)) * 1024);
  getchar();
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (haEquipa(nome) == 0)
  {
    {
      equipa = novaEquipa(nome);
      Tinsert(equipa);
      iTinsert(equipa);
    }
  }
  else
  {
    {
      printf("%d Equipa existente.\n", nl);
    }
  }

  free(nome);
}

void l()
{
  glink t;
  for (t = listOrd; t != 0; t = t->next)
  {
    printf("%d ", nl);
    imprimeJogo(t->jogo);
  }

}

void p()
{
  char *nome;
  Jogo jogo;
  nome = malloc((sizeof(char)) * 1024);
  getchar();
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (haJogo(nome))
  {
    {
      jogo = Gsearch(nome);
      printf("%d ", nl);
      imprimeJogo(jogo);
    }
  }
  else
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }

  free(nome);
}

void P()
{
  char *nome;
  Equipa equipa;
  nome = malloc((sizeof(char)) * 1024);
  getchar();
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (haEquipa(nome))
  {
    {
      equipa = Tsearch(nome);
      printf("%d ", nl);
      imprimeEquipa(equipa);
    }
  }
  else
  {
    {
      printf("%d Equipa inexistente.\n", nl);
    }
  }

  free(nome);
}

void r()
{
  char *nome;
  Jogo jogo;
  Equipa e1;
  Equipa e2;
  int pont1;
  int pont2;
  nome = malloc((sizeof(char)) * 1024);
  getchar();
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (haJogo(nome))
  {
    {
      jogo = Gsearch(nome);
      pont1 = obtemPont(jogo, 1);
      pont2 = obtemPont(jogo, 2);
      e1 = obtemEquipa(jogo, 1);
      e2 = obtemEquipa(jogo, 2);
      if (pont1 > pont2)
      {
        {
          iTdelete(e1);
          diminuiVitorias(e1);
          iTinsert(e1);
        }
      }
      else
      {
        
      }

      if (pont2 > pont1)
      {
        {
          iTdelete(e2);
          diminuiVitorias(e2);
          iTinsert(e2);
        }
      }
      else
      {
        
      }

      Gdelete(jogo);
      listOrd = GremoveItem(listOrd, jogo, 1);
    }
  }
  else
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }

  free(nome);
}

void s()
{
  int score1;
  int score2;
  int s1;
  int s2;
  char *nome;
  Jogo jogo;
  Equipa e1;
  Equipa e2;
  nome = malloc((sizeof(char)) * 1024);
  getchar();
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (haJogo(nome))
  {
    {
      jogo = Gsearch(nome);
      s1 = obtemPont(jogo, 1);
      s2 = obtemPont(jogo, 2);
      e1 = obtemEquipa(jogo, 1);
      e2 = obtemEquipa(jogo, 2);
      if (s1 > s2)
      {
        {
          if (score1 == score2)
          {
            {
              iTdelete(e1);
              diminuiVitorias(e1);
              iTinsert(e1);
            }
          }
          else
          {
            
          }

          if (score1 < score2)
          {
            {
              iTdelete(e1);
              diminuiVitorias(e1);
              iTinsert(e1);
              iTdelete(e2);
              aumentaVitorias(e2);
              iTinsert(e2);
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        
      }

      if (s2 > s1)
      {
        {
          if (score1 == score2)
          {
            {
              iTdelete(e2);
              diminuiVitorias(e2);
              iTinsert(e2);
            }
          }
          else
          {
            
          }

          if (score2 < score1)
          {
            {
              iTdelete(e1);
              aumentaVitorias(e1);
              iTinsert(e1);
              iTdelete(e2);
              diminuiVitorias(e2);
              iTinsert(e2);
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        
      }

      if (s1 == s2)
      {
        {
          if (score1 > score2)
          {
            {
              iTdelete(e1);
              aumentaVitorias(e1);
              iTinsert(e1);
            }
          }
          else
          {
            
          }

          if (score1 < score2)
          {
            {
              iTdelete(e2);
              aumentaVitorias(e2);
              iTinsert(e2);
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        
      }

      alteraPont(jogo, score1, score2);
    }
  }
  else
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }

  free(nome);
}

void g()
{
  tlink t;
  tlink list;
  Equipa e;
  int v;
  char *nome;
  if (equipasVazioQ() == 0)
  {
    {
      list = iLastList();
      sortlist(list);
      e = list->equipa;
      v = obterVitorias(e);
      printf("%d Melhores %d\n", nl, v);
      for (t = list; t != 0; t = t->next)
      {
        e = t->equipa;
        nome = obterNomeEquipa(e);
        printf("%d * %s\n", nl, nome);
      }

    }
  }
  else
  {
    
  }

}

int main()
{
  int c;
  Ginit(2000);
  Tinit(2000);
  iTinit(2000);
  while ((c = getchar()) != EOF)
  {
    if (c == 'a')
    {
      {
        a();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'A')
    {
      {
        A();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'l')
    {
      {
        l();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'p')
    {
      {
        p();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'P')
    {
      {
        P();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'r')
    {
      {
        r();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 's')
    {
      {
        s();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'g')
    {
      {
        g();
        ++nl;
      }
    }
    else
    {
      
    }

    if (c == 'x')
    {
      {
        Gclear();
        Tclear();
        iTclear();
        apagaLista(listOrd);
        exit(0);
      }
    }
    else
    {
      
    }

  }

  return 0;
}

