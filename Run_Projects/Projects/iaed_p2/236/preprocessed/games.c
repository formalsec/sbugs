/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "consts.h"
#include "structures.h"


unsigned int hash(char *name);
game *newGame(char *name, char *team_name1, char *team_name2, int score1, int score2)
{
  game *new_game = malloc(sizeof(game));
  new_game->name = malloc((strlen(name) * (sizeof(char))) + 1);
  new_game->team1 = malloc((strlen(team_name1) * (sizeof(char))) + 1);
  new_game->team2 = malloc((strlen(team_name2) * (sizeof(char))) + 1);
  new_game->score1 = malloc(sizeof(int));
  new_game->score2 = malloc(sizeof(int));
  strcpy(new_game->name, name);
  strcpy(new_game->team1, team_name1);
  strcpy(new_game->team2, team_name2);
  *new_game->score1 = score1;
  *new_game->score2 = score2;
  return new_game;
}

void insertGame(game *hash_table[], game *new_game)
{
  int index = hash(new_game->name);
  new_game->next = hash_table[index];
  hash_table[index] = new_game;
}

game *findGame(game *hash_table[], char *name)
{
  int index = hash(name);
  game *tmp = hash_table[index];
  while ((tmp != 0) && (strncmp(tmp->name, name, 1024) != 0))
  {
    tmp = tmp->next;
  }

  return tmp;
}

void printSingleGame(game *single_game, int NL)
{
  printf("%d %s %s %s %d %d\n", NL, single_game->name, single_game->team1, single_game->team2, *single_game->score1, *single_game->score2);
}

void deleteGame(game *hash_table[], char *name)
{
  int index = hash(name);
  game *tmp = hash_table[index];
  game *prev = 0;
  while ((tmp != 0) && (strncmp(tmp->name, name, 1024) != 0))
  {
    prev = tmp;
    tmp = tmp->next;
  }

  if (tmp == 0)
  {
    return;
  }
  else
  {
    
  }

  if (prev == 0)
  {
    hash_table[index] = tmp->next;
  }
  else
  {
    prev->next = tmp->next;
  }

  free(tmp->name);
  free(tmp->team1);
  free(tmp->team2);
  free(tmp->score1);
  free(tmp->score2);
  free(tmp);
}

void initGameHashTable(game *hash_table[])
{
  int i;
  for (i = 0; i < 1000; ++i)
    hash_table[i] = 0;

}

void freeGameHashTable(game *hash_table[])
{
  int i;
  game *tmp;
  game *current;
  for (i = 0; i < 1000; ++i)
  {
    current = hash_table[i];
    while (current != 0)
    {
      tmp = current;
      current = tmp->next;
      free(tmp->name);
      free(tmp->team1);
      free(tmp->team2);
      free(tmp->score1);
      free(tmp->score2);
      free(tmp);
    }

  }

}

