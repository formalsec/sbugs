/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "proj2_h.h"


int M;
hash_link_j *head_h_j;
hash_link_e *head_h_e;
list_e *mk_list_e()
{
  list_e *l = malloc(sizeof(list_e));
  l->head = (l->last = 0);
  return l;
}

void insertEnd_e(list_e *ls_e, char *n)
{
  link_e x = malloc(sizeof(struct equipa));
  x->nome = malloc((sizeof(char)) * (strlen(n) + 1));
  strcpy(x->nome, n);
  x->jogos_ganhos = 0;
  x->next = 0;
  x->prev = ls_e->last;
  if (ls_e->last)
  {
    ls_e->last->next = x;
  }
  else
  {
    ls_e->head = x;
  }

  ls_e->last = x;
}

void Init_hash_e(int m)
{
  int i;
  M = m;
  head_h_e = malloc(M * (sizeof(hash_link_e)));
  for (i = 0; i < M; i++)
    head_h_e[i] = 0;

}

void insert_h_e(link_e e)
{
  int i = hash_s(e->nome, M);
  hash_link_e t;
  t = malloc(sizeof(struct node_e));
  t->eq = e;
  t->next = head_h_e[i];
  head_h_e[i] = t;
}

link_e lookup_e(char *v)
{
  int i = hash_s(v, M);
  hash_link_e t;
  for (t = head_h_e[i]; t != 0; t = t->next)
    if (strcmp(t->eq->nome, v) == 0)
  {
    return t->eq;
  }
  else
  {
    
  }


  return 0;
}

void delete_h_e(link_e e)
{
  int i = hash_s(e->nome, M);
  hash_link_e t;
  hash_link_e prev;
  for (t = head_h_e[i], prev = 0; t != 0; prev = t, t = t->next)
  {
    if (strcmp(t->eq->nome, e->nome) == 0)
    {
      if (t == head_h_e[i])
      {
        head_h_e[i] = t->next;
      }
      else
      {
        prev->next = t->next;
      }

      free(t);
      break;
    }
    else
    {
      
    }

  }

}

void delete_e(list_e *ls_e, link_e e)
{
  if (e == ls_e->head)
  {
    ls_e->head = e->next;
  }
  else
  {
    e->prev->next = e->next;
  }

  if (e == ls_e->last)
  {
    ls_e->last = e->prev;
  }
  else
  {
    e->next->prev = e->prev;
  }

  free(e->nome);
  free(e);
}

