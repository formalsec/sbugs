/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>


int NL = 0;
int n_jogos = 0;
typedef struct 
{
  char name[700];
  char equipa1[700];
  char equipa2[700];
  int s1;
  int s2;
} jogo;
jogo lista[300];
typedef struct 
{
  char nome[700];
  int vitorias;
} equipa;
jogo *hash_table[10000];
equipa *hash_tableE[10000];
void init_table()
{
  int i;
  for (i = 0; i < 10000; i++)
  {
    hash_table[i] = 0;
  }

}

void init_hashE()
{
  int i;
  for (i = 0; i < 10000; i++)
  {
    hash_tableE[i] = 0;
  }

}

size_t hash(char *string)
{
  size_t tl = 5407;
  for (; *string; string++)
  {
    tl = (tl * 47) + (*string);
  }

  return tl % 10000;
}

int hash_table_insert(jogo *p)
{
  int index = hash(p->name);
  int i;
  int tentar;
  if (p == 0)
  {
    return 0;
  }
  else
  {
    
  }

  for (i = 0; i < 10000; i++)
  {
    tentar = (i + index) % 10000;
    if (hash_table[tentar] == 0)
    {
      hash_table[tentar] = p;
      return 1;
    }
    else
    {
      
    }

  }

  return 0;
}

int hash_table_insertE(equipa *p)
{
  int index = hash(p->nome);
  int i;
  int tentar;
  if (p == 0)
  {
    return 0;
  }
  else
  {
    
  }

  for (i = 0; i < 10000; i++)
  {
    tentar = (i + index) % 10000;
    if (hash_tableE[tentar] == 0)
    {
      hash_tableE[tentar] = p;
      return 1;
    }
    else
    {
      
    }

  }

  return 0;
}

jogo *hash_table_lookup(char *name)
{
  int index = hash(name);
  int i;
  int tentar;
  for (i = 0; i < 10000; i++)
  {
    tentar = (index + i) % 10000;
    if (hash_table[tentar] == 0)
    {
      return 0;
    }
    else
    {
      
    }

    if ((hash_table[tentar] != 0) && (strncmp(hash_table[tentar]->name, name, 10000) == 0))
    {
      return hash_table[tentar];
    }
    else
    {
      
    }

  }

  return 0;
}

equipa *hash_table_lookupE(char *name)
{
  int index = hash(name);
  int i;
  int tentar;
  for (i = 0; i < 10000; i++)
  {
    tentar = (index + i) % 10000;
    if (hash_tableE[tentar] == 0)
    {
      return 0;
    }
    else
    {
      
    }

    if ((hash_tableE[tentar] != 0) && (strncmp(hash_tableE[tentar]->nome, name, 10000) == 0))
    {
      return hash_tableE[tentar];
    }
    else
    {
      
    }

  }

  return 0;
}

jogo *hash_table_delete(char *name)
{
  int index = hash(name);
  int i;
  int tentar;
  for (i = 0; i < 10000; i++)
  {
    tentar = (index + i) % 10000;
    if (hash_table[tentar] == 0)
    {
      return 0;
    }
    else
    {
      
    }

    if ((hash_table[tentar] != 0) && (strncmp(hash_table[tentar]->name, name, 10000) == 0))
    {
      jogo *tmp = hash_table[tentar];
      hash_table[tentar] = 0;
      return tmp;
    }
    else
    {
      
    }

  }

  return 0;
}

void a(void)
{
  jogo game;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game.name[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game.name[10 - 1] = '\0';
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game.equipa1[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game.equipa1[10 - 1] = '\0';
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game.equipa2[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game.equipa2[10 - 1] = '\0';
  game.s1 = new_sym_var(sizeof(int) * 8);
  game.s2 = new_sym_var(sizeof(int) * 8);
  if (hash_table_lookup(game.name) != 0)
  {
    printf("%d Jogo existente.\n", NL);
    return;
  }
  else
  {
    
  }

  if ((hash_table_lookupE(game.equipa1) != 0) && (hash_table_lookupE(game.equipa2) != 0))
  {
    hash_table_insert(&game);
    lista[n_jogos] = game;
    n_jogos++;
    if (game.s1 > game.s2)
    {
      hash_table_lookupE(game.equipa1)->vitorias++;
    }
    else
    {
      
    }

    if (game.s2 > game.s1)
    {
      hash_table_lookupE(game.equipa2)->vitorias++;
    }
    else
    {
      
    }

    return;
  }
  else
  {
    
  }

  printf("%d Equipa inexistente.\n", NL);
}

void A(void)
{
  equipa e;
  for (int e_index = 0; e_index < 10; e_index++)
  {
    e.nome[e_index] = new_sym_var(sizeof(char) * 8);
  }

  e.nome[10 - 1] = '\0';
  e.vitorias = new_sym_var(sizeof(int) * 8);
  if (hash_table_lookupE(e.nome) != 0)
  {
    printf("%d Equipa existente.\n", NL);
    return;
  }
  else
  {
    
  }

  e.vitorias = 0;
  hash_table_insertE(&e);
}

void l(void)
{
  int i = 0;
  if (n_jogos == 0)
  {
    return;
  }
  else
  {
    
  }

  for (i = 0; i < n_jogos; i++)
  {
    printf("%d %s %s %s %d %d\n", NL, lista[i].name, lista[i].equipa1, lista[i].equipa2, lista[i].s1, lista[i].s2);
  }

}

void p(void)
{
  jogo game;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game.name[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game.name[10 - 1] = '\0';
  if (hash_table_lookup(game.name) == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  printf("%d %s %s %s %d %d\n", NL, game.name, game.equipa1, game.equipa2, game.s1, game.s2);
}

void r(void)
{
  jogo game;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game.name[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game.name[10 - 1] = '\0';
  if (hash_table_lookup(game.name) == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  hash_table_delete(game.name);
  n_jogos--;
}

void s(void)
{
  jogo game;
  int s1;
  int s2;
  int i;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game.name[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game.name[10 - 1] = '\0';
  s1 = new_sym_var(sizeof(int) * 8);
  s2 = new_sym_var(sizeof(int) * 8);
  if (hash_table_lookup(game.name) == 0)
  {
    printf("%d Jogo inexistente.", NL);
    return;
  }
  else
  {
    
  }

  for (i = 0; i < n_jogos; i++)
  {
    if (strcmp(lista[i].name, game.name) == 0)
    {
      game.s1 = s1;
      game.s2 = s2;
    }
    else
    {
      
    }

  }

  hash_table_lookup(game.name)->s1 = s1;
  hash_table_lookup(game.name)->s2 = s2;
}

void P(void)
{
  equipa team;
  for (int team_index = 0; team_index < 10; team_index++)
  {
    team.nome[team_index] = new_sym_var(sizeof(char) * 8);
  }

  team.nome[10 - 1] = '\0';
  if (hash_table_lookupE(team.nome) == 0)
  {
    printf("%d Equipa inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  printf("%d %s %d\n", NL, team.nome, team.vitorias);
}

int main()
{
  char b = 'h';
  init_hashE();
  init_table();
  while (b != 'x')
  {
    b = new_sym_var(sizeof(char) * 8);
    switch (b)
    {
      case 'a':
        a();
        NL++;
        break;

      case 'l':
        l();
        NL++;
        break;

      case 'p':
        p();
        NL++;
        break;

      case 'r':
        r();
        NL++;
        break;

      case 's':
        s();
        NL++;
        break;

      case 'A':
        A();
        NL++;
        break;

      case 'P':
        P();
        NL++;
        break;

      case 'g':
        NL++;
        break;

      case 'x':
        return 0;

    }

    return 0;
  }

}

