/*File generated by PreProcessor.py*/


#include "declaracoes.h"
#include <stdio.h>
#include <string.h>
#include <stdlib.h>


int hash(char *v, int M)
{
  int h = 0;
  int a = 127;
  for (; (*v) != '\0'; v++)
    h = ((a * h) + (*v)) % M;

  return h;
}

link_j pesquisa_jogo(link_j *heads_j, char *nome)
{
  int i = hash(nome, 1000);
  link_j t;
  for (t = heads_j[i]; t; t = t->next)
    if (strcmp(t->j->nome, nome) == 0)
  {
    return t;
  }
  else
  {
    
  }


  return 0;
}

link_e pesquisa_equipa(link_e *heads_e, char *nome)
{
  int i = hash(nome, 1000);
  link_e t;
  for (t = heads_e[i]; t; t = t->next)
    if (strcmp(t->e.nome, nome) == 0)
  {
    return t;
  }
  else
  {
    
  }


  return 0;
}

link_j cria_jogo_node(lista *ls, char *buffer_nome, char *buffer_equipa1, char *buffer_equipa2, int p1, int p2)
{
  jogo *jogo;
  link_j x = malloc(sizeof(struct node_jogo));
  x->j = malloc(sizeof(struct jogo));
  x->j->nome = malloc((sizeof(char)) * (strlen(buffer_nome) + 1));
  strcpy(x->j->nome, buffer_nome);
  x->j->equipa1 = malloc((sizeof(char)) * (strlen(buffer_equipa1) + 1));
  strcpy(x->j->equipa1, buffer_equipa1);
  x->j->equipa2 = malloc((sizeof(char)) * (strlen(buffer_equipa2) + 1));
  strcpy(x->j->equipa2, buffer_equipa2);
  x->j->p1 = p1;
  x->j->p2 = p2;
  x->next = 0;
  jogo = x->j;
  adiciona_fim(ls, jogo);
  return x;
}

link_e cria_equipa_node(char *buffer_nome)
{
  link_e x = malloc(sizeof(struct node_equipa));
  x->e.nome = malloc((sizeof(char)) * (strlen(buffer_nome) + 1));
  strcpy(x->e.nome, buffer_nome);
  x->e.vitorias = 0;
  x->next = 0;
  return x;
}

link_j insere_jogo_inicio(lista *ls, link_j head, char *nome, char *equipa1, char *equipa2, int p1, int p2)
{
  link_j x = cria_jogo_node(ls, nome, equipa1, equipa2, p1, p2);
  x->next = head;
  return x;
}

link_e insere_equipa_inicio(link_e head, char *nome)
{
  link_e x = cria_equipa_node(nome);
  x->next = head;
  return x;
}

void adiciona_fim(lista *l, jogo *j)
{
  node_j *nn = malloc(sizeof(node_j));
  nn->previous = l->last;
  nn->next = 0;
  nn->j = j;
  if (l->last)
  {
    l->last->next = nn;
  }
  else
  {
    l->head = nn;
  }

  l->last = nn;
}

link_j apaga_node_jogo(link_j head, char *nome)
{
  link_j t;
  link_j prev;
  for (t = head, prev = 0; t; prev = t, t = t->next)
  {
    if (strcmp(t->j->nome, nome) == 0)
    {
      if (t == head)
      {
        head = t->next;
      }
      else
      {
        prev->next = t->next;
      }

      free(t->j->nome);
      free(t->j->equipa1);
      free(t->j->equipa2);
      free(t->j);
      free(t);
      return head;
    }
    else
    {
      
    }

  }

  return head;
}

void remove_node(lista *l, node_j *n)
{
  if (n->previous == 0)
  {
    l->head = n->next;
  }
  else
  {
    n->previous->next = n->next;
  }

  if (n->next == 0)
  {
    l->last = n->previous;
  }
  else
  {
    n->next->previous = n->previous;
  }

  free(n);
}

int comparador(const void *a, const void *b)
{
  const char **ia = (const char **) a;
  const char **ib = (const char **) b;
  return strcmp(*ia, *ib);
}

