/*File generated by PreProcessor.py*/


#include "HashTable.h"


int hash(char *v)
{
  int h = 0;
  int a = 127;
  for (; (*v) != '\0'; v++)
    h = ((a * h) + (*v)) % 1999;

  return h;
}

Hash_Jogo *hash_init_JOGOS()
{
  Hash_Jogo *HTJ = malloc(sizeof(Hash_Jogo));
  HTJ->gaveta_JOGO = calloc(1999, sizeof(cabeca_JOGO *));
  return HTJ;
}

Hash_Equipa *hash_init_EQUIPAS()
{
  Hash_Equipa *HTE = malloc(sizeof(Hash_Equipa));
  HTE->gaveta_EQUIPA = calloc(1999, sizeof(cabeca_EQUIPA *));
  return HTE;
}

void hash_insercao_JOGOS(Hash_Jogo *HTJ, int Chave, Jogo *CJ)
{
  cabeca_JOGO *CJ_aux = malloc(sizeof(cabeca_JOGO));
  CJ_aux->ptrJOGO = CJ;
  CJ_aux->proximo = HTJ->gaveta_JOGO[Chave];
  CJ_aux->anterior = 0;
  if (HTJ->gaveta_JOGO[Chave])
  {
    HTJ->gaveta_JOGO[Chave]->anterior = CJ_aux;
  }
  else
  {
    
  }

  HTJ->gaveta_JOGO[Chave] = CJ_aux;
}

void hash_insercao_EQUIPAS(Hash_Equipa *HTE, int Chave, Equipas *CE)
{
  cabeca_EQUIPA *CE_aux = malloc(sizeof(cabeca_EQUIPA));
  CE_aux->ptrEQUIPA = CE;
  CE_aux->proximo = HTE->gaveta_EQUIPA[Chave];
  HTE->gaveta_EQUIPA[Chave] = CE_aux;
}

Jogo *hash_procura_Jogo(Hash_Jogo *HTJ, char *nome)
{
  int index = hash(nome);
  cabeca_JOGO *aux = HTJ->gaveta_JOGO[index];
  for (; aux != 0; aux = aux->proximo)
  {
    if (strcmp(aux->ptrJOGO->nome, nome) == 0)
    {
      return aux->ptrJOGO;
    }
    else
    {
      
    }

  }

  return 0;
}

Equipas *hash_procura_Equipa(Hash_Equipa *HTE, char *nome)
{
  int index = hash(nome);
  cabeca_EQUIPA *aux = HTE->gaveta_EQUIPA[index];
  for (; aux != 0; aux = aux->proximo)
  {
    if (strcmp(aux->ptrEQUIPA->nome, nome) == 0)
    {
      return aux->ptrEQUIPA;
    }
    else
    {
      
    }

  }

  return 0;
}

Lista_Equipas *cria_lista_Equipas()
{
  Lista_Equipas *lista_aux = malloc(sizeof(Lista_Equipas));
  lista_aux->topo = 0;
  return lista_aux;
}

Lista_Jogos *cria_lista_Jogos()
{
  Lista_Jogos *lista_aux = malloc(sizeof(Lista_Jogos));
  lista_aux->topo = 0;
  lista_aux->fim = 0;
  return lista_aux;
}

void Liberta_HTJ(Hash_Jogo *HTJ)
{
  cabeca_JOGO *CJ;
  size_t i;
  for (i = 0; i < 1999; i++)
  {
    while (HTJ->gaveta_JOGO[i])
    {
      CJ = HTJ->gaveta_JOGO[i]->proximo;
      free(HTJ->gaveta_JOGO[i]);
      HTJ->gaveta_JOGO[i] = CJ;
    }

  }

  free(HTJ->gaveta_JOGO);
  free(HTJ);
}

void Liberta_HTE(Hash_Equipa *HTE)
{
  cabeca_EQUIPA *CE;
  size_t i;
  for (i = 0; i < 1999; i++)
  {
    while (HTE->gaveta_EQUIPA[i])
    {
      CE = HTE->gaveta_EQUIPA[i]->proximo;
      free(HTE->gaveta_EQUIPA[i]);
      HTE->gaveta_EQUIPA[i] = CE;
    }

  }

  free(HTE->gaveta_EQUIPA);
  free(HTE);
}

void Liberta_Lista_Jogo(Lista_Jogos *CJ)
{
  Jogo *aux;
  while (CJ->topo != 0)
  {
    aux = CJ->topo;
    CJ->topo = CJ->topo->proximo;
    free(aux->equipa1);
    free(aux->equipa2);
    free(aux->nome);
    free(aux);
  }

  free(CJ);
}

void Liberta_Lista_Equipas(Lista_Equipas *CE)
{
  Equipas *aux;
  while (CE->topo != 0)
  {
    aux = CE->topo;
    CE->topo = CE->topo->proximo;
    free(aux->nome);
    free(aux);
  }

  free(CE);
}

