/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <string.h>
#include "HashtableJogo.h"


Hashtable_Jogo *ht_criar_jogo(int max)
{
  Hashtable_Jogo *ht = malloc(sizeof(Hashtable_Jogo));
  int i;
  ht->entradas = malloc((sizeof(Lista_Ligada_Jogo)) * max);
  ht->cap = max;
  ht->qtd = 0;
  for (i = 0; i < max; ++i)
    ht->entradas[i] = ll_criar_jogo();

  return ht;
}

int ht_hash_jogo(Hashtable_Jogo *ht, char *chave)
{
  unsigned long int valor = 0;
  int i;
  int tam = strlen(chave);
  for (i = 0; i < tam; ++i)
    valor = (valor * 37) + chave[i];

  return valor % ht->cap;
}

void ht_inserir_jogo(Hashtable_Jogo *ht, Jogo *jogo, char *chave)
{
  int i = ht_hash_jogo(ht, chave);
  Lista_Ligada_Jogo *lista = ht->entradas[i];
  ll_inserir_jogo(lista, jogo, chave);
  ht->qtd++;
}

void ht_deletar_jogo(Hashtable_Jogo *ht, char *chave)
{
  int index_hash = ht_hash_jogo(ht, chave);
  Lista_Ligada_Jogo *lista = ht->entradas[index_hash];
  No_Jogo *tmp = lista->inicio;
  ;
  while (tmp)
  {
    if (strcmp(tmp->chave, chave) == 0)
    {
      ll_deletar_no(lista, tmp);
      free(tmp->chave);
      free(tmp);
      ht->qtd--;
      return;
    }
    else
    {
      
    }

    tmp = tmp->prox;
  }

}

Jogo *ht_pesquisar_jogo(Hashtable_Jogo *ht, char *chave)
{
  int index_hash = ht_hash_jogo(ht, chave);
  No_Jogo *n = ht->entradas[index_hash]->inicio;
  while (n)
  {
    if (strcmp(n->chave, chave) == 0)
    {
      return n->jogo;
    }
    else
    {
      
    }

    n = n->prox;
  }

  return 0;
}

void free_hash_jogo(Hashtable_Jogo *ht)
{
  int i;
  No_Jogo *tmp;
  No_Jogo *aux;
  for (i = 0; i < ht->cap; i++)
  {
    for (tmp = ht->entradas[i]->inicio; tmp != 0; tmp = aux)
    {
      aux = tmp->prox;
      free(tmp->chave);
      free(tmp);
    }

    free(ht->entradas[i]);
  }

  free(ht->entradas);
  free(ht);
}

