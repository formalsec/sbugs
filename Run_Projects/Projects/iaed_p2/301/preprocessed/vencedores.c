/*File generated by PreProcessor.py*/


#include "structs.h"
#include <string.h>
#include <stdio.h>


void merge(char **aux, char **a, int l, int m, int r)
{
  int i;
  int j;
  int k;
  for (i = m + 1; i > l; i--)
  {
    aux[i - 1] = a[i - 1];
  }

  for (j = m; j < r; j++)
  {
    aux[(r + m) - j] = a[j + 1];
  }

  for (k = l; k <= r; k++)
  {
    if (strcmp(aux[j], aux[i]) < 0)
    {
      {
        a[k] = aux[j--];
      }
    }
    else
    {
      {
        a[k] = aux[i++];
      }
    }

  }

}

void mergesort(char **aux, char **a, int l, int r)
{
  int m = (r + l) / 2;
  if (r <= l)
  {
    return;
  }
  else
  {
    
  }

  mergesort(aux, a, l, m);
  mergesort(aux, a, m + 1, r);
  merge(aux, a, l, m, r);
}

void listaVencedores(Hash_tableEq *equipasT, int nl)
{
  int i;
  int i2 = 0;
  int max = -1;
  int counter = 0;
  int len;
  char buffer[1024];
  char **backup;
  char **aux;
  Hash_nodeEq *node;
  for (i = 0; i < equipasT->capacity; ++i)
  {
    node = equipasT->table[i];
    while (node != 0)
    {
      if (node->equipa->vitorias == max)
      {
        counter++;
      }
      else
      {
        if (node->equipa->vitorias > max)
        {
          {
            max = node->equipa->vitorias;
            counter = 1;
          }
        }
        else
        {
          
        }

      }

      node = node->next;
    }

  }

  backup = (char **) calloc(counter, sizeof(char *));
  for (i = 0; i < equipasT->capacity; ++i)
  {
    node = equipasT->table[i];
    while (node != 0)
    {
      if (node->equipa->vitorias == max)
      {
        {
          strcpy(buffer, node->equipa->nome);
          len = strlen(buffer) + 1;
          backup[i2] = (char *) malloc((sizeof(char)) * len);
          strcpy(backup[i2], node->equipa->nome);
          i2++;
        }
      }
      else
      {
        
      }

      node = node->next;
    }

  }

  aux = (char **) calloc(i2 + 1, sizeof(char *));
  mergesort(aux, backup, 0, i2 - 1);
  if (max == (-1))
  {
    {
      free(backup);
      free(aux);
      return;
    }
  }
  else
  {
    printf("%d Melhores %d\n", nl, max);
  }

  for (i = 0; i <= (i2 - 1); ++i)
  {
    if (strcmp(backup[i], ""))
    {
      printf("%d * %s\n", nl, backup[i]);
    }
    else
    {
      
    }

    free(backup[i]);
  }

  free(backup);
  free(aux);
}

