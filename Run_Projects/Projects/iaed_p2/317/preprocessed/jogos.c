/*File generated by PreProcessor.py*/


#include "jogos.h"


int JH_hash(char *v, int M)
{
  int h;
  int a = 17;
  int b = 19;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (M - 1))
    h = ((a * h) + (*v)) % M;

  return h;
}

void inicializa_jogos_hash(JHnode *Jhash)
{
  int i;
  for (i = 0; i < 137; i++)
    Jhash[i] = 0;

}

Jogo *JHsearch(JHnode *Jhash, char *nome)
{
  int i = JH_hash(nome, 137);
  JHnode node;
  for (node = Jhash[i]; node != 0; node = node->next)
    if (strcmp(node->jogo->nome, nome) == 0)
  {
    return node->jogo;
  }
  else
  {
    
  }


  return 0;
}

void JHinsert(JHnode *Jhash, Jogo *jogo)
{
  int i = JH_hash(jogo->nome, 137);
  JHnode node;
  node = malloc(sizeof(struct node_jogo));
  node->jogo = jogo;
  node->next = Jhash[i];
  Jhash[i] = node;
}

void JHdelete(JHnode *Jhash, char *nome)
{
  int i = JH_hash(nome, 137);
  JHnode node;
  JHnode node_ant;
  node = Jhash[i];
  if (strcmp(node->jogo->nome, nome) == 0)
  {
    Jhash[i] = node->next;
  }
  else
  {
    {
      for (node_ant = Jhash[i], node = node->next; strcmp(node->jogo->nome, nome) != 0; node = node->next)
        node_ant = node;

      node_ant->next = node->next;
    }
  }

  free_jogo(node->jogo);
  free(node);
}

void inicializa_jogos_sistema(Jogos_sistema *jogos_sis)
{
  jogos_sis->tail = 0;
  jogos_sis->head = 0;
}

void JSinsert(Jogos_sistema *jogos_sis, Jogo *jogo)
{
  JHnode node = malloc(sizeof(struct node_jogo));
  node->jogo = jogo;
  node->next = 0;
  if (jogos_sis->head == 0)
  {
    {
      jogos_sis->head = node;
      jogos_sis->tail = node;
      return;
    }
  }
  else
  {
    
  }

  jogos_sis->tail->next = node;
  jogos_sis->tail = node;
}

void JSdelete(Jogos_sistema *jogos_sis, char *nome)
{
  JHnode node;
  JHnode node_ant;
  node = jogos_sis->head;
  if (strcmp(node->jogo->nome, nome) == 0)
  {
    {
      jogos_sis->head = node->next;
    }
  }
  else
  {
    {
      node_ant = jogos_sis->head;
      node = node->next;
      while (strcmp(node->jogo->nome, nome) != 0)
      {
        node_ant = node;
        node = node->next;
      }

      if (strcmp(node->jogo->nome, jogos_sis->tail->jogo->nome) == 0)
      {
        jogos_sis->tail = node_ant;
      }
      else
      {
        
      }

      node_ant->next = node->next;
    }
  }

  free(node);
}

void free_jogo(Jogo *jogo)
{
  free(jogo->nome);
  free(jogo);
}

void free_jogos_sis(Jogos_sistema *jogos_sis)
{
  JHnode JHnode_aux;
  JHnode JHtmp;
  for (JHnode_aux = jogos_sis->head; JHnode_aux != 0;)
  {
    JHtmp = JHnode_aux->next;
    free(JHnode_aux);
    JHnode_aux = JHtmp;
  }

  free(jogos_sis);
}

