/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "heads.h"


HT_equipas *makeHTE(int HT_tam)
{
  int i;
  HT_equipas *heads;
  heads = malloc((sizeof(HT_equipas)) * HT_tam);
  for (i = 0; i < HT_tam; i++)
  {
    heads[i] = 0;
  }

  return heads;
}

void addHTE(equipa *equipa, HT_equipas *heads, int HT_tam)
{
  int i = hashU(equipa->nome, HT_tam);
  HT_equipas novo;
  novo = calloc(1, (sizeof(HT_equipas)) * 3);
  novo->equipa = equipa;
  if (heads[i])
  {
    heads[i]->prev = novo;
    heads[i]->prev->equipa = equipa;
    heads[i]->prev->next = heads[i];
    heads[i] = heads[i]->prev;
  }
  else
  {
    heads[i] = novo;
  }

}

void remHTE(char *nome, HT_equipas *heads, int HT_tam)
{
  int i = hashU(nome, HT_tam);
  HT_equipas HT_equipas;
  equipa *equipa = 0;
  for (HT_equipas = heads[i]; HT_equipas; HT_equipas = HT_equipas->next)
  {
    equipa = HT_equipas->equipa;
    if (compare_strings(equipa->nome, nome) == 0)
    {
      if (HT_equipas->prev == 0)
      {
        heads[i] = HT_equipas->next;
      }
      else
      {
        HT_equipas->prev->next = HT_equipas->next;
      }

      if (HT_equipas->next != 0)
      {
        HT_equipas->next->prev = HT_equipas->prev;
      }
      else
      {
        
      }

      free(HT_equipas);
    }
    else
    {
      
    }

    break;
  }

}

equipa *searchEquipa(char *nome, HT_equipas *heads, int HT_tam)
{
  int i = hashU(nome, HT_tam);
  HT_equipas HT_equipas;
  equipa *equipa_ = 0;
  equipa *final = 0;
  for (HT_equipas = heads[i]; HT_equipas; HT_equipas = HT_equipas->next)
  {
    equipa_ = HT_equipas->equipa;
    if (compare_strings(equipa_->nome, nome) == 0)
    {
      final = HT_equipas->equipa;
      break;
    }
    else
    {
      
    }

  }

  return final;
}

void freeHTE(HT_equipas *HT, int HT_tam)
{
  int i;
  HT_equipas tmp;
  for (i = 0; i < HT_tam; i++)
  {
    while (HT[i] != 0)
    {
      tmp = HT[i]->next;
      free(HT[i]);
      HT[i] = tmp;
    }

  }

  free(HT);
}

