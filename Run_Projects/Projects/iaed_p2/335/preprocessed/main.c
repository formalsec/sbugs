/*File generated by PreProcessor.py*/


#include <stdio.h>
#include "equipas.h"
#include "jogos.h"


void a(int NL, lista_jogos *lista, link_equipa *ht_equipas, link_jogo *ht_jogos)
{
  char nome_jogo[1023 + 1];
  char nome_equipa1[1023 + 1];
  char nome_equipa2[1023 + 1];
  int score1;
  int score2;
  link_equipa equipa1;
  link_equipa equipa2;
  link_jogo novo;
  for (int nome_jogo_index = 0; nome_jogo_index < (1023 + 1); nome_jogo_index++)
  {
    nome_jogo[nome_jogo_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_jogo[(1023 + 1) - 1] = '\0';
  for (int nome_equipa1_index = 0; nome_equipa1_index < (1023 + 1); nome_equipa1_index++)
  {
    nome_equipa1[nome_equipa1_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_equipa1[(1023 + 1) - 1] = '\0';
  for (int nome_equipa2_index = 0; nome_equipa2_index < (1023 + 1); nome_equipa2_index++)
  {
    nome_equipa2[nome_equipa2_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_equipa2[(1023 + 1) - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (procura_jogo(nome_jogo, ht_jogos))
  {
    {
      printf("%d Jogo existente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  if ((!(equipa1 = procura_equipa(nome_equipa1, ht_equipas))) || (!(equipa2 = procura_equipa(nome_equipa2, ht_equipas))))
  {
    {
      printf("%d Equipa inexistente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  if (score1 < score2)
  {
    equipa2->vitorias++;
  }
  else
  {
    
  }

  if (score1 > score2)
  {
    equipa1->vitorias++;
  }
  else
  {
    
  }

  novo = novo_jogo(nome_jogo, nome_equipa1, nome_equipa2, score1, score2, ht_equipas);
  adiciona_jogo_lista(novo, lista);
  adiciona_jogo_ht(novo, ht_jogos);
}

void A(int NL, link_equipa *ht_equipas, lista_equipas *lista_equipas)
{
  char nome_equipa[1023];
  link_equipa nova;
  for (int nome_equipa_index = 0; nome_equipa_index < 10; nome_equipa_index++)
  {
    nome_equipa[nome_equipa_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_equipa[10 - 1] = '\0';
  if (procura_equipa(nome_equipa, ht_equipas))
  {
    {
      printf("%d Equipa existente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  nova = nova_equipa(nome_equipa);
  adiciona_equipa_lista(nova, lista_equipas);
  adiciona_equipa_ht(nova, ht_equipas);
}

void p(int NL, link_jogo *ht_jogos)
{
  char nome_jogo[1023 + 1];
  link_jogo jogo;
  for (int nome_jogo_index = 0; nome_jogo_index < (1023 + 1); nome_jogo_index++)
  {
    nome_jogo[nome_jogo_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_jogo[(1023 + 1) - 1] = '\0';
  if (!(jogo = procura_jogo(nome_jogo, ht_jogos)))
  {
    {
      printf("%d Jogo inexistente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  printf("%d %s %s %s %d %d\n", NL, jogo->nome_jogo, jogo->equipa1->nome_equipa, jogo->equipa2->nome_equipa, jogo->score1, jogo->score2);
}

void P(int NL, link_equipa *ht_equipas)
{
  char nome_equipa[1023 + 1];
  link_equipa equipa;
  for (int nome_equipa_index = 0; nome_equipa_index < (1023 + 1); nome_equipa_index++)
  {
    nome_equipa[nome_equipa_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_equipa[(1023 + 1) - 1] = '\0';
  if (!(equipa = procura_equipa(nome_equipa, ht_equipas)))
  {
    {
      printf("%d Equipa inexistente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  printf("%d %s %d\n", NL, equipa->nome_equipa, equipa->vitorias);
}

void l(int NL, lista_jogos *lista_jogos)
{
  link_jogo t;
  for (t = lista_jogos->primeiro; t != 0; t = t->next_lista)
    printf("%d %s %s %s %d %d\n", NL, t->nome_jogo, t->equipa1->nome_equipa, t->equipa2->nome_equipa, t->score1, t->score2);

}

void s(int NL, link_jogo *ht_jogos)
{
  char nome_jogo[1023 + 1];
  int score1;
  int score2;
  link_jogo jogo;
  for (int nome_jogo_index = 0; nome_jogo_index < (1023 + 1); nome_jogo_index++)
  {
    nome_jogo[nome_jogo_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_jogo[(1023 + 1) - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (!(jogo = procura_jogo(nome_jogo, ht_jogos)))
  {
    {
      printf("%d Jogo inexistente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  if (jogo->score1 > jogo->score2)
  {
    jogo->equipa1->vitorias--;
  }
  else
  {
    
  }

  if (jogo->score1 < jogo->score2)
  {
    jogo->equipa2->vitorias--;
  }
  else
  {
    
  }

  if (score1 > score2)
  {
    jogo->equipa1->vitorias++;
  }
  else
  {
    
  }

  if (score1 < score2)
  {
    jogo->equipa2->vitorias++;
  }
  else
  {
    
  }

  jogo->score1 = score1;
  jogo->score2 = score2;
}

void r(int NL, lista_jogos *lista_jogos, link_jogo *ht_jogos)
{
  char nome_jogo[1023 + 1];
  link_jogo jogo;
  for (int nome_jogo_index = 0; nome_jogo_index < (1023 + 1); nome_jogo_index++)
  {
    nome_jogo[nome_jogo_index] = new_sym_var(sizeof(char) * 8);
  }

  nome_jogo[(1023 + 1) - 1] = '\0';
  if (!(jogo = procura_jogo(nome_jogo, ht_jogos)))
  {
    {
      printf("%d Jogo inexistente.\n", NL);
      return;
    }
  }
  else
  {
    
  }

  if (jogo->score1 > jogo->score2)
  {
    jogo->equipa1->vitorias--;
  }
  else
  {
    
  }

  if (jogo->score1 < jogo->score2)
  {
    jogo->equipa2->vitorias--;
  }
  else
  {
    
  }

  remove_jogo_lista(jogo, lista_jogos);
  remove_jogo_ht(jogo, ht_jogos);
  liberta_jogo(jogo);
}

void g(int NL, lista_equipas *lista_equipas)
{
  int max_vit = encontra_max_vit(lista_equipas);
  if (max_vit >= 0)
  {
    print_g(NL, max_vit, lista_equipas);
  }
  else
  {
    
  }

}

int main()
{
  int cmdo;
  int NL = 0;
  link_equipa *ht_equipas = inicializa_ht_equipas();
  link_jogo *ht_jogos = inicializa_ht_jogos();
  lista_equipas *lista_equipas = inicializa_lista_equipas();
  lista_jogos *lista_jogos = inicializa_lista_jogos();
  do
  {
    NL++;
    switch (cmdo = getchar())
    {
      case 'a':
        a(NL, lista_jogos, ht_equipas, ht_jogos);
        break;

      case 'A':
        A(NL, ht_equipas, lista_equipas);
        break;

      case 'p':
        p(NL, ht_jogos);
        break;

      case 'P':
        P(NL, ht_equipas);
        break;

      case 'l':
        l(NL, lista_jogos);
        break;

      case 's':
        s(NL, ht_jogos);
        break;

      case 'r':
        r(NL, lista_jogos, ht_jogos);
        break;

      case 'g':
        g(NL, lista_equipas);
        break;

      case 'x':
        break;

    }

    getchar();
  }
  while (cmdo != 'x');
  destroi_estrut_equipas(lista_equipas, ht_equipas);
  destroi_estrut_jogos(lista_jogos, ht_jogos);
  return 0;
}

