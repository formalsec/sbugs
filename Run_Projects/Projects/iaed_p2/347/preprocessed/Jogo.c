/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <stdio.h>
#include <limits.h>
#include <string.h>
#include "Jogo.h"


Jogo *novoJogo(char *nome, Equipa *equipa1, Equipa *equipa2, int pontos1, int pontos2)
{
  Jogo *jogo = malloc(sizeof(Jogo));
  jogo->nome = malloc((sizeof(char)) * (strlen(nome) + 1));
  strcpy(jogo->nome, nome);
  jogo->equipa1 = equipa1;
  jogo->equipa2 = equipa2;
  jogo->pontuacao[0] = pontos1;
  jogo->pontuacao[1] = pontos2;
  return jogo;
}

void liberarJogo(Jogo *jogo)
{
  free(jogo->nome);
  free(jogo);
}

entradaJ_t *par_htJ(char *chaveJ, Jogo *jogo)
{
  entradaJ_t *entrada = malloc(sizeof(entradaJ_t));
  entrada->chaveJ = malloc(((sizeof(char)) * strlen(chaveJ)) + 1);
  entrada->jogo = jogo;
  strcpy(entrada->chaveJ, chaveJ);
  entrada->proxJ = 0;
  return entrada;
}

htJ_t *criar_htJ(void)
{
  int i = 0;
  htJ_t *hashtable = malloc(sizeof(htJ_t));
  hashtable->entradas = malloc((sizeof(entradaJ_t)) * 2000);
  for (; i < 2000; ++i)
    hashtable->entradas[i] = 0;

  return hashtable;
}

int hashJ(char *chaveJ)
{
  unsigned int valor_hash = 0;
  int i = 0;
  int tamanho_chave = strlen(chaveJ);
  for (; i < tamanho_chave; ++i)
    valor_hash = (valor_hash * 23) + chaveJ[i];

  valor_hash %= 2000;
  return valor_hash;
}

void apropriar_htJ(htJ_t *hashtable, char *chaveJ, Jogo *jogo)
{
  int index = hashJ(chaveJ);
  entradaJ_t *ant;
  entradaJ_t *entradaJ = hashtable->entradas[index];
  if (entradaJ == 0)
  {
    {
      hashtable->entradas[index] = par_htJ(chaveJ, jogo);
      return;
    }
  }
  else
  {
    
  }

  while (entradaJ != 0)
  {
    if (strcmp(entradaJ->chaveJ, chaveJ) == 0)
    {
      {
        entradaJ->jogo = jogo;
        return;
      }
    }
    else
    {
      
    }

    ant = entradaJ;
    entradaJ = ant->proxJ;
  }

  ant->proxJ = par_htJ(chaveJ, jogo);
}

Jogo *obter_htJ(htJ_t *hashtable, char *chaveJ)
{
  int index = hashJ(chaveJ);
  entradaJ_t *entradaJ = hashtable->entradas[index];
  if (entradaJ == 0)
  {
    return 0;
  }
  else
  {
    
  }

  while (entradaJ != 0)
  {
    if (strcmp(entradaJ->chaveJ, chaveJ) == 0)
    {
      return entradaJ->jogo;
    }
    else
    {
      
    }

    entradaJ = entradaJ->proxJ;
  }

  return 0;
}

void htJ_del(htJ_t *hashtable, char *chaveJ)
{
  int index = hashJ(chaveJ);
  int id = 0;
  entradaJ_t *ant;
  entradaJ_t *entradaJ = hashtable->entradas[index];
  if (entradaJ == 0)
  {
    {
      return;
    }
  }
  else
  {
    
  }

  while (entradaJ != 0)
  {
    if (strcmp(entradaJ->chaveJ, chaveJ) == 0)
    {
      {
        if ((entradaJ->proxJ == 0) && (id == 0))
        {
          {
            hashtable->entradas[index] = 0;
          }
        }
        else
        {
          
        }

        if ((entradaJ->proxJ != 0) && (id == 0))
        {
          {
            hashtable->entradas[index] = entradaJ->proxJ;
          }
        }
        else
        {
          
        }

        if ((entradaJ->proxJ == 0) && (id != 0))
        {
          {
            ant->proxJ = 0;
          }
        }
        else
        {
          
        }

        if ((entradaJ->proxJ != 0) && (id != 0))
        {
          {
            ant->proxJ = entradaJ->proxJ;
          }
        }
        else
        {
          
        }

        free(entradaJ->chaveJ);
        free(entradaJ);
        return;
      }
    }
    else
    {
      
    }

    ant = entradaJ;
    entradaJ = ant->proxJ;
    ++id;
  }

}

