/*File generated by PreProcessor.py*/


#include "interface.h"


void execute_command(team_node *tree_ptr, game_item *hash_ptr)
{
  char command = ' ';
  char gm_name[1023];
  char tm_name[1023];
  char t1_name[1023];
  char t2_name[1023];
  int s1;
  int s2;
  int m;
  int NL;
  team_node tm;
  team_node t1;
  team_node t2;
  game_node gm;
  game_node order_fst = 0;
  game_node order_crnt = 0;
  game_node order_prev = 0;
  game_item hashtbl;
  NL = 1;
  while (command != 'x')
  {
    command = getchar();
    switch (command)
    {
      case 'A':
        for (int tm_name_index = 0; tm_name_index < 10; tm_name_index++)
      {
        tm_name[tm_name_index] = new_sym_var(sizeof(char) * 8);
      }

        tm_name[10 - 1] = '\0';
        tm = search_team(tree_ptr, tm_name);
        if (tm == 0)
      {
        insert_team(tree_ptr, create_team(tm_name));
      }
      else
      {
        printf("%d Equipa existente.\n", NL);
      }

        NL++;
        break;

      case 'a':
        for (int gm_name_index = 0; gm_name_index < 10; gm_name_index++)
      {
        gm_name[gm_name_index] = new_sym_var(sizeof(char) * 8);
      }

        gm_name[10 - 1] = '\0';
        for (int t1_name_index = 0; t1_name_index < 10; t1_name_index++)
      {
        t1_name[t1_name_index] = new_sym_var(sizeof(char) * 8);
      }

        t1_name[10 - 1] = '\0';
        for (int t2_name_index = 0; t2_name_index < 10; t2_name_index++)
      {
        t2_name[t2_name_index] = new_sym_var(sizeof(char) * 8);
      }

        t2_name[10 - 1] = '\0';
        s1 = new_sym_var(sizeof(int) * 8);
        s2 = new_sym_var(sizeof(int) * 8);
        t1 = search_team(tree_ptr, t1_name);
        t2 = search_team(tree_ptr, t2_name);
        gm = search_game(hash_ptr, gm_name);
        if (((t1 != 0) && (t2 != 0)) && (gm == 0))
      {
        {
          if (order_fst == 0)
          {
            {
              insert_game(hash_ptr, create_game(gm_name, t1->team, t2->team, s1, s2), &order_fst, &order_crnt);
              order_prev = order_fst;
            }
          }
          else
          {
            {
              insert_game(hash_ptr, create_game(gm_name, t1->team, t2->team, s1, s2), &order_fst, &order_crnt);
              order_prev->in_next = order_crnt;
              order_crnt->in_previous = order_prev;
              order_prev = order_crnt;
            }
          }

          if (s1 > s2)
          {
            inc_score(t1->team);
          }
          else
          {
            if (s1 < s2)
            {
              inc_score(t2->team);
            }
            else
            {
              
            }

          }

        }
      }
      else
      {
        if (gm != 0)
        {
          printf("%d Jogo existente.\n", NL);
        }
        else
        {
          if ((t1 == 0) || (t2 == 0))
          {
            printf("%d Equipa inexistente.\n", NL);
          }
          else
          {
            
          }

        }

      }

        NL++;
        break;

      case 'l':
        insertion_order(order_fst, NL);
        NL++;
        break;

      case 'p':
        for (int gm_name_index = 0; gm_name_index < 10; gm_name_index++)
      {
        gm_name[gm_name_index] = new_sym_var(sizeof(char) * 8);
      }

        gm_name[10 - 1] = '\0';
        gm = search_game(hash_ptr, gm_name);
        if (gm != 0)
      {
        print_game(gm, NL);
      }
      else
      {
        printf("%d Jogo inexistente.\n", NL);
      }

        NL++;
        break;

      case 'P':
        for (int tm_name_index = 0; tm_name_index < 10; tm_name_index++)
      {
        tm_name[tm_name_index] = new_sym_var(sizeof(char) * 8);
      }

        tm_name[10 - 1] = '\0';
        tm = search_team(tree_ptr, tm_name);
        if (tm != 0)
      {
        printf("%d %s %d\n", NL, tm->team->name, tm->team->score);
      }
      else
      {
        
      }

        if (tm == 0)
      {
        printf("%d Equipa inexistente.\n", NL);
      }
      else
      {
        
      }

        NL++;
        break;

      case 'r':
        for (int gm_name_index = 0; gm_name_index < 10; gm_name_index++)
      {
        gm_name[gm_name_index] = new_sym_var(sizeof(char) * 8);
      }

        gm_name[10 - 1] = '\0';
        gm = search_game(hash_ptr, gm_name);
        if (gm != 0)
      {
        {
          hashtbl = hash_ptr[hash_function(gm_name)];
          s1 = gm->game->score_1;
          s2 = gm->game->score_2;
          if (s1 > s2)
          {
            dec_score(gm->game->team_1);
          }
          else
          {
            
          }

          if (s1 < s2)
          {
            dec_score(gm->game->team_2);
          }
          else
          {
            
          }

          delete_ordered(&order_fst, gm);
          delete_game(hashtbl, gm);
        }
      }
      else
      {
        printf("%d Jogo inexistente.\n", NL);
      }

        NL++;
        break;

      case 's':
        for (int gm_name_index = 0; gm_name_index < 10; gm_name_index++)
      {
        gm_name[gm_name_index] = new_sym_var(sizeof(char) * 8);
      }

        gm_name[10 - 1] = '\0';
        s1 = new_sym_var(sizeof(int) * 8);
        s2 = new_sym_var(sizeof(int) * 8);
        gm = search_game(hash_ptr, gm_name);
        if (gm != 0)
      {
        update_score(gm, s1, s2);
      }
      else
      {
        printf("%d Jogo inexistente.\n", NL);
      }

        NL++;
        break;

      case 'g':
        if ((*tree_ptr) != 0)
      {
        {
          m = victories(*tree_ptr);
          printf("%d Melhores %d\n", NL, m);
          in_order(tree_ptr, m, NL);
        }
      }
      else
      {
        
      }

        NL++;
        break;

      case 'x':
        free_teams(*tree_ptr);
        free_games(hash_ptr);
        exit(0);
        break;

      default:
        break;

    }

  }

}

