/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "Hash.h"


void freeList(link head)
{
  link aux1;
  link aux2;
  if (!head)
  {
    return;
  }
  else
  {
    
  }

  for (aux1 = head, aux2 = head->next; aux1; aux2 = aux1->next, aux1 = aux2)
  {
    free(aux1);
  }

}

link caseaAux(char name[1024], equipa team1, equipa team2, int num1, int num2)
{
  link temp = malloc(sizeof(struct node));
  temp->j = novoJogo(name, team1, team2, num1, num2);
  return temp;
}

int caseSAux(char auxString[1024], int auxNum1, int auxNum2, link *heads)
{
  jogo j;
  int out = 0;
  j = Jsearch(heads, auxString);
  if (j != 0)
  {
    if (j->score1 > j->score2)
    {
      j->equipa1->wins--;
    }
    else
    {
      if (j->score1 < j->score2)
      {
        j->equipa2->wins--;
      }
      else
      {
        
      }

    }

    j->score1 = auxNum1;
    j->score2 = auxNum2;
    out = 1;
    if (j->score1 > j->score2)
    {
      j->equipa1->wins++;
    }
    else
    {
      if (j->score1 < j->score2)
      {
        j->equipa2->wins++;
      }
      else
      {
        
      }

    }

  }
  else
  {
    
  }

  return out;
}

void processInput()
{
  int variavel = 0;
  int countOut = 0;
  int k;
  int cond;
  int auxNum1;
  int auxNum2;
  char name[1024];
  char team[1024];
  char auxString[1024];
  link headList = 0;
  link auxList = 0;
  link tailList = 0;
  equipa team1;
  equipa team2;
  link *head = Jinit(1001);
  Elink *top = Einit(1001);
  while (variavel < 10)
  {
    char token = '\0';
    char s[1];
    strcpy(name, "\0");
    strcpy(team, "\0");
    strcpy(auxString, "\0");
    k = 0;
    cond = 0;
    auxNum1 = 0;
    auxNum2 = 0;
    for (int s_index = 0; s_index < 1; s_index++)
    {
      s[s_index] = new_sym_var(sizeof(char) * 8);
    }

    s[1 - 1] = '\0';
    token = s[0];
    countOut++;
    switch (token)
    {
      case 'a':
        for (int name_index = 0; name_index < 10; name_index++)
      {
        name[name_index] = new_sym_var(sizeof(char) * 8);
      }

        name[10 - 1] = '\0';
        for (int team_index = 0; team_index < 10; team_index++)
      {
        team[team_index] = new_sym_var(sizeof(char) * 8);
      }

        team[10 - 1] = '\0';
        for (int auxString_index = 0; auxString_index < 10; auxString_index++)
      {
        auxString[auxString_index] = new_sym_var(sizeof(char) * 8);
      }

        auxString[10 - 1] = '\0';
        auxNum1 = new_sym_var(sizeof(int) * 8);
        auxNum2 = new_sym_var(sizeof(int) * 8);
        if (Jsearch(head, name))
      {
        printf("%d Jogo existente.\n", countOut);
        break;
      }
      else
      {
        
      }

        team1 = Esearch(top, team);
        if (!team1)
      {
        printf("%d Equipa inexistente.\n", countOut);
        break;
      }
      else
      {
        
      }

        team2 = Esearch(top, auxString);
        if (!team2)
      {
        printf("%d Equipa inexistente.\n", countOut);
        break;
      }
      else
      {
        
      }

        if (headList == 0)
      {
        headList = malloc(sizeof(struct node));
        headList->j = novoJogo(name, team1, team2, auxNum1, auxNum2);
        Jinsert(head, headList->j);
        tailList = headList;
      }
      else
      {
        tailList->next = caseaAux(name, team1, team2, auxNum1, auxNum2);
        Jinsert(head, tailList->next->j);
        tailList = tailList->next;
      }

        break;

      case 'l':
        if (headList == 0)
      {
        break;
      }
      else
      {
        
      }

        auxList = headList;
        while (auxList != 0)
      {
        if (auxList->j->nome != 0)
        {
          printf("%d ", countOut);
          printJogo(auxList->j);
        }
        else
        {
          
        }

        auxList = auxList->next;
      }

        break;

      case 'p':
        for (int auxString_index = 0; auxString_index < 10; auxString_index++)
      {
        auxString[auxString_index] = new_sym_var(sizeof(char) * 8);
      }

        auxString[10 - 1] = '\0';
        if (Jsearch(head, auxString))
      {
        printf("%d ", countOut);
        printJogo(Jsearch(head, auxString));
      }
      else
      {
        printf("%d Jogo inexistente.\n", countOut);
      }

        break;

      case 'r':
        for (int auxString_index = 0; auxString_index < 10; auxString_index++)
      {
        auxString[auxString_index] = new_sym_var(sizeof(char) * 8);
      }

        auxString[10 - 1] = '\0';
        if (Jsearch(head, auxString))
      {
        Jdelete(head, auxString);
      }
      else
      {
        printf("%d Jogo inexistente.\n", countOut);
      }

        break;

      case 's':
        for (int auxString_index = 0; auxString_index < 10; auxString_index++)
      {
        auxString[auxString_index] = new_sym_var(sizeof(char) * 8);
      }

        auxString[10 - 1] = '\0';
        auxNum1 = new_sym_var(sizeof(int) * 8);
        auxNum2 = new_sym_var(sizeof(int) * 8);
        cond = caseSAux(auxString, auxNum1, auxNum2, head);
        if (cond == 0)
      {
        printf("%d Jogo inexistente.\n", countOut);
      }
      else
      {
        
      }

        break;

      case 'A':
        for (int auxString_index = 0; auxString_index < 10; auxString_index++)
      {
        auxString[auxString_index] = new_sym_var(sizeof(char) * 8);
      }

        auxString[10 - 1] = '\0';
        if (Esearch(top, auxString))
      {
        printf("%d Equipa existente.\n", countOut);
      }
      else
      {
        Einsert(top, novaEquipa(auxString));
      }

        break;

      case 'P':
        for (int auxString_index = 0; auxString_index < 10; auxString_index++)
      {
        auxString[auxString_index] = new_sym_var(sizeof(char) * 8);
      }

        auxString[10 - 1] = '\0';
        if (Esearch(top, auxString))
      {
        k = getWins(top, auxString);
        printf("%d %s %d\n", countOut, auxString, k);
      }
      else
      {
        printf("%d Equipa inexistente.\n", countOut);
      }

        break;

      case 'g':
        getMostWins(top, countOut);
        break;

      case 'x':
        variavel = 100;
        break;

    }

    getchar();
  }

  JdestroyHash(head);
  EdestroyHash(top);
  freeList(headList);
}

int main()
{
  processInput();
  return 0;
}

