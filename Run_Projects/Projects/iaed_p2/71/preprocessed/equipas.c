/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "eq_ligadas.h"
#include "equipas.h"


elink *init_equipas()
{
  int i;
  elink *hash_equipas = malloc((sizeof(elink)) * 1657);
  for (i = 0; i < 1657; i++)
  {
    hash_equipas[i] = 0;
  }

  return hash_equipas;
}

elink novo_elink(Equipa equipa, elink cabeca)
{
  elink link = malloc(sizeof(struct node_equipas));
  link->equipa = equipa;
  link->proxima = cabeca;
  return link;
}

elink push_equipa(elink cabeca, Equipa equipa)
{
  elink nova_cabeca = novo_elink(equipa, cabeca);
  return nova_cabeca;
}

void adiciona_equipa(elink *hash_equipas, Equipa equipa)
{
  int chave = hash(equipa->nome);
  hash_equipas[chave] = push_equipa(hash_equipas[chave], equipa);
}

int existe_eq_aux(elink cabeca, char *nome)
{
  elink x;
  for (x = cabeca; x != 0; x = x->proxima)
  {
    if (strcmp(x->equipa->nome, nome) == 0)
    {
      return 1;
    }
    else
    {
      
    }

  }

  return 0;
}

int existe_equipa(elink *hash_equipa, char *nome)
{
  int chave = hash(nome);
  return existe_eq_aux(hash_equipa[chave], nome);
}

Equipa procura_eq_aux(elink cabeca, char *nome)
{
  elink x;
  for (x = cabeca; x != 0; x = x->proxima)
  {
    if (strcmp(x->equipa->nome, nome) == 0)
    {
      return x->equipa;
    }
    else
    {
      
    }

  }

  return 0;
}

Equipa procura_equipa(elink *hash_equipa, char *nome)
{
  int chave = hash(nome);
  return procura_eq_aux(hash_equipa[chave], nome);
}

elink limpa_lista_eq(elink cabeca)
{
  elink atual;
  elink aux;
  if (cabeca == 0)
  {
    free(cabeca);
    return cabeca;
  }
  else
  {
    if (cabeca->proxima == 0)
    {
      FREEelink(cabeca);
      return 0;
    }
    else
    {
      atual = cabeca->proxima;
      while (atual != 0)
      {
        aux = cabeca->proxima;
        cabeca->proxima = aux->proxima;
        FREEelink(aux);
        atual = cabeca->proxima;
      }

      FREEelink(cabeca);
      return 0;
    }

  }

}

void limpa_hash_eq(elink *hash_equipas)
{
  int i;
  for (i = 0; i < 1657; i++)
  {
    hash_equipas[i] = limpa_lista_eq(hash_equipas[i]);
  }

  free(hash_equipas);
}

int calcula_max_ganhos(elink *hash_equipas, int max_ganhos)
{
  elink link;
  int i;
  for (i = 0; i < 1657; i++)
  {
    for (link = hash_equipas[i]; link != 0; link = link->proxima)
    {
      if (link->equipa->total_ganhos > max_ganhos)
      {
        max_ganhos = link->equipa->total_ganhos;
      }
      else
      {
        
      }

    }

  }

  return max_ganhos;
}

void obter_equipas(elink cabeca, Lista_Equipas lista, int max_ganhos)
{
  elink atual;
  for (atual = cabeca; atual != 0; atual = atual->proxima)
  {
    if (atual->equipa->total_ganhos == max_ganhos)
    {
      acrescenta_eq(lista, atual->equipa);
    }
    else
    {
      
    }

  }

}

