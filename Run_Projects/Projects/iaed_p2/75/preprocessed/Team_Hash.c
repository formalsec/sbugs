/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <string.h>
#include "Team_Hash.h"
#include "Team.h"


int hash_team(char *str, int M)
{
  int i = 0;
  int a = 31415;
  int b = 27183;
  for (; (*str) != '\0'; str++, a = (a * b) % (M - 1))
  {
    i = ((a * i) + (*str)) % M;
  }

  return i;
}

link_team *initTeam_Hash(int size)
{
  int i;
  link_team *head = (link_team *) malloc((sizeof(link_team)) * size);
  for (i = 0; i < size; i++)
  {
    head[i] = 0;
  }

  return head;
}

void insertTeam_Hash(int size, link_team *h, Team *t)
{
  int i = hash_team(t->name, size);
  link_team ptr_node = (link_team) malloc(sizeof(struct node_team));
  ptr_node->pteam = t;
  ptr_node->next = h[i];
  h[i] = ptr_node;
}

void deleteTeam_Hash(int size, link_team *h, char *name_delete)
{
  int i = hash_team(name_delete, size);
  link_team p_aux;
  link_team p_previous_aux = 0;
  for (p_aux = h[i]; p_aux != 0; p_previous_aux = p_aux, p_aux = p_aux->next)
  {
    if (strcmp(p_aux->pteam->name, name_delete) == 0)
    {
      if (p_aux == h[i])
      {
        h[i] = p_aux->next;
      }
      else
      {
        p_previous_aux->next = p_aux->next;
      }

      deleteTeam(p_aux->pteam);
      free(p_aux);
      break;
    }
    else
    {
      
    }

  }

}

Team *searchTeam_Hash(int size, link_team *h, char *name)
{
  int i = hash_team(name, size);
  link_team aux_pointer = h[i];
  for (; aux_pointer != 0; aux_pointer = aux_pointer->next)
  {
    if (strcmp(aux_pointer->pteam->name, name) == 0)
    {
      return aux_pointer->pteam;
    }
    else
    {
      
    }

  }

  return 0;
}

void destroyTeam_Hash(int size, link_team *head)
{
  int i;
  link_team p_aux;
  link_team p_aux_2;
  for (i = 0; i < size; i++)
  {
    p_aux = head[i];
    while (p_aux != 0)
    {
      deleteTeam(p_aux->pteam);
      p_aux_2 = p_aux;
      p_aux = p_aux->next;
      free(p_aux_2);
    }

  }

  free(head);
}

