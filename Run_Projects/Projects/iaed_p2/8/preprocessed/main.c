/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "myLib.h"
#include "team.h"
#include "game.h"
#include "teams.h"
#include "competition.h"


int NL = 0;
Teams *teams;
Competition *c;
void read_line(char *buf)
{
  int i;
  fgets(buf, 100, stdin);
  for (i = 0; (i < 100) && (buf[i] != 0); i++)
  {
    if (buf[i] == ':')
    {
      buf[i] = ' ';
    }
    else
    {
      
    }

  }

  NL++;
}

void command_a()
{
  char buf[100];
  char nameG[1023];
  char nameT1[1023];
  char nameT2[1023];
  int score1;
  int score2;
  Game *game;
  Score score;
  Team *t1;
  Team *t2;
  read_line(buf);
  for (int nameG_index = 0; nameG_index < 10; nameG_index++)
  {
    nameG[nameG_index] = new_sym_var(sizeof(char) * 8);
  }

  nameG[10 - 1] = '\0';
  for (int nameT1_index = 0; nameT1_index < 10; nameT1_index++)
  {
    nameT1[nameT1_index] = new_sym_var(sizeof(char) * 8);
  }

  nameT1[10 - 1] = '\0';
  for (int nameT2_index = 0; nameT2_index < 10; nameT2_index++)
  {
    nameT2[nameT2_index] = new_sym_var(sizeof(char) * 8);
  }

  nameT2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (comp_find_game(c, nameG) != 0)
  {
    printf("%d Jogo existente.\n", NL);
    return;
  }
  else
  {
    
  }

  t1 = teams_get_team(teams, nameT1);
  t2 = teams_get_team(teams, nameT2);
  if ((t1 == 0) || (t2 == 0))
  {
    printf("%d Equipa inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  score.t1 = score1;
  score.t2 = score2;
  game = new_game(nameG, t1, t2, score);
  comp_add_game(c, game);
}

void command_A()
{
  char buf[100];
  char name[1023];
  Team *t;
  read_line(buf);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (teams_get_team(teams, name) != 0)
  {
    printf("%d Equipa existente.\n", NL);
    return;
  }
  else
  {
    
  }

  t = team_new(name);
  teams_add(teams, t);
}

void command_l()
{
  char buf[100];
  read_line(buf);
  comp_print_games(c, NL);
}

void command_p()
{
  char buf[100];
  char name[1023];
  Game *g;
  read_line(buf);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  g = comp_find_game(c, name);
  if (g == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  printf("%d %s %s %s %d %d\n", NL, game_get_name(g), g->t1->name, g->t2->name, game_get_score1(g), game_get_score2(g));
}

void command_P()
{
  char buf[100];
  char name[1023];
  Team *t;
  read_line(buf);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  t = teams_get_team(teams, name);
  if (t == 0)
  {
    printf("%d Equipa inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  printf("%d %s %d\n", NL, name, comp_get_victories(c, name));
}

void command_r()
{
  char buf[100];
  char name[1023];
  Game *g;
  read_line(buf);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  g = comp_find_game(c, name);
  if (g == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  comp_remove_game(c, name);
}

void command_s()
{
  char buf[100];
  char name[1023];
  int score1;
  int score2;
  Game *g;
  read_line(buf);
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  g = comp_find_game(c, name);
  if (g == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  comp_set_score(c, name, score1, score2);
}

void command_g()
{
  char buf[100];
  read_line(buf);
  return;
}

int main()
{
  char command;
  teams = teams_new();
  c = comp_new("Liga NOS");
  do
  {
    command = getchar();
    switch (command)
    {
      case 'a':
        command_a();
        break;

      case 'A':
        command_A();
        break;

      case 'l':
        command_l();
        break;

      case 'p':
        command_p();
        break;

      case 'P':
        command_P();
        break;

      case 'r':
        command_r();
        break;

      case 's':
        command_s();
        break;

      case 'g':
        command_g();
        break;

      case 'x':
        break;

    }

  }
  while (command != 'x');
  return 0;
}

