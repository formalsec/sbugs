/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct student
{
  int d_time;
  int f_time;
  int student_index;
  int grade;
  struct student *friend;
} student;
int i;
student **class;
int *visited;
int n;
int m;
void readUserInput();
void putFriend(int, int);
void doDfs();
void doDfsVisit(int);
void spreadMaxGrade();
void clean();
void readUserInput()
{
  int grade_input;
  int u;
  int v;
  n = new_sym_var(sizeof(int) * 8);
  m = new_sym_var(sizeof(int) * 8);
  class = (student **) malloc(n * (sizeof(student *)));
  for (i = 0; i < n; i++)
  {
    class[i] = (student *) malloc(sizeof(student));
    grade_input = new_sym_var(sizeof(int) * 8);
    class[i]->d_time = (class[i]->f_time = -1);
    class[i]->student_index = i;
    class[i]->grade = grade_input;
    class[i]->friend = 0;
  }

  for (i = 0; i < m; i++)
  {
    u = new_sym_var(sizeof(int) * 8);
    v = new_sym_var(sizeof(int) * 8);
    putFriend(u - 1, v - 1);
  }

}

void putFriend(int u, int v)
{
  student *c;
  student *u_buddy;
  u_buddy = (student *) malloc(sizeof(student));
  u_buddy->student_index = v;
  u_buddy->grade = class[v]->grade;
  u_buddy->friend = 0;
  if (class[u]->friend == 0)
  {
    class[u]->friend = u_buddy;
  }
  else
  {
    c = class[u]->friend;
    while (c->friend != 0)
      c = c->friend;

    c->friend = u_buddy;
  }

}

void doDfs()
{
  visited = (int *) calloc(n, sizeof(int));
  for (i = 0; i < n; i++)
    if (!visited[i])
  {
    doDfsVisit(i);
  }
  else
  {
    
  }


}

void doDfsVisit(int src)
{
  static int k = 1;
  int node;
  student *s;
  s = class[src];
  visited[src] = 1;
  class[src]->d_time = k++;
  while (s != 0)
  {
    node = s->student_index;
    if (!visited[node])
    {
      doDfsVisit(node);
    }
    else
    {
      
    }

    s = s->friend;
  }

  class[src]->f_time = k++;
}

void spreadMaxGrade()
{
  int j;
  for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
    if (((class[i]->d_time < class[j]->d_time) && (class[i]->f_time > class[j]->f_time)) && (class[i]->grade < class[j]->grade))
  {
    class[i]->grade = class[j]->grade;
  }
  else
  {
    
  }



  for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
    if (((class[j]->grade > class[i]->grade) && (class[i]->friend != 0)) && (class[i]->friend->student_index == class[j]->student_index))
  {
    class[i]->grade = class[j]->grade;
  }
  else
  {
    
  }



}

void clean()
{
  student *temp;
  for (i = 0; i < n; i++)
    while (class[i])
  {
    temp = class[i];
    class[i] = class[i]->friend;
    free(temp);
  }


  free(class);
  free(visited);
}

int main()
{
  readUserInput();
  doDfs();
  spreadMaxGrade();
  for (i = 0; i < n; i++)
    printf("%d\n", class[i]->grade);

  clean();
  return 0;
}

