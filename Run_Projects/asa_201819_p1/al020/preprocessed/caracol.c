/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>


typedef struct node
{
  int num;
  struct node *next;
} *node_t;
typedef struct router
{
  int discovery;
  int low;
  int parent;
  bool articPoint;
  node_t head;
} *router_t;
bool secondDFS = 0;
int time = 1;
int numSubnetworks = 0;
int subnetworkId = 0;
int articPointsCnt = 0;
int maxSubnetworkSize = 0;
int tmpSubnetworkSize = 0;
void *mallocAndVerify(size_t size)
{
  void *x = malloc(size);
  if (x == 0)
  {
    printf("Error in malloc, exiting...\n");
    exit(1);
  }
  else
  {
    
  }

  return x;
}

void scanfAndVerify(int *number)
{
  int x = 1;
  for (int number_index = 0; number_index < 10; number_index++)
  {
    number[number_index] = new_sym_var(sizeof(int) * 8);
  }

  if (x < 0)
  {
    printf("Error in scanf, exiting...\n");
    exit(1);
  }
  else
  {
    
  }

}

node_t newNode(int number)
{
  node_t x = mallocAndVerify(sizeof(struct node));
  if (!(x == 0))
  {
    x->num = number;
    x->next = 0;
  }
  else
  {
    
  }

  return x;
}

router_t newRouter()
{
  router_t router = mallocAndVerify(sizeof(struct router));
  if (!(router == 0))
  {
    router->head = 0;
    router->discovery = 0;
    router->parent = -1;
    router->articPoint = 0;
  }
  else
  {
    
  }

  return router;
}

void addtoList(node_t *head, int number)
{
  node_t x = newNode(number);
  x->next = *head;
  *head = x;
}

void clearList(node_t head)
{
  node_t tmp = head;
  node_t prev = 0;
  while (tmp != 0)
  {
    prev = tmp;
    tmp = tmp->next;
    free(prev);
  }

}

void DFS(int i, router_t router[])
{
  int numOfChildren = 0;
  node_t x;
  if (router[i]->articPoint && secondDFS)
  {
    return;
  }
  else
  {
    if ((i + 1) > subnetworkId)
    {
      subnetworkId = i + 1;
    }
    else
    {
      
    }

  }

  router[i]->discovery = (router[i]->low = time++);
  for (x = router[i]->head; x != 0; x = x->next)
  {
    if ((!router[x->num - 1]->discovery) && (!(router[x->num - 1]->articPoint && secondDFS)))
    {
      numOfChildren++;
      tmpSubnetworkSize++;
      router[x->num - 1]->parent = i;
      DFS(x->num - 1, router);
      if (router[i]->low > router[x->num - 1]->low)
      {
        router[i]->low = router[x->num - 1]->low;
      }
      else
      {
        
      }

      if (((((router[i]->parent == (-1)) && (numOfChildren > 1)) || ((router[i]->parent != (-1)) && (router[x->num - 1]->low >= router[i]->discovery))) && (!router[i]->articPoint)) && (!secondDFS))
      {
        articPointsCnt++;
        router[i]->articPoint = 1;
      }
      else
      {
        
      }

    }
    else
    {
      if (((x->num - 1) != router[i]->parent) && (router[i]->low > router[x->num - 1]->discovery))
      {
        router[i]->low = router[x->num - 1]->discovery;
      }
      else
      {
        
      }

    }

  }

}

router_t *readInput(router_t *router, int **subnetworks, int *numRouters)
{
  int numConnections = 0;
  int i = 0;
  int num1 = 0;
  int num2 = 0;
  scanfAndVerify(numRouters);
  scanfAndVerify(&numConnections);
  router = mallocAndVerify((sizeof(router_t)) * (*numRouters));
  *subnetworks = mallocAndVerify((sizeof(int)) * (*numRouters));
  for (i = 0; i < (*numRouters); i++)
  {
    router[i] = 0;
    (*subnetworks)[i] = 0;
  }

  for (i = 0; i < numConnections; i++)
  {
    scanfAndVerify(&num1);
    scanfAndVerify(&num2);
    if (router[num1 - 1] == 0)
    {
      router[num1 - 1] = newRouter();
    }
    else
    {
      
    }

    if (router[num2 - 1] == 0)
    {
      router[num2 - 1] = newRouter();
    }
    else
    {
      
    }

    addtoList(&router[num1 - 1]->head, num2);
    addtoList(&router[num2 - 1]->head, num1);
  }

  return router;
}

int main()
{
  int numRouters;
  int i;
  int *subnetworks = 0;
  router_t *router = 0;
  router = readInput(router, &subnetworks, &numRouters);
  for (i = 0; i < numRouters; i++)
  {
    if (!router[i]->discovery)
    {
      subnetworkId = 0;
      numSubnetworks++;
      DFS(i, router);
      subnetworks[subnetworkId - 1] = subnetworkId;
    }
    else
    {
      
    }

  }

  for (i = 0; i < numRouters; i++)
  {
    router[i]->discovery = 0;
    router[i]->parent = -1;
  }

  secondDFS = 1;
  tmpSubnetworkSize = 1;
  for (i = 0; i < numRouters; i++)
  {
    if (!router[i]->discovery)
    {
      DFS(i, router);
      if (tmpSubnetworkSize > maxSubnetworkSize)
      {
        maxSubnetworkSize = tmpSubnetworkSize;
      }
      else
      {
        
      }

      tmpSubnetworkSize = 1;
    }
    else
    {
      
    }

  }

  printf("%d\n", numSubnetworks);
  for (i = 0; i < (numRouters - 1); i++)
  {
    if (subnetworks[i] != 0)
    {
      printf("%d ", subnetworks[i]);
    }
    else
    {
      
    }

    clearList(router[i]->head);
    free(router[i]);
  }

  clearList(router[i]->head);
  free(router[i]);
  if (subnetworks[i] != 0)
  {
    printf("%d", subnetworks[i]);
  }
  else
  {
    
  }

  printf("\n%d\n%d\n", articPointsCnt, maxSubnetworkSize);
  free(router);
  free(subnetworks);
  return 0;
}

