/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <time.h>


typedef struct list
{
  int id;
  struct list *next;
} *list;
void dfs(int u, int N, int *maior, int orig, int *time, list *lig, int *pi, int *d, int *lowlink, int *quebra, int *outnum);
void dfs2(int u, int N, list *lig, int *visited, int *Nnodos, int *quebra);
int cmp(const void *a, const void *b)
{
  return (*((int *) a)) - (*((int *) b));
}

void addlist(list l, int id)
{
  if (l->id == (-1))
  {
    l->id = id;
    return;
  }
  else
  {
    
  }

  list new_list = malloc(sizeof(struct list *));
  new_list->id = id;
  new_list->next = l->next;
  l->next = new_list;
  return;
}

int main()
{
  int N;
  int M;
  int R = 0;
  int C = 0;
  int m = 0;
  int i;
  int aux1;
  int aux2;
  int time = 0;
  int maior;
  int outnum;
  N = new_sym_var(sizeof(int) * 8);
  M = new_sym_var(sizeof(int) * 8);
  int *subredes = malloc(N * (sizeof(int)));
  int *pi = malloc(N * (sizeof(int)));
  int *d = malloc(N * (sizeof(int)));
  int *lowlink = malloc(N * (sizeof(int)));
  int *quebra = malloc(N * (sizeof(int)));
  int *visited = malloc(N * (sizeof(int)));
  list *lig = malloc(N * (sizeof(list)));
  for (i = 0; i < N; i++)
    lig[i] = malloc(sizeof(struct list));

  for (i = 0; i < N; i++)
  {
    pi[i] = -1;
    visited[i] = 0;
    d[i] = -1;
    quebra[i] = 0;
    lig[i]->id = -1;
    lig[i]->next = 0;
  }

  char *buffer = malloc((2 * N) + 1);
  fgets(buffer, (2 * N) + 1, stdin);
  char *token;
  while (fgets(buffer, (2 * N) + 1, stdin) != 0)
  {
    token = strtok(buffer, " ");
    aux1 = atoi(token);
    token = strtok(0, " ");
    aux2 = atoi(token);
    addlist(lig[aux1 - 1], aux2 - 1);
    addlist(lig[aux2 - 1], aux1 - 1);
  }

  for (i = 0; i < N; i++)
  {
    maior = 0;
    if (d[i] == (-1))
    {
      outnum = 0;
      dfs(i, N, &maior, i, &time, lig, pi, d, lowlink, quebra, &outnum);
      subredes[R] = maior + 1;
      R++;
      if (outnum > 1)
      {
        quebra[i] = 1;
      }
      else
      {
        quebra[i] = 0;
      }

    }
    else
    {
      
    }

    if (quebra[i])
    {
      C++;
    }
    else
    {
      
    }

  }

  int Nnodos;
  for (i = 0; i < N; i++)
  {
    if (quebra[i])
    {
      continue;
    }
    else
    {
      
    }

    Nnodos = 0;
    if (visited[i] == 0)
    {
      dfs2(i, N, lig, visited, &Nnodos, quebra);
      if (Nnodos > m)
      {
        m = Nnodos;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

  }

  printf("%d\n", R);
  qsort(subredes, R, sizeof(int), cmp);
  for (i = 0; i < R; i++)
  {
    if (i != 0)
    {
      printf(" ");
    }
    else
    {
      
    }

    printf("%d", subredes[i]);
  }

  printf("\n%d\n", C);
  printf("%d\n", m);
  return 0;
}

void dfs(int u, int N, int *maior, int orig, int *time, list *lig, int *pi, int *d, int *lowlink, int *quebra, int *outnum)
{
  int j;
  d[u] = *time;
  lowlink[u] = *time;
  *time += 1;
  if (orig == pi[u])
  {
    *outnum += 1;
  }
  else
  {
    
  }

  list l = lig[u];
  while (l != 0)
  {
    if (l->id == (-1))
    {
      break;
    }
    else
    {
      
    }

    j = l->id;
    if (pi[u] == j)
    {
      l = l->next;
      continue;
    }
    else
    {
      
    }

    if (d[j] == (-1))
    {
      pi[j] = u;
      dfs(j, N, maior, orig, time, lig, pi, d, lowlink, quebra, outnum);
      if (d[u] <= lowlink[j])
      {
        quebra[u] = 1;
      }
      else
      {
        
      }

      if (lowlink[u] >= lowlink[j])
      {
        lowlink[u] = lowlink[j];
      }
      else
      {
        
      }

    }
    else
    {
      
    }

    if (lowlink[u] >= d[j])
    {
      lowlink[u] = d[j];
    }
    else
    {
      
    }

    l = l->next;
  }

  if (u > (*maior))
  {
    *maior = u;
  }
  else
  {
    
  }

}

void dfs2(int u, int N, list *lig, int *visited, int *Nnodos, int *quebra)
{
  int j;
  *Nnodos += 1;
  visited[u] = 1;
  list l = lig[u];
  while (l != 0)
  {
    j = l->id;
    if (quebra[j])
    {
      l = l->next;
      continue;
    }
    else
    {
      
    }

    if (visited[j] == 0)
    {
      dfs2(j, N, lig, visited, Nnodos, quebra);
    }
    else
    {
      
    }

    l = l->next;
  }

}

