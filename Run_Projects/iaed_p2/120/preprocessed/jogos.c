/*File generated by PreProcessor.py*/


#include "jogos.h"


void init_hash_games(NodeGame **heads, int mod)
{
  int i;
  for (i = 0; i < mod; i++)
  {
    heads[i] = 0;
  }

}

Game *create_game(char *name, char *nameT1, char *nameT2, int goals1, int goals2)
{
  Game *newGame;
  char *nameGame;
  char *nameTeam1;
  char *nameTeam2;
  nameGame = str_dup(name);
  nameTeam1 = str_dup(nameT1);
  nameTeam2 = str_dup(nameT2);
  newGame = (Game *) malloc(sizeof(Game));
  newGame->name = nameGame;
  newGame->team1 = nameTeam1;
  newGame->team2 = nameTeam2;
  newGame->score1 = goals1;
  newGame->score2 = goals2;
  return newGame;
}

void hash_insert_game(NodeGame **heads, Game *game, int mod)
{
  int key = hash(game->name, mod);
  heads[key] = hash_put_begin_games(heads[key], game);
}

NodeGame *hash_put_begin_games(NodeGame *head, Game *game)
{
  NodeGame *newHead = (NodeGame *) malloc(sizeof(NodeGame));
  newHead->game = game;
  newHead->next = head;
  head = newHead;
  return head;
}

Game *hash_search_game(NodeGame **heads, char *nameGame, int mod)
{
  int key = hash(nameGame, mod);
  return search_game(heads[key], nameGame);
}

Game *search_game(NodeGame *head, char *nameGame)
{
  NodeGame *current = head;
  char *currentName;
  while (current != 0)
  {
    currentName = current->game->name;
    if (strcmp(currentName, nameGame) == 0)
    {
      {
        return current->game;
      }
    }
    else
    {
      
    }

    current = current->next;
  }

  return 0;
}

void hash_change_score(NodeGame **heads, char *nameGame, int goals1, int goals2, int mod)
{
  int key;
  NodeGame *current;
  key = hash(nameGame, mod);
  current = heads[key];
  while (strcmp(current->game->name, nameGame) != 0)
  {
    current = current->next;
  }

  current->game->score1 = goals1;
  current->game->score2 = goals2;
}

void hash_remove_game(NodeGame **heads, char *nameGame, int mod)
{
  int key = hash(nameGame, mod);
  heads[key] = remove_el_hash(heads[key], nameGame);
}

NodeGame *remove_el_hash(NodeGame *head, char *gameName)
{
  NodeGame *t;
  NodeGame *prev;
  for (t = head, prev = 0; t != 0; prev = t, t = t->next)
  {
    if (strcmp(t->game->name, gameName) == 0)
    {
      {
        if (t == head)
        {
          {
            head = t->next;
          }
        }
        else
        {
          {
            prev->next = t->next;
          }
        }

        free_game(t->game);
        free(t);
        break;
      }
    }
    else
    {
      
    }

  }

  return head;
}

NodeGame *remove_el_list(NodeGame *head, char *gameName)
{
  NodeGame *t;
  NodeGame *prev;
  for (t = head, prev = 0; t != 0; prev = t, t = t->next)
  {
    if (strcmp(t->game->name, gameName) == 0)
    {
      {
        if (t == head)
        {
          {
            head = t->next;
          }
        }
        else
        {
          {
            prev->next = t->next;
          }
        }

        free(t);
        break;
      }
    }
    else
    {
      
    }

  }

  return head;
}

void free_game(Game *game)
{
  free(game->name);
  free(game->team1);
  free(game->team2);
  free(game);
}

void destroy_hash_games(NodeGame **heads, int mod)
{
  int i;
  for (i = 0; i < mod; i++)
  {
    destroy_list_games(heads[i]);
  }

}

void destroy_list_games(NodeGame *head)
{
  NodeGame *aux;
  while ((aux = head) != 0)
  {
    head = head->next;
    free_game(aux->game);
    free(aux);
  }

  head = 0;
}

void destroy_refs_list(NodeGame *head)
{
  NodeGame *aux;
  while ((aux = head) != 0)
  {
    head = head->next;
    free(aux);
  }

  head = 0;
}

