/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "equipa.h"
#include "HT_equipas.h"


HT_eq HTeq_inicializa(int max)
{
  HT_eq equipas;
  int i;
  equipas = (HT_eq) malloc(max * (sizeof(link_eq)));
  for (i = 0; i < max; i++)
    equipas[i] = 0;

  return equipas;
}

int hash(char *c, int max)
{
  int h = 0;
  int a = 127;
  for (; (*c) != '\0'; c++)
    h = ((a * h) + (*c)) % max;

  return h;
}

void HTeq_adiciona(HT_eq equipas, char *nome, int max)
{
  int i = hash(nome, max);
  Equipa eq = nova_equipa(nome);
  link_eq novo = (link_eq) malloc(sizeof(struct node_eq));
  novo->equipa = eq;
  novo->prox = equipas[i];
  equipas[i] = novo;
}

Equipa HTeq_procura(HT_eq equipas, char *nome, int max)
{
  link_eq link;
  int i = hash(nome, max);
  for (link = equipas[i]; link != 0; link = link->prox)
    if (strcmp(nome_equipa(link->equipa), nome) == 0)
  {
    return link->equipa;
  }
  else
  {
    
  }


  return 0;
}

void maximo_vitorias(HT_eq equipas, int *max_num, int max_eq)
{
  int i;
  int max;
  int num;
  int v;
  link_eq link;
  max = 0;
  num = 0;
  for (i = 0; i < max_eq; i++)
  {
    for (link = equipas[i]; link != 0; link = link->prox)
    {
      v = vitorias_equipa(link->equipa);
      if (v > max)
      {
        {
          max = v;
          num = 1;
        }
      }
      else
      {
        if (v == max)
        {
          num += 1;
        }
        else
        {
          
        }

      }

    }

  }

  max_num[0] = max;
  max_num[1] = num;
}

void melhores_equipas(HT_eq equipas, Equipa *melhores, int max_v, int max_eq)
{
  int i;
  int j;
  link_eq link;
  j = 0;
  for (i = 0; i < max_eq; i++)
  {
    for (link = equipas[i]; link != 0; link = link->prox)
    {
      if (vitorias_equipa(link->equipa) == max_v)
      {
        {
          melhores[j] = link->equipa;
          j++;
        }
      }
      else
      {
        
      }

    }

  }

}

void HTeq_termina(HT_eq equipas, int max)
{
  int i;
  link_eq link;
  link_eq prox;
  for (i = 0; i < max; i++)
  {
    for (link = equipas[i]; link != 0; link = prox)
    {
      prox = link->prox;
      apaga_equipa(link->equipa);
      free(link);
    }

  }

  free(equipas);
}

