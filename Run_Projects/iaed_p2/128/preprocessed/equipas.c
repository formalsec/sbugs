/*File generated by PreProcessor.py*/


#include "equipas.h"


int hash(char *n, int m)
{
  int i = 0;
  int a = 127;
  for (; (*n) != '\0'; n++)
  {
    i = ((a * i) + (*n)) % m;
  }

  return i;
}

link novo_el(char *buffer)
{
  link x = (link) malloc(sizeof(struct node));
  x->equipa = malloc(sizeof(struct equipa));
  x->equipa->nome = (char *) malloc((sizeof(char)) * (strlen(buffer) + 1));
  strcpy(x->equipa->nome, buffer);
  x->equipa->jogos_ganhos = 0;
  x->next = 0;
  return x;
}

link insere_el(link head, char *text)
{
  link x = novo_el(text);
  x->next = head;
  return x;
}

link *inicializa(int m)
{
  int i;
  int M = m;
  link *heads;
  heads = (link *) malloc(M * (sizeof(link)));
  for (i = 0; i < M; i++)
    heads[i] = 0;

  return heads;
}

void insere_na_lista(link *heads, char *nome)
{
  int i = hash(nome, 977);
  heads[i] = insere_el(heads[i], nome);
}

Equipa *encontra_equipa(link head, char *nome)
{
  link aux;
  for (aux = head; aux != 0; aux = aux->next)
  {
    if (strcmp(aux->equipa->nome, nome) == 0)
    {
      return aux->equipa;
    }
    else
    {
      
    }

  }

  return 0;
}

Equipa *procura_equipa(link *heads, char *nome)
{
  int i = hash(nome, 977);
  return encontra_equipa(heads[i], nome);
}

int existe_el(link *heads, char *nome)
{
  link aux;
  int i = hash(nome, 977);
  for (aux = heads[i]; aux != 0; aux = aux->next)
    if (strcmp(aux->equipa->nome, nome) == 0)
  {
    return 1;
  }
  else
  {
    
  }


  return 0;
}

void destroi_hash_equipa(link *heads, int M)
{
  int i;
  link head;
  for (i = 0; i < M; i++)
  {
    head = heads[i];
    while (head != 0)
    {
      heads[i] = heads[i]->next;
      free(head->equipa->nome);
      free(head->equipa);
      free(head);
      head = heads[i];
    }

    free(heads[i]);
  }

  free(head);
  free(heads);
}

