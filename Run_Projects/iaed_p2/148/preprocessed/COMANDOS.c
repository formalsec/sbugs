/*File generated by PreProcessor.py*/


#include <stdio.h>
#include "JOGOS.h"
#include "EQUIPAS.h"
#include "COMANDOS.h"


void novo_jogo(int nl, linkJ headsJ[], linkE headsE[], lista *lst)
{
  char nome[1024];
  char equipa1[1024];
  char equipa2[1024];
  int score1;
  int score2;
  ItemE eqp1;
  ItemE eqp2;
  ItemJ njogo;
  ItemJ n;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
  {
    equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa1[10 - 1] = '\0';
  for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
  {
    equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  eqp1 = procura_equipa(equipa1, headsE);
  eqp2 = procura_equipa(equipa2, headsE);
  n = procura_nome(nome, headsJ);
  if (n != 0)
  {
    {
      printf("%d Jogo existente.\n", nl);
    }
  }
  else
  {
    if ((eqp1 == 0) || (eqp2 == 0))
    {
      {
        printf("%d Equipa inexistente.\n", nl);
      }
    }
    else
    {
      {
        njogo = novoJogo(nome, equipa1, equipa2, score1, score2);
        inserirJ(njogo, headsJ);
        inserir_fim(lst, njogo);
        if (score2 > score1)
        {
          {
            eqp2->vitorias++;
          }
        }
        else
        {
          if (score1 > score2)
          {
            {
              eqp1->vitorias++;
            }
          }
          else
          {
            
          }

        }

      }
    }

  }

}

void lista_jogos(int nl, lista *lst)
{
  imprime_jogos(nl, lst);
}

void procura_jogo(int nl, linkJ headsJ[])
{
  char nome[1024];
  ItemJ jogo;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  jogo = procura_nome(nome, headsJ);
  if (jogo != 0)
  {
    {
      imprimeJogo(nl, jogo);
    }
  }
  else
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }

}

void apagar_jogo(int nl, linkJ headsJ[], lista *lst, linkE headsE[])
{
  char nome[1024];
  ItemJ jogo;
  ItemE eqp1;
  ItemE eqp2;
  int scr1;
  int scr2;
  int i;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  jogo = procura_nome(nome, headsJ);
  i = chave(nome);
  if (jogo != 0)
  {
    {
      eqp1 = procura_equipa(jogo->equipa1, headsE);
      eqp2 = procura_equipa(jogo->equipa2, headsE);
      scr1 = jogo->score1;
      scr2 = jogo->score2;
      if (scr1 > scr2)
      {
        {
          eqp1->vitorias--;
        }
      }
      else
      {
        if (scr2 > scr1)
        {
          {
            eqp2->vitorias--;
          }
        }
        else
        {
          
        }

      }

      apaga_jogo(headsJ, lst, nome, i);
    }
  }
  else
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }

}

void altera_score(int nl, linkJ headsJ[], linkE headsE[])
{
  char nome[1024];
  int score1;
  int score2;
  int scr1;
  int scr2;
  ItemJ jogo;
  ItemE eqp1;
  ItemE eqp2;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  jogo = procura_nome(nome, headsJ);
  if (jogo != 0)
  {
    {
      eqp1 = procura_equipa(jogo->equipa1, headsE);
      eqp2 = procura_equipa(jogo->equipa2, headsE);
      scr1 = jogo->score1;
      scr2 = jogo->score2;
      if (scr1 > scr2)
      {
        {
          if (score1 < score2)
          {
            {
              eqp2->vitorias++;
              eqp1->vitorias--;
            }
          }
          else
          {
            if (score1 == score2)
            {
              {
                eqp1->vitorias--;
              }
            }
            else
            {
              
            }

          }

        }
      }
      else
      {
        if (scr1 < scr2)
        {
          {
            if (score1 > score2)
            {
              {
                eqp1->vitorias++;
                eqp2->vitorias--;
              }
            }
            else
            {
              if (score1 == score2)
              {
                {
                  eqp2->vitorias--;
                }
              }
              else
              {
                
              }

            }

          }
        }
        else
        {
          {
            if (score1 < score2)
            {
              {
                eqp2->vitorias++;
              }
            }
            else
            {
              if (score1 > score2)
              {
                {
                  eqp1->vitorias++;
                }
              }
              else
              {
                
              }

            }

          }
        }

      }

      jogo->score1 = score1;
      jogo->score2 = score2;
    }
  }
  else
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }

}

void nova_equipa(int nl, int *contadorequipas, linkE headsE[])
{
  char equipa[1024];
  ItemE nequipa;
  ItemE aux;
  for (int equipa_index = 0; equipa_index < 10; equipa_index++)
  {
    equipa[equipa_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa[10 - 1] = '\0';
  aux = procura_equipa(equipa, headsE);
  if (aux == 0)
  {
    {
      nequipa = novaEquipa(equipa, 0);
      inserirE(nequipa, headsE);
      (*contadorequipas)++;
    }
  }
  else
  {
    {
      printf("%d Equipa existente.\n", nl);
    }
  }

}

void procurar_equipa(int nl, linkE headsE[])
{
  char equipa[1024];
  ItemE eqp;
  for (int equipa_index = 0; equipa_index < 10; equipa_index++)
  {
    equipa[equipa_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa[10 - 1] = '\0';
  eqp = procura_equipa(equipa, headsE);
  if (eqp == 0)
  {
    {
      printf("%d Equipa inexistente.\n", nl);
    }
  }
  else
  {
    {
      printf("%d ", nl);
      imprimeEquipa(eqp);
    }
  }

}

void lista_equipas(int nl, int *contadorequipas, linkE headsE[])
{
  int vitorias;
  vitorias = numero_vitorias(headsE);
  nome_equipas(vitorias, nl, *contadorequipas, headsE);
}

void sair(linkE headsE[], linkJ headsJ[], lista *l)
{
  sair_hashE(headsE);
  sair_jogos(l, headsJ);
}

