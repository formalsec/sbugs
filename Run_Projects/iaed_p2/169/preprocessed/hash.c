/*File generated by PreProcessor.py*/


#include "hash.h"


int hash(char *v, int M)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; strcmp(v, "\0") != 0; v++, a = (a * b) % (M - 1))
  {
    h = ((a * h) + (*v)) % M;
  }

  return h;
}

link2 *STinitE(int m)
{
  int i;
  link2 *hashtable = (link2 *) malloc(m * (sizeof(link2)));
  for (i = 0; i < m; i++)
  {
    hashtable[i] = 0;
  }

  return hashtable;
}

link1 *STinitJ(int m)
{
  int i;
  link1 *hashtable = (link1 *) malloc(m * (sizeof(link1)));
  for (i = 0; i < m; i++)
  {
    hashtable[i] = 0;
  }

  return hashtable;
}

link2 NEWE(char *buffer)
{
  link2 x = (link2) malloc(sizeof(struct node2));
  x->equipa = (char *) malloc((sizeof(char)) * (strlen(buffer) + 1));
  strcpy(x->equipa, buffer);
  x->vitorias = 0;
  x->next = 0;
  return x;
}

link2 insertBeginE(link2 head, char *nome)
{
  link2 x = NEWE(nome);
  x->next = head;
  return x;
}

link2 STinsertE(char *nome, link2 *hashtable, int m)
{
  int i = hash(nome, m);
  hashtable[i] = insertBeginE(hashtable[i], nome);
  return hashtable[i];
}

link2 lookupE(link2 head, char *nome)
{
  link2 t;
  for (t = head; t != 0; t = t->next)
  {
    if (strcmp(t->equipa, nome) == 0)
    {
      {
        return t;
      }
    }
    else
    {
      
    }

  }

  return 0;
}

link2 STsearchE(char *nome, link2 *hashtable, int m)
{
  int i = hash(nome, m);
  return lookupE(hashtable[i], nome);
}

link1 NEWJ(char *buffer1, char *buffer2, char *buffer3, int n, int m)
{
  link1 x = (link1) malloc(sizeof(struct node1));
  x->Jogo = (pJogo) malloc(sizeof(jogo));
  x->Jogo->nome = (char *) malloc((sizeof(char)) * (strlen(buffer1) + 1));
  strcpy(x->Jogo->nome, buffer1);
  x->Jogo->equipa1 = (char *) malloc((sizeof(char)) * (strlen(buffer2) + 1));
  strcpy(x->Jogo->equipa1, buffer2);
  x->Jogo->equipa2 = (char *) malloc((sizeof(char)) * (strlen(buffer3) + 1));
  strcpy(x->Jogo->equipa2, buffer3);
  x->Jogo->score1 = n;
  x->Jogo->score2 = m;
  x->next = 0;
  return x;
}

link1 insertBeginJ(link1 head, char *nome, char *equipa1, char *equipa2, int score1, int score2)
{
  link1 x = NEWJ(nome, equipa1, equipa2, score1, score2);
  x->next = head;
  return x;
}

link1 STinsertJ(char *nome, char *equipa1, char *equipa2, int score1, int score2, link1 *hashtable, int m)
{
  int i = hash(nome, m);
  hashtable[i] = insertBeginJ(hashtable[i], nome, equipa1, equipa2, score1, score2);
  return hashtable[i];
}

link1 delete(link1 head, char *nome)
{
  link1 t;
  link1 prev;
  for (t = head, prev = 0; t != 0; prev = t, t = t->next)
  {
    if (strcmp(t->Jogo->nome, nome) == 0)
    {
      {
        if (t == head)
        {
          {
            head = t->next;
          }
        }
        else
        {
          {
            prev->next = t->next;
          }
        }

        free(t->Jogo->nome);
        free(t->Jogo->equipa1);
        free(t->Jogo->equipa2);
        free(t->Jogo);
        free(t);
        break;
      }
    }
    else
    {
      
    }

  }

  return head;
}

void STdelete(char *nome, link1 *hashtable, int m)
{
  int i = hash(nome, m);
  hashtable[i] = delete(hashtable[i], nome);
}

link1 lookupJ(link1 head, char *nome)
{
  link1 t;
  for (t = head; t != 0; t = t->next)
  {
    if (strcmp(t->Jogo->nome, nome) == 0)
    {
      {
        return t;
      }
    }
    else
    {
      
    }

  }

  return 0;
}

link1 STsearchJ(char *nome, link1 *hashtable, int m)
{
  int i = hash(nome, m);
  return lookupJ(hashtable[i], nome);
}

