/*File generated by PreProcessor.py*/


#include "commands.h"


void createGameCmd(int nl, BTTeam *teams, BTGame **games)
{
  char name[1024];
  char teamName1[1024];
  char teamName2[1024];
  int score1;
  int score2;
  Team *team1;
  Team *team2;
  Game *game;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  for (int teamName1_index = 0; teamName1_index < 10; teamName1_index++)
  {
    teamName1[teamName1_index] = new_sym_var(sizeof(char) * 8);
  }

  teamName1[10 - 1] = '\0';
  for (int teamName2_index = 0; teamName2_index < 10; teamName2_index++)
  {
    teamName2[teamName2_index] = new_sym_var(sizeof(char) * 8);
  }

  teamName2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (existsBTGame(*games, name))
  {
    {
      printf("%d Jogo existente.\n", nl);
      return;
    }
  }
  else
  {
    {
      team1 = searchBTTeam(teams, teamName1);
      team2 = searchBTTeam(teams, teamName2);
      if ((team1 == 0) || (team2 == 0))
      {
        {
          printf("%d Equipa inexistente.\n", nl);
        }
      }
      else
      {
        {
          game = newGame(nl, name, team1, team2, score1, score2);
          insertBTGame(games, game);
        }
      }

    }
  }

}

int sortbyNL(const void *a, const void *b)
{
  return getGameCT(*((Game **) a)) - getGameCT(*((Game **) b));
}

void listAllGamesCmd(int nl, BTGame *games)
{
  int i;
  int count = countBTGame(games);
  Game **gamesArr = (Game **) malloc((sizeof(Game *)) * count);
  dumpBTGame(gamesArr, games);
  qsort(gamesArr, count, sizeof(Game *), sortbyNL);
  for (i = 0; i < count; i++)
  {
    printGame(gamesArr[i], nl);
  }

  free(gamesArr);
}

void searchGameCmd(int nl, BTGame *games)
{
  char name[1024];
  Game *game;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  game = searchBTGame(games, name);
  if (game == 0)
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }
  else
  {
    {
      printGame(game, nl);
    }
  }

}

void deleteGameCmd(int nl, BTGame **games)
{
  char name[1024];
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (!existsBTGame(*games, name))
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }
  else
  {
    {
      deleteBTGame(games, name);
    }
  }

}

void changeGameScoresCmd(int nl, BTGame *games)
{
  char name[1024];
  int score1;
  int score2;
  Game *game;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  game = searchBTGame(games, name);
  if (game == 0)
  {
    {
      printf("%d Jogo inexistente.\n", nl);
    }
  }
  else
  {
    {
      updateGameScore(game, score1, score2);
    }
  }

}

void createTeamCmd(int nl, BTTeam **teams)
{
  char name[1024];
  Team *team;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (existsBTTeam(*teams, name))
  {
    {
      printf("%d Equipa existente.\n", nl);
    }
  }
  else
  {
    {
      team = newTeam(name, 0);
      insertBTTeam(teams, team);
    }
  }

}

void searchTeamCmd(int nl, BTTeam *teams)
{
  char name[1024];
  Team *team;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  team = searchBTTeam(teams, name);
  if (team == 0)
  {
    {
      printf("%d Equipa inexistente.\n", nl);
    }
  }
  else
  {
    {
      printf("%d %s %d\n", nl, getTeamName(team), getTeamWins(team));
    }
  }

}

void bestTeamsCmd(int nl, BTTeam *teams)
{
  TeamList *best = bestBTTeam(teams);
  int wins;
  if (countTeamList(best) > 0)
  {
    {
      wins = getTeamWins(best->team);
      printf("%d Melhores %d\n", nl, wins);
      printTeamList(best, nl);
    }
  }
  else
  {
    
  }

  clearTeamList(&best);
}

