/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "structures.h"


int __a__(listJogo *jogos, listEquipa *equipas, int NL)
{
  int c;
  int _score1;
  int _score2;
  int i;
  char input[3100];
  char _nomeJogo[1023];
  char _nomeEquipa1[1023];
  char _nomeEquipa2[1023];
  char *token;
  c = getchar();
  for (i = 0; c != '\n'; i++)
  {
    c = getchar();
    input[i] = c;
  }

  i--;
  input[i] = '\0';
  token = strtok(input, ":");
  strcpy(_nomeJogo, token);
  token = strtok(0, ":");
  strcpy(_nomeEquipa1, token);
  token = strtok(0, ":");
  strcpy(_nomeEquipa2, token);
  token = strtok(0, ":");
  _score1 = atoi(token);
  token = strtok(0, ":");
  _score2 = atoi(token);
  if (!existJogo(jogos, _nomeJogo))
  {
    {
      printf("%d Jogo existente.\n", NL);
      return 0;
    }
  }
  else
  {
    
  }

  if ((existEquipa(equipas, _nomeEquipa1) == 1) || (existEquipa(equipas, _nomeEquipa2) == 1))
  {
    {
      printf("%d Equipa inexistente.\n", NL);
      return 0;
    }
  }
  else
  {
    
  }

  addNodeJogo(jogos, _nomeJogo, _nomeEquipa1, _nomeEquipa2, _score1, _score2);
  if (_score1 > _score2)
  {
    searchListEquipa(equipas, _nomeEquipa1)->vitorias++;
  }
  else
  {
    if (_score1 < _score2)
    {
      searchListEquipa(equipas, _nomeEquipa2)->vitorias++;
    }
    else
    {
      
    }

  }

  return 0;
}

int __A__(listEquipa *equipas, int NL)
{
  int c;
  int i;
  char input[3100];
  char _nomeEquipa[1023];
  char *token;
  c = getchar();
  for (i = 0; c != '\n'; i++)
  {
    c = getchar();
    input[i] = c;
  }

  i--;
  input[i] = '\0';
  token = strtok(input, ":");
  strcpy(_nomeEquipa, token);
  if (existEquipa(equipas, _nomeEquipa) == 0)
  {
    {
      printf("%d Equipa existente.\n", NL);
      return 0;
    }
  }
  else
  {
    
  }

  addNodeEquipa(equipas, _nomeEquipa);
  return 0;
}

int __l__(listJogo *jogos, int NL)
{
  nodeJogo *currentNode;
  for (currentNode = jogos->head; currentNode != 0; currentNode = currentNode->next)
  {
    printf("%d %s %s %s %d %d\n", NL, currentNode->nomeJogo, currentNode->nomeEquipa1, currentNode->nomeEquipa2, currentNode->resultado1, currentNode->resultado2);
  }

  return 0;
}

int __p__(listJogo *jogos, int NL)
{
  nodeJogo *currentNode;
  char input[1023];
  char _nomeJogo[1023];
  int c;
  int i;
  char *token;
  c = getchar();
  for (i = 0; c != '\n'; i++)
  {
    c = getchar();
    input[i] = c;
  }

  i--;
  input[i] = '\0';
  token = strtok(input, ":");
  strcpy(_nomeJogo, token);
  for (currentNode = jogos->head; currentNode != 0; currentNode = currentNode->next)
  {
    if (strcmp(_nomeJogo, currentNode->nomeJogo) == 0)
    {
      {
        printf("%d %s %s %s %d %d\n", NL, currentNode->nomeJogo, currentNode->nomeEquipa1, currentNode->nomeEquipa2, currentNode->resultado1, currentNode->resultado2);
        return 0;
      }
    }
    else
    {
      
    }

  }

  printf("%d Jogo inexistente.\n", NL);
  return 0;
}

int __P__(listEquipa *equipas, int NL)
{
  nodeEquipa *currentNode;
  int c;
  int i;
  char input[3100];
  char _nomeEquipa[1023];
  char *token;
  c = getchar();
  for (i = 0; c != '\n'; i++)
  {
    c = getchar();
    input[i] = c;
  }

  i--;
  input[i] = '\0';
  token = strtok(input, ":");
  strcpy(_nomeEquipa, token);
  for (currentNode = equipas->head; currentNode != 0; currentNode = currentNode->next)
  {
    if (strcmp(_nomeEquipa, currentNode->nomeEquipa) == 0)
    {
      {
        printf("%d %s %d\n", NL, currentNode->nomeEquipa, currentNode->vitorias);
        return 0;
      }
    }
    else
    {
      
    }

  }

  printf("%d Equipa inexistente.\n", NL);
  return 0;
}

int __r__(listJogo *jogos, listEquipa *equipas, int NL)
{
  int c;
  int i;
  char _nomeJogo[1023];
  char input[1023];
  nodeJogo *nJogo;
  char *token;
  c = getchar();
  for (i = 0; c != '\n'; i++)
  {
    c = getchar();
    input[i] = c;
  }

  i--;
  input[i] = '\0';
  token = strtok(input, ":");
  strcpy(_nomeJogo, token);
  if (existJogo(jogos, _nomeJogo))
  {
    {
      printf("%d Jogo inexistente.\n", NL);
      return 0;
    }
  }
  else
  {
    
  }

  nJogo = searchListJogo(jogos, _nomeJogo);
  if (nJogo->resultado1 > nJogo->resultado2)
  {
    searchListEquipa(equipas, nJogo->nomeEquipa1)->vitorias--;
  }
  else
  {
    if (nJogo->resultado1 < nJogo->resultado2)
    {
      searchListEquipa(equipas, nJogo->nomeEquipa2)->vitorias--;
    }
    else
    {
      
    }

  }

  removeNodeJogo(jogos, nJogo);
  return 0;
}

int __s__(listJogo *jogos, listEquipa *equipas, int NL)
{
  int c;
  int _score1;
  int _score2;
  int i;
  char input[3100];
  char _nomeJogo[1023];
  char *token;
  nodeJogo *nJogo;
  c = getchar();
  for (i = 0; c != '\n'; i++)
  {
    c = getchar();
    input[i] = c;
  }

  i--;
  input[i] = '\0';
  token = strtok(input, ":");
  strcpy(_nomeJogo, token);
  token = strtok(0, ":");
  _score1 = atoi(token);
  token = strtok(0, ":");
  _score2 = atoi(token);
  if (existJogo(jogos, _nomeJogo))
  {
    {
      printf("%d Jogo inexistente.\n", NL);
      return 0;
    }
  }
  else
  {
    
  }

  nJogo = searchListJogo(jogos, _nomeJogo);
  if ((nJogo->resultado1 > nJogo->resultado2) && (_score1 < _score2))
  {
    {
      searchListEquipa(equipas, nJogo->nomeEquipa1)->vitorias--;
      searchListEquipa(equipas, nJogo->nomeEquipa2)->vitorias++;
    }
  }
  else
  {
    if ((nJogo->resultado1 < nJogo->resultado2) && (_score1 > _score2))
    {
      {
        searchListEquipa(equipas, nJogo->nomeEquipa1)->vitorias++;
        searchListEquipa(equipas, nJogo->nomeEquipa2)->vitorias--;
      }
    }
    else
    {
      if ((nJogo->resultado1 == nJogo->resultado2) && (_score1 < _score2))
      {
        {
          searchListEquipa(equipas, nJogo->nomeEquipa2)->vitorias++;
        }
      }
      else
      {
        if ((nJogo->resultado1 == nJogo->resultado2) && (_score1 > _score2))
        {
          {
            searchListEquipa(equipas, nJogo->nomeEquipa1)->vitorias++;
          }
        }
        else
        {
          if ((nJogo->resultado1 > nJogo->resultado2) && (_score1 == _score2))
          {
            {
              searchListEquipa(equipas, nJogo->nomeEquipa1)->vitorias--;
            }
          }
          else
          {
            if ((nJogo->resultado1 < nJogo->resultado2) && (_score1 == _score2))
            {
              {
                searchListEquipa(equipas, nJogo->nomeEquipa2)->vitorias--;
              }
            }
            else
            {
              
            }

          }

        }

      }

    }

  }

  nJogo->resultado1 = _score1;
  nJogo->resultado2 = _score2;
  return 0;
}

int __g__(listEquipa *equipas, int NL)
{
  int numeroVitorias = 0;
  nodeEquipa *currentNode;
  nodeEquipa *nodeToPrint;
  listEquipa *equipasAux = mkListEquipa();
  if (equipas->head == 0)
  {
    return 0;
  }
  else
  {
    
  }

  for (currentNode = equipas->head; currentNode != 0; currentNode = currentNode->next)
  {
    if (currentNode->vitorias > numeroVitorias)
    {
      {
        numeroVitorias = currentNode->vitorias;
        freeListEquipa(equipasAux);
        equipasAux = mkListEquipa();
        addNodeEquipa(equipasAux, currentNode->nomeEquipa);
      }
    }
    else
    {
      if (currentNode->vitorias == numeroVitorias)
      {
        {
          addNodeEquipa(equipasAux, currentNode->nomeEquipa);
        }
      }
      else
      {
        
      }

    }

  }

  printf("%d Melhores %d\n", NL, numeroVitorias);
  while (equipasAux->head != 0)
  {
    nodeToPrint = equipasAux->head;
    for (currentNode = equipasAux->head; currentNode != 0; currentNode = currentNode->next)
    {
      if (strcmp(currentNode->nomeEquipa, nodeToPrint->nomeEquipa) < 0)
      {
        {
          nodeToPrint = currentNode;
        }
      }
      else
      {
        
      }

    }

    printf("%d * %s\n", NL, nodeToPrint->nomeEquipa);
    removeNodeEquipa(equipasAux, nodeToPrint);
  }

  return 0;
}

int main()
{
  int c;
  int NL = 0;
  listJogo *jogos = mkListJogo();
  listEquipa *equipas = mkListEquipa();
  while (c != 'x')
  {
    c = getchar();
    switch (c)
    {
      case 'a':
        NL++;
        __a__(jogos, equipas, NL);
        break;

      case 'A':
        NL++;
        __A__(equipas, NL);
        break;

      case 'l':
        NL++;
        __l__(jogos, NL);
        break;

      case 'p':
        NL++;
        __p__(jogos, NL);
        break;

      case 'P':
        NL++;
        __P__(equipas, NL);
        break;

      case 'r':
        NL++;
        __r__(jogos, equipas, NL);
        break;

      case 's':
        NL++;
        __s__(jogos, equipas, NL);
        break;

      case 'g':
        NL++;
        __g__(equipas, NL);
        break;

      case 'x':
        return 0;

    }

  }

  return 0;
}

