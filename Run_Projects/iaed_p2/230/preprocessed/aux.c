/*File generated by PreProcessor.py*/


#include "aux.h"
#include "hash.h"


void createNewGame(List *node)
{
  node->data = malloc(sizeof(Game));
  insertInfoGame(node->data);
  updateGamesWon(node->data);
  insertListGames(node->data);
}

void insertInfoGame(Game *gameData)
{
  gameData->name = malloc(((sizeof(char)) * strlen(game)) + 1);
  strcpy(gameData->name, game);
  gameData->team1 = malloc(((sizeof(char)) * strlen(team1)) + 1);
  strcpy(gameData->team1, team1);
  gameData->team2 = malloc(((sizeof(char)) * strlen(team2)) + 1);
  strcpy(gameData->team2, team2);
  gameData->score1 = score1;
  gameData->score2 = score2;
}

void updateGamesWon(Game *gameData)
{
  List *teamWon;
  if (gameData->score1 > gameData->score2)
  {
    {
      teamWon = searchNode(htTeams, team1, 't');
      ((Team *) teamWon->data)->gamesWon += 1;
    }
  }
  else
  {
    if (gameData->score1 < gameData->score2)
    {
      {
        teamWon = searchNode(htTeams, team2, 't');
        ((Team *) teamWon->data)->gamesWon += 1;
      }
    }
    else
    {
      
    }

  }

}

void insertListGames(Game *gameData)
{
  if ((!(numGames % 20)) && ((sizeListGames - numGames) < 20))
  {
    {
      listGames = realloc(listGames, (sizeListGames + 20) * (sizeof(char *)));
      sizeListGames += 20;
    }
  }
  else
  {
    
  }

  listGames[numGames] = gameData->name;
  numGames += 1;
}

void createNewTeam(List *node)
{
  node->data = malloc(sizeof(Team));
  ((Team *) node->data)->name = malloc(((sizeof(char)) * strlen(team1)) + 1);
  strcpy(((Team *) node->data)->name, team1);
  ((Team *) node->data)->gamesWon = 0;
}

void removeGamesWon(Game *gameNode)
{
  List *teamWon;
  if (gameNode->score1 > gameNode->score2)
  {
    {
      teamWon = searchNode(htTeams, gameNode->team1, 't');
      ((Team *) teamWon->data)->gamesWon -= 1;
    }
  }
  else
  {
    
  }

  if (gameNode->score1 < gameNode->score2)
  {
    {
      teamWon = searchNode(htTeams, gameNode->team2, 't');
      ((Team *) teamWon->data)->gamesWon -= 1;
    }
  }
  else
  {
    
  }

}

void removeListGames(Game *gameNode)
{
  int i;
  for (i = 0; i < numGames; i++)
  {
    if (strcmp(gameNode->name, listGames[i]) == 0)
    {
      {
        for (; i < (numGames - 1); i++)
          listGames[i] = listGames[i + 1];

        numGames -= 1;
        return;
      }
    }
    else
    {
      
    }

  }

}

void changeGamesWon(Game *gameNode, int score1, int score2)
{
  List *teamWon;
  removeGamesWon(gameNode);
  if (score1 > score2)
  {
    {
      teamWon = searchNode(htTeams, gameNode->team1, 't');
      ((Team *) teamWon->data)->gamesWon += 1;
    }
  }
  else
  {
    if (score2 > score1)
    {
      {
        teamWon = searchNode(htTeams, gameNode->team2, 't');
        ((Team *) teamWon->data)->gamesWon += 1;
      }
    }
    else
    {
      
    }

  }

}

int findBestTeams(int *maxGamesWon)
{
  int i;
  int lastInd = 0;
  Team *teamInfo;
  List *node;
  for (i = 0; i < 1999; i++)
  {
    node = htTeams->list[i];
    while (node != 0)
    {
      teamInfo = (Team *) node->data;
      if (teamInfo->gamesWon == (*maxGamesWon))
      {
        {
          listTeams[lastInd] = teamInfo->name;
          lastInd += 1;
        }
      }
      else
      {
        if (teamInfo->gamesWon > (*maxGamesWon))
        {
          {
            *maxGamesWon = teamInfo->gamesWon;
            listTeams[0] = teamInfo->name;
            lastInd = 1;
          }
        }
        else
        {
          
        }

      }

      node = node->next;
    }

  }

  sortListTeams(lastInd);
  return lastInd;
}

void sortListTeams(int ind)
{
  int i;
  for (i = 0; i < (ind - 1); i++)
  {
    if (strcmp(listTeams[i], listTeams[i + 1]) > 0)
    {
      {
        troca(i);
        while ((i > 0) && (strcmp(listTeams[i - 1], listTeams[i]) > 0))
        {
          if (strcmp(listTeams[i - 1], listTeams[i]) > 0)
          {
            {
              troca(i - 1);
            }
          }
          else
          {
            
          }

          i--;
        }

      }
    }
    else
    {
      
    }

  }

}

void troca(int i)
{
  char *temp;
  temp = listTeams[i];
  listTeams[i] = listTeams[i + 1];
  listTeams[i + 1] = temp;
}

