/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "JOGO.h" 
#include "EQUIPA.h"


void ListaJogos(game_list *l, int NL)
{
  Jogo *temp = l->head;
  while (temp != 0)
  {
    printf("%d ", NL);
    printf("%s ", temp->nome);
    printf("%s ", temp->equipa1);
    printf("%s ", temp->equipa2);
    printf("%d ", temp->score1);
    printf("%d\n", temp->score2);
    temp = temp->next;
  }

  return;
}

Jogo *FindGame(game_list *l, char buffer[1024])
{
  Jogo *toFind;
  int numHash = string_hash(buffer) % 100109;
  for (toFind = *(l->hashtable + numHash); toFind && (strcmp(toFind->nome, buffer) != 0); toFind = toFind->collision)
    ;

  return toFind;
}

void SearchGame(game_list *l, int NL)
{
  Jogo *toFind;
  char buffer[1024];
  for (int buffer_index = 0; buffer_index < 10; buffer_index++)
  {
    buffer[buffer_index] = new_sym_var(sizeof(char) * 8);
  }

  buffer[10 - 1] = '\0';
  if (toFind = FindGame(l, buffer))
  {
    {
      printf("%d ", NL);
      printf("%s ", toFind->nome);
      printf("%s ", toFind->equipa1);
      printf("%s ", toFind->equipa2);
      printf("%d ", toFind->score1);
      printf("%d\n", toFind->score2);
      return;
    }
  }
  else
  {
    
  }

  printf("%d Jogo inexistente.\n", NL);
}

game_list *apagaJogo(team_list *tl, game_list *l, int NL)
{
  int numHash;
  char buffer[1024];
  Jogo *toDelete;
  Jogo *JogoColisao;
  toDelete = l->head;
  for (int buffer_index = 0; buffer_index < 10; buffer_index++)
  {
    buffer[buffer_index] = new_sym_var(sizeof(char) * 8);
  }

  buffer[10 - 1] = '\0';
  if (toDelete = FindGame(l, buffer))
  {
    {
      if (toDelete->score1 > toDelete->score2)
      {
        {
          FindTeam(tl, toDelete->equipa1)->vitorias--;
        }
      }
      else
      {
        
      }

      if (toDelete->score2 > toDelete->score1)
      {
        {
          FindTeam(tl, toDelete->equipa2)->vitorias--;
        }
      }
      else
      {
        
      }

      if (toDelete->next != 0)
      {
        {
          toDelete->next->previous = toDelete->previous;
        }
      }
      else
      {
        
      }

      if (toDelete->previous != 0)
      {
        {
          toDelete->previous->next = toDelete->next;
        }
      }
      else
      {
        
      }

      if (toDelete == l->head)
      {
        {
          l->head = toDelete->next;
        }
      }
      else
      {
        
      }

      if (toDelete == l->last)
      {
        {
          l->last = toDelete->previous;
        }
      }
      else
      {
        
      }

      numHash = string_hash(buffer) % 100109;
      JogoColisao = *(l->hashtable + numHash);
      if (strcmp(JogoColisao->nome, buffer) == 0)
      {
        {
          *(l->hashtable + numHash) = JogoColisao->collision;
        }
      }
      else
      {
        {
          for (; strcmp(JogoColisao->collision->nome, buffer) != 0; JogoColisao = JogoColisao->collision)
            ;

          JogoColisao->collision = JogoColisao->collision->collision;
        }
      }

      free(toDelete->nome);
      free(toDelete->equipa1);
      free(toDelete->equipa2);
      free(toDelete);
      return l;
    }
  }
  else
  {
    
  }

  printf("%d Jogo inexistente.\n", NL);
  return l;
}

game_list *comando_s(team_list *tl, game_list *l, int NL)
{
  char buffer[1024];
  for (int buffer_index = 0; buffer_index < 10; buffer_index++)
  {
    buffer[buffer_index] = new_sym_var(sizeof(char) * 8);
  }

  buffer[10 - 1] = '\0';
  return ChangeScores(tl, l, buffer, NL);
}

game_list *ChangeScores(team_list *tl, game_list *l, char *buffer, int NL)
{
  Jogo *toChange;
  int sc1;
  int sc2;
  if (toChange = FindGame(l, buffer))
  {
    {
      sc1 = new_sym_var(sizeof(int) * 8);
      sc2 = new_sym_var(sizeof(int) * 8);
      if (toChange->score1 > toChange->score2)
      {
        {
          if (sc2 > sc1)
          {
            {
              FindTeam(tl, toChange->equipa1)->vitorias--;
              FindTeam(tl, toChange->equipa2)->vitorias++;
            }
          }
          else
          {
            
          }

          if (sc1 == sc2)
          {
            {
              FindTeam(tl, toChange->equipa1)->vitorias--;
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        
      }

      if (toChange->score2 > toChange->score1)
      {
        {
          if (sc1 > sc2)
          {
            {
              FindTeam(tl, toChange->equipa2)->vitorias--;
              FindTeam(tl, toChange->equipa1)->vitorias++;
            }
          }
          else
          {
            
          }

          if (sc1 == sc2)
          {
            {
              FindTeam(tl, toChange->equipa2)->vitorias--;
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        
      }

      if (toChange->score2 == toChange->score1)
      {
        {
          if (sc1 > sc2)
          {
            {
              FindTeam(tl, toChange->equipa1)->vitorias++;
            }
          }
          else
          {
            
          }

          if (sc2 > sc1)
          {
            {
              FindTeam(tl, toChange->equipa2)->vitorias++;
            }
          }
          else
          {
            
          }

        }
      }
      else
      {
        
      }

      toChange->score1 = sc1;
      toChange->score2 = sc2;
      return l;
    }
  }
  else
  {
    
  }

  printf("%d Jogo inexistente.\n", NL);
  return l;
}

