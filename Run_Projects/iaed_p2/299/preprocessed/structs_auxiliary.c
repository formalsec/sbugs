/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <string.h>
#include "structs.h"
#include "utilities.h"
#include "structs_auxiliary.h"


games *new_game_at_end(games **list)
{
  games *new = calloc(1, sizeof(games));
  if ((*list) == 0)
  {
    {
      *list = new;
      (*list)->last = new;
    }
  }
  else
  {
    {
      new->prev = (*list)->last;
      (*list)->last->next = new;
      (*list)->last = new;
    }
  }

  return new;
}

teams *new_team_at_end(teams **list)
{
  teams *current = *list;
  if (current == 0)
  {
    {
      *list = calloc(1, sizeof(teams));
      return *list;
    }
  }
  else
  {
    
  }

  for (; 1; current = current->next)
  {
    if (current->next == 0)
    {
      {
        current->next = calloc(1, sizeof(teams));
        return current->next;
      }
    }
    else
    {
      
    }

  }

}

void new_name(char *name, game_names **name_list)
{
  game_names *new_last = calloc(1, sizeof(game_names));
  new_last->name = malloc((strlen(name) + 1) * (sizeof(char)));
  strcpy(new_last->name, name);
  if ((*name_list) == 0)
  {
    {
      *name_list = new_last;
      (*name_list)->last = new_last;
      return;
    }
  }
  else
  {
    
  }

  new_last->prev = (*name_list)->last;
  (*name_list)->last->next = new_last;
  (*name_list)->last = new_last;
}

void elim_game(games *game, games **head, game_names **names_pt)
{
  teams *winner;
  if (game->prev == 0)
  {
    {
      *head = game->next;
      if ((*head) != 0)
      {
        {
          (*head)->last = game->last;
        }
      }
      else
      {
        
      }

    }
  }
  else
  {
    {
      game->prev->next = game->next;
      if (game->next == 0)
      {
        {
          (*head)->last = game->prev;
        }
      }
      else
      {
        
      }

    }
  }

  if (game->next != 0)
  {
    game->next->prev = game->prev;
  }
  else
  {
    
  }

  winner = get_winner(game);
  if (winner != 0)
  {
    winner->wins--;
  }
  else
  {
    
  }

  free_game_pt(game, names_pt);
}

void del_name(game_names *name, game_names **name_list)
{
  game_names *name_to_del = name;
  if (name_to_del->prev == 0)
  {
    {
      *name_list = name_to_del->next;
      if ((*name_list) != 0)
      {
        {
          (*name_list)->prev = 0;
          (*name_list)->last = name_to_del->last;
        }
      }
      else
      {
        
      }

    }
  }
  else
  {
    {
      name_to_del->prev->next = name_to_del->next;
      if (name_to_del->next == 0)
      {
        {
          (*name_list)->last = name_to_del->prev;
        }
      }
      else
      {
        {
          name_to_del->next->prev = name_to_del->prev;
        }
      }

    }
  }

  free(name_to_del->name);
  free(name_to_del);
}

void free_game_pt(games *game, game_names **name_list)
{
  del_name(game->name, name_list);
  free(game);
}

