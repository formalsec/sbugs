/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "projeto2.h"


void a_comando(jogos *jg, node **jg_hash, e_node **eqp_hash, int NL)
{
  char nome[1023];
  e_node *tmp_1;
  e_node *tmp_2;
  node *aux;
  jg_node *jg_aux;
  int location_2;
  int location_3;
  int location_1;
  char equipa1[1023];
  char equipa2[1023];
  int score1;
  int score2;
  int procura = 0;
  int procura_1 = 0;
  int procura_2 = 0;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
  {
    equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa1[10 - 1] = '\0';
  for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
  {
    equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  location_1 = get_location(nome);
  for (aux = jg_hash[location_1]; aux != 0; aux = aux->next)
  {
    if (strcmp(aux->nome_jogo, nome) == 0)
    {
      {
        procura = 1;
        break;
      }
    }
    else
    {
      
    }

  }

  if (procura == 1)
  {
    printf("%d Jogo existente.\n", NL);
  }
  else
  {
    {
      location_2 = get_location(equipa1);
      location_3 = get_location(equipa2);
      for (tmp_1 = eqp_hash[location_2]; tmp_1 != 0; tmp_1 = tmp_1->next)
      {
        if (strcmp(tmp_1->nome, equipa1) == 0)
        {
          {
            procura_1 = 1;
            break;
          }
        }
        else
        {
          
        }

      }

      for (tmp_2 = eqp_hash[location_3]; tmp_2 != 0; tmp_2 = tmp_2->next)
      {
        if (strcmp(tmp_2->nome, equipa2) == 0)
        {
          {
            procura_2 = 1;
            break;
          }
        }
        else
        {
          
        }

      }

      if ((procura_1 == 1) && (procura_2 == 1))
      {
        {
          jg_aux = add_last_jg(jg, nome, equipa1, equipa2, score1, score2);
          insert_into_table(jg_hash, jg_aux);
          if (score1 > score2)
          {
            tmp_1->vitorias++;
          }
          else
          {
            
          }

          if (score1 < score2)
          {
            tmp_2->vitorias++;
          }
          else
          {
            
          }

        }
      }
      else
      {
        {
          printf("%d Equipa inexistente.\n", NL);
        }
      }

    }
  }

}

void l_comando(jogos *jg, int NL)
{
  jg_node *aux;
  for (aux = jg->head; aux != 0; aux = aux->next)
  {
    printf("%d %s %s %s %d %d\n", NL, aux->value, aux->equipa1, aux->equipa2, aux->score1, aux->score2);
  }

}

void p_comando(node **hashtable, int NL)
{
  node *aux;
  char texto[1023];
  int procura = 0;
  int location;
  for (int texto_index = 0; texto_index < 10; texto_index++)
  {
    texto[texto_index] = new_sym_var(sizeof(char) * 8);
  }

  texto[10 - 1] = '\0';
  location = get_location(texto);
  if (hashtable[location] == 0)
  {
    {
      printf("%d Jogo inexistente.\n", NL);
    }
  }
  else
  {
    {
      for (aux = hashtable[location]; aux != 0; aux = aux->next)
      {
        if (strcmp(aux->nome_jogo, texto) == 0)
        {
          {
            procura = 1;
            break;
          }
        }
        else
        {
          
        }

      }

      if (procura == 1)
      {
        {
          printf("%d %s %s %s %d %d\n", NL, aux->jogo->value, aux->jogo->equipa1, aux->jogo->equipa2, aux->jogo->score1, aux->jogo->score2);
        }
      }
      else
      {
        printf("%d Jogo inexistente.\n", NL);
      }

    }
  }

}

void r_comando(jogos *jg, node **hashtable, e_node **equipas, int NL)
{
  char texto[1023];
  node *aux;
  int location;
  int procura = 0;
  for (int texto_index = 0; texto_index < 10; texto_index++)
  {
    texto[texto_index] = new_sym_var(sizeof(char) * 8);
  }

  texto[10 - 1] = '\0';
  location = get_location(texto);
  if (hashtable[location] == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
  }
  else
  {
    {
      for (aux = hashtable[location]; aux != 0; aux = aux->next)
      {
        if (strcmp(aux->nome_jogo, texto) == 0)
        {
          {
            procura = 1;
            break;
          }
        }
        else
        {
          
        }

      }

      if (procura != 1)
      {
        printf("%d Jogo inexistente.\n", NL);
      }
      else
      {
        {
          remove_vitoria(aux, equipas);
          remove_jogo(jg, aux);
          strcpy(aux->nome_jogo, "");
        }
      }

    }
  }

}

void s_comando(node **hashtable, e_node **equipas, int NL)
{
  char texto[1023];
  node *aux;
  e_node *tmp;
  e_node *tmp_1;
  int score_1;
  int score_2;
  int location;
  int location_1;
  int location_2;
  int procura = 0;
  int aux_1;
  int aux_2;
  for (int texto_index = 0; texto_index < 10; texto_index++)
  {
    texto[texto_index] = new_sym_var(sizeof(char) * 8);
  }

  texto[10 - 1] = '\0';
  score_1 = new_sym_var(sizeof(int) * 8);
  score_2 = new_sym_var(sizeof(int) * 8);
  location = get_location(texto);
  if (hashtable[location] == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
  }
  else
  {
    {
      for (aux = hashtable[location]; aux != 0; aux = aux->next)
      {
        if (strcmp(aux->nome_jogo, texto) == 0)
        {
          {
            procura = 1;
            break;
          }
        }
        else
        {
          
        }

      }

      if (procura != 1)
      {
        {
          printf("%d Jogo inexistente.\n", NL);
        }
      }
      else
      {
        {
          location_1 = get_location(aux->jogo->equipa1);
          location_2 = get_location(aux->jogo->equipa2);
          aux_1 = aux->jogo->score1;
          aux_2 = aux->jogo->score2;
          aux->jogo->score1 = score_1;
          aux->jogo->score2 = score_2;
          for (tmp = equipas[location_1]; tmp != 0; tmp = tmp->next)
          {
            if (strcmp(tmp->nome, aux->jogo->equipa1) == 0)
            {
              {
                if (aux_1 > aux_2)
                {
                  tmp->vitorias -= 1;
                }
                else
                {
                  
                }

                if (score_1 > score_2)
                {
                  tmp->vitorias += 1;
                }
                else
                {
                  
                }

                break;
              }
            }
            else
            {
              
            }

          }

          for (tmp_1 = equipas[location_2]; tmp_1 != 0; tmp_1 = tmp_1->next)
          {
            if (strcmp(tmp_1->nome, aux->jogo->equipa2) == 0)
            {
              {
                if (aux_1 < aux_2)
                {
                  tmp_1->vitorias -= 1;
                }
                else
                {
                  
                }

                if (score_1 < score_2)
                {
                  tmp_1->vitorias += 1;
                }
                else
                {
                  
                }

                break;
              }
            }
            else
            {
              
            }

          }

        }
      }

    }
  }

}

void A_comando(e_node **hashtable, int NL)
{
  char texto[1023];
  int location;
  int procura;
  for (int texto_index = 0; texto_index < 10; texto_index++)
  {
    texto[texto_index] = new_sym_var(sizeof(char) * 8);
  }

  texto[10 - 1] = '\0';
  location = get_location(texto);
  if (hashtable[location] == 0)
  {
    insert_into_equipas(hashtable, texto);
  }
  else
  {
    {
      procura = existe_equipa(hashtable, location, texto);
      if (procura == 1)
      {
        printf("%d Equipa existente.\n", NL);
      }
      else
      {
        insert_into_equipas(hashtable, texto);
      }

    }
  }

}

void P_comando(e_node **hashtable, int NL)
{
  e_node *aux;
  char texto[1023];
  int location;
  int procura = 0;
  for (int texto_index = 0; texto_index < 10; texto_index++)
  {
    texto[texto_index] = new_sym_var(sizeof(char) * 8);
  }

  texto[10 - 1] = '\0';
  location = get_location(texto);
  if (hashtable[location] == 0)
  {
    printf("%d Equipa inexistente.\n", NL);
  }
  else
  {
    {
      for (aux = hashtable[location]; aux != 0; aux = aux->next)
      {
        if (strcmp(aux->nome, texto) == 0)
        {
          {
            procura = 1;
            break;
          }
        }
        else
        {
          
        }

      }

      if (procura == 1)
      {
        printf("%d %s %d\n", NL, aux->nome, aux->vitorias);
      }
      else
      {
        printf("%d Equipa inexistente.\n", NL);
      }

    }
  }

}

void g_comando(e_node **equipas, int NL)
{
  e_node *aux;
  int maior = 0;
  int i;
  int conta = 0;
  for (i = 0; i < 1021; i++)
  {
    if (equipas[i] != 0)
    {
      {
        for (aux = equipas[i]; aux != 0; aux = aux->next)
        {
          if (aux->vitorias >= maior)
          {
            {
              maior = aux->vitorias;
              conta++;
            }
          }
          else
          {
            
          }

        }

      }
    }
    else
    {
      
    }

  }

  if (conta != 0)
  {
    listar_vencedores(equipas, maior, conta, NL);
  }
  else
  {
    
  }

}

