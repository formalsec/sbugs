/*File generated by PreProcessor.py*/


#include "tab_equipas.h"


int ordem_alfa(const void *equipa_a, const void *equipa_b);
int disp_equipas(void *nome, int tamanho);
int disp_equipas(void *nome, int tamanho)
{
  char *ptr_aux = (char *) nome;
  int res = 0;
  int base1 = 31415;
  int base2 = 27183;
  for (; (*ptr_aux) != '\0'; ptr_aux++, base1 = (base1 * base2) % tamanho)
  {
    res = (res + (base1 * (*ptr_aux))) % tamanho;
  }

  return res;
}

void *chave_equipas(void *e)
{
  return (void *) ((equipa) e)->nome;
}

void insere_tab_equipa(tab_disp tab_equipas, equipa e)
{
  insere_tab(tab_equipas, (void *) e, &chave_equipas, &disp_equipas);
}

void retira_tab_equipa(tab_disp tab_equipas, char *nome)
{
  retira_tab(tab_equipas, (void *) nome, &disp_equipas, &equipa_nome_igual, &liberta_equipa);
}

void liberta_tab_equipas(tab_disp tab_equipas)
{
  liberta_tab(tab_equipas, &liberta_equipa);
}

equipa procura_tab_equipa(tab_disp tab_equipas, char *nome)
{
  return (equipa) procura_tab(tab_equipas, (void *) nome, &disp_equipas, &equipa_nome_igual);
}

int max_vitorias_tab(tab_disp tab_equipas)
{
  int max = 0;
  int max_aux;
  int i;
  int num_equipas = 0;
  no *no_aux;
  for (i = 0; i < tab_equipas->tamanho; i++)
  {
    if (tab_equipas->tab[i] != 0)
    {
      {
        no_aux = tab_equipas->tab[i];
        while (no_aux != 0)
        {
          num_equipas++;
          if ((max_aux = ((equipa) no_aux->item)->vitorias) > max)
          {
            {
              max = max_aux;
            }
          }
          else
          {
            
          }

          no_aux = no_aux->prox;
        }

      }
    }
    else
    {
      
    }

  }

  if (num_equipas == 0)
  {
    {
      return -1;
    }
  }
  else
  {
    {
      return max;
    }
  }

}

int ordem_alfa(const void *equipa_a, const void *equipa_b)
{
  return strcmp((*((equipa *) equipa_a))->nome, (*((equipa *) equipa_b))->nome);
}

void mostra_equipas_max(tab_disp tab_equipas, int num_linha)
{
  int i;
  int max_vitorias;
  int tamanho_max = 100;
  int tamanho_vetor = 0;
  no *no_aux;
  max_vitorias = max_vitorias_tab(tab_equipas);
  if (max_vitorias != (-1))
  {
    {
      equipa *vetor_equipas = (equipa *) malloc(tamanho_max * (sizeof(equipa)));
      for (i = 0; i < tab_equipas->tamanho; i++)
      {
        if (tab_equipas->tab[i] != 0)
        {
          {
            no_aux = tab_equipas->tab[i];
            while (no_aux != 0)
            {
              if (((equipa) no_aux->item)->vitorias == max_vitorias)
              {
                {
                  vetor_equipas[tamanho_vetor++] = (equipa) no_aux->item;
                }
              }
              else
              {
                
              }

              no_aux = no_aux->prox;
              if (tamanho_vetor > (tamanho_max / 2))
              {
                {
                  tamanho_max *= 2;
                  vetor_equipas = (equipa *) realloc(vetor_equipas, tamanho_max);
                }
              }
              else
              {
                
              }

            }

          }
        }
        else
        {
          
        }

      }

      qsort(vetor_equipas, tamanho_vetor, sizeof(equipa), &ordem_alfa);
      printf("%d Melhores %d\n", num_linha, max_vitorias);
      for (i = 0; i < tamanho_vetor; i++)
      {
        printf("%d * %s\n", num_linha, vetor_equipas[i]->nome);
      }

      free(vetor_equipas);
    }
  }
  else
  {
    
  }

}

