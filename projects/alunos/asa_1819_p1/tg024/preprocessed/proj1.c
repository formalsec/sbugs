#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct item
{
  int n;
  struct item *prox;
} Item;
int nV;
int nE;
int Vorig;
int Vdest;
Item list[1000000 + 1];
int pi[1000000 + 1];
int d[1000000 + 1];
int low[1000000 + 1];
int color[1000000 + 1];
int t;
int artpoint[1000000 + 1];
int maxVtree[1000000 + 1];
int maxV = 0;
int r = 0;
int m = 1;
int mT = 1;
void addEdge(Item *list, int u, int v)
{
  Item *aux;
  Item *tmp;
  aux = (Item *) malloc((int) (sizeof(Item)));
  aux->n = v;
  aux->prox = 0;
  list[u].n++;
  if (list[u].prox == 0)
  {
    list[u].prox = aux;
  }
  else
  {
    tmp = list[u].prox;
    if (tmp->n > v)
    {
      aux->prox = tmp;
      list[u].prox = aux;
    }
    else
    {
      if (tmp->prox == 0)
      {
        aux->prox = tmp->prox;
        tmp->prox = aux;
      }
      else
      {
        while ((tmp->prox != 0) && (tmp->prox->n < v))
          tmp = tmp->prox;

        aux->prox = tmp->prox;
        tmp->prox = aux;
      }

    }

  }

}

int min(int a, int b)
{
  if (a < b)
  {
    return a;
  }
  else
  {
    
  }

  return b;
}

int max(int a, int b)
{
  if (a > b)
  {
    return a;
  }
  else
  {
    
  }

  return b;
}

void DFSutil(int u)
{
  Item *v;
  v = (Item *) malloc((int) (sizeof(Item)));
  color[u] = 1;
  int nChild = 0;
  d[u] = (low[u] = ++t);
  for (v = list[u].prox; v != 0; v = v->prox)
  {
    if (color[v->n] == 0)
    {
      mT++;
      nChild++;
      pi[v->n] = u;
      DFSutil(v->n);
      low[u] = min(low[u], low[v->n]);
      if ((pi[u] == (-1)) && (nChild > 1))
      {
        artpoint[u] = 1;
      }
      else
      {
        if ((pi[u] != (-1)) && (low[v->n] >= d[u]))
        {
          artpoint[u] = 1;
        }
        else
        {
          
        }

      }

    }
    else
    {
      if (v->n != pi[u])
      {
        low[u] = min(low[u], d[v->n]);
      }
      else
      {
        
      }

    }

  }

  maxV = max(maxV, u);
  maxVtree[r] = maxV;
}

void DFS(Item l)
{
  int i;
  for (i = 1; i <= nV; i++)
  {
    color[i] = 0;
    pi[i] = -1;
  }

  t = 1;
  int j;
  for (j = 1; j <= nV; j++)
  {
    m = 1;
    if (artpoint[j] == 1)
    {
      color[j] = 2;
    }
    else
    {
      
    }

  }

  for (i = 1; i <= nV; i++)
  {
    if (color[i] == 0)
    {
      mT = 1;
      maxV = 0;
      DFSutil(i);
      r++;
      m = max(m, mT);
    }
    else
    {
      
    }

  }

}

void merge(int arr[], int l, int m, int r)
{
  int i;
  int j;
  int k;
  int n1 = (m - l) + 1;
  int n2 = r - m;
  int L[n1];
  int R[n2];
  for (i = 0; i < n1; i++)
    L[i] = arr[l + i];

  for (j = 0; j < n2; j++)
    R[j] = arr[(m + 1) + j];

  i = 0;
  j = 0;
  k = l;
  while ((i < n1) && (j < n2))
  {
    if (L[i] <= R[j])
    {
      arr[k] = L[i];
      i++;
    }
    else
    {
      arr[k] = R[j];
      j++;
    }

    k++;
  }

  while (i < n1)
  {
    arr[k] = L[i];
    i++;
    k++;
  }

  while (j < n2)
  {
    arr[k] = R[j];
    j++;
    k++;
  }

}

void mergeSort(int arr[], int l, int r)
{
  if (l < r)
  {
    int m = l + ((r - l) / 2);
    mergeSort(arr, l, m);
    mergeSort(arr, m + 1, r);
    merge(arr, l, m, r);
  }
  else
  {
    
  }

}

int main(int argc, char *argv[])
{
  nV = new_sym_var(sizeof(int) * 8);
  nE = new_sym_var(sizeof(int) * 8);
  int i;
  int j;
  int k;
  int l;
  for (i = 1; i <= nV; i++)
  {
    list[i].n = 0;
    list[i].prox = 0;
  }

  for (j = 1; j <= nE; j++)
  {
    Vorig = new_sym_var(sizeof(int) * 8);
    Vdest = new_sym_var(sizeof(int) * 8);
    addEdge(list, Vorig, Vdest);
    addEdge(list, Vdest, Vorig);
  }

  DFS(*list);
  int artcounter = 0;
  printf("%d\n", r);
  mergeSort(maxVtree, 0, r - 1);
  int printed = 0;
  for (k = 0; k < r; k++)
  {
    if (printed)
    {
      printf(" %d", maxVtree[k]);
    }
    else
    {
      printed++;
      printf("%d", maxVtree[k]);
    }

  }

  for (l = 1; l <= nV; l++)
  {
    if (artpoint[l] == 1)
    {
      artcounter++;
    }
    else
    {
      
    }

  }

  printf("\n%d\n", artcounter);
  DFS(*list);
  printf("%d\n", m);
  return 0;
}

