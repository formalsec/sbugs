#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct node
{
  int index;
  int value;
  struct node *next;
} Node;
typedef struct list
{
  Node *head;
} List;
typedef struct graph
{
  int numStudents;
  int *visited;
  List *array;
} Graph;
Node *newList(int scores[], int dest)
{
  Node *newStudent = (Node *) malloc(sizeof(Node));
  newStudent->index = dest;
  newStudent->value = scores[dest];
  newStudent->next = 0;
  return newStudent;
}

Graph *createGraph(int numStudents)
{
  Graph *graph = (Graph *) malloc(sizeof(Graph));
  graph->numStudents = numStudents;
  graph->array = (List *) malloc(numStudents * (sizeof(List)));
  graph->visited = malloc(numStudents * (sizeof(int)));
  int i;
  for (i = 0; i < numStudents; i++)
  {
    graph->array[i].head = 0;
    graph->visited[i] = 0;
  }

  return graph;
}

void addRelation(Graph *graph, int student, int friend, int scores[])
{
  Node *newStudent = newList(scores, friend);
  newStudent->next = graph->array[student].head;
  graph->array[student].head = newStudent;
}

int max = 0;
void DFS(Graph *graph, int index, int scores[])
{
  Node *array = graph->array[index].head;
  Node *temp = array;
  if (max < scores[index])
  {
    max = scores[index];
  }
  else
  {
    
  }

  graph->visited[index] = 1;
  while (temp != 0)
  {
    int nextFriend = temp->index;
    if (graph->visited[nextFriend] == 0)
    {
      DFS(graph, nextFriend, scores);
    }
    else
    {
      
    }

    temp = temp->next;
  }

}

void newScores(Graph *graph, int numStudents, int scores[])
{
  int k;
  for (k = 0; k < numStudents; k++)
  {
    DFS(graph, k, scores);
    printf("%d\n", max);
    max = 0;
    int l;
    for (l = 0; l < numStudents; l++)
    {
      graph->visited[l] = 0;
    }

  }

}

int main()
{
  int numStudents;
  int numRelations;
  int friend;
  int student;
  numStudents = new_sym_var(sizeof(int) * 8);
  numRelations = new_sym_var(sizeof(int) * 8);
  int scores[numStudents];
  int i;
  for (i = 0; i < numStudents; i++)
  {
    scores[i] = new_sym_var(sizeof(int) * 8);
  }

  Graph *graph = createGraph(numStudents);
  int j;
  for (j = 0; j < numRelations; j++)
  {
    student = new_sym_var(sizeof(int) * 8);
    friend = new_sym_var(sizeof(int) * 8);
    addRelation(graph, student - 1, friend - 1, scores);
  }

  newScores(graph, numStudents, scores);
  return 0;
}

