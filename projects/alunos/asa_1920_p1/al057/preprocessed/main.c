#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


int students = 0;
int friendships = 0;
int **adjmatrix;
int highestgrade = 0;
int currentgrade = -1;
int *visited;
void InitMatrix()
{
  int i = 0;
  int j = 0;
  adjmatrix = (int **) malloc(students * (sizeof(int *)));
  if (adjmatrix == 0)
  {
    exit(0);
  }
  else
  {
    
  }

  for (i = 0; i < students; i++)
  {
    adjmatrix[i] = (int *) malloc(students * (sizeof(int)));
    if (adjmatrix[i] == 0)
    {
      exit(0);
    }
    else
    {
      
    }

  }

  for (i = 0; i < students; i++)
  {
    for (j = 0; j < students; j++)
    {
      adjmatrix[i][j] = -1;
    }

  }

  visited = (int *) malloc(students * (sizeof(int)));
  if (visited == 0)
  {
    exit(0);
  }
  else
  {
    
  }

  for (i = 0; i < students; i++)
    visited[i] = 0;

}

void ProcessInput()
{
  int i = 0;
  int numTokens = 0;
  int grade = 0;
  int friend_1 = 0;
  int friend_2 = 0;
  numTokens = 2;
  students = new_sym_var(sizeof(int) * 8);
  friendships = new_sym_var(sizeof(int) * 8);
  if (((numTokens != 2) || (students < 2)) || (friendships < 1))
  {
    exit(0);
  }
  else
  {
    
  }

  InitMatrix();
  for (i = 0; i < students; i++)
  {
    numTokens = 1;
    grade = new_sym_var(sizeof(int) * 8);
    if (numTokens != 1)
    {
      exit(0);
    }
    else
    {
      
    }

    if (highestgrade < grade)
    {
      highestgrade = grade;
    }
    else
    {
      
    }

    adjmatrix[i][i] = grade;
  }

  for (i = 0; i < friendships; i++)
  {
    numTokens = 2;
    friend_1 = new_sym_var(sizeof(int) * 8);
    friend_2 = new_sym_var(sizeof(int) * 8);
    if (numTokens != 2)
    {
      exit(0);
    }
    else
    {
      
    }

    adjmatrix[friend_1 - 1][friend_2 - 1] = adjmatrix[friend_2 - 1][friend_2 - 1];
  }

}

void DFS(int v)
{
  int i = 0;
  visited[v] = 1;
  for (i = 0; i < students; i++)
  {
    if (((adjmatrix[v][i] != (-1)) && (!visited[i])) && (i != v))
    {
      if (currentgrade < adjmatrix[v][i])
      {
        currentgrade = adjmatrix[v][i];
      }
      else
      {
        
      }

      if (currentgrade == highestgrade)
      {
        return;
      }
      else
      {
        
      }

      DFS(i);
    }
    else
    {
      
    }

  }

}

void ResetDFS()
{
  int i = 0;
  for (i = 0; i < students; i++)
    visited[i] = 0;

  currentgrade = -1;
}

void GetNewGrades()
{
  int i = 0;
  for (i = 0; i < students; i++)
  {
    currentgrade = adjmatrix[i][i];
    DFS(i);
    printf("%d\n", currentgrade);
    ResetDFS();
  }

  free(visited);
  for (i = 0; i < students; i++)
  {
    free(adjmatrix[i]);
  }

  free(adjmatrix);
}

int main(int argc, char *argv[])
{
  ProcessInput();
  GetNewGrades();
  exit(0);
}

