#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct 
{
  int nota;
  int cor;
  int nAmigos;
  int *amigos;
} Node;
Node *graph;
int nAlunos;
void inputHandler();
void addAluno(int aluno, int nota);
void addAmigo(int aluno, int amigo);
void graphExecute();
void visitNode(int node, int nota);
void printGraph();
int main()
{
  inputHandler();
  graphExecute();
  printGraph();
  return 0;
}

void inputHandler()
{
  char token;
  int i;
  int nota;
  int nAmizades;
  int aluno;
  int amigo;
  nAlunos = new_sym_var(sizeof(int) * 8);
  token = new_sym_var(sizeof(char) * 8);
  nAmizades = new_sym_var(sizeof(int) * 8);
  graph = malloc(nAlunos * (sizeof(Node)));
  for (i = 0; i < nAlunos; i++)
  {
    nota = new_sym_var(sizeof(int) * 8);
    addAluno(i, nota);
  }

  for (i = 0; i < nAmizades; i++)
  {
    amigo = new_sym_var(sizeof(int) * 8);
    aluno = new_sym_var(sizeof(int) * 8);
    addAmigo(aluno, amigo);
  }

}

void addAluno(int aluno, int nota)
{
  graph[aluno].nota = nota;
  graph[aluno].cor = 0;
  graph[aluno].nAmigos = 0;
  graph[aluno].amigos = 0;
}

void addAmigo(int aluno, int amigo)
{
  aluno--;
  amigo--;
  if (graph[aluno].nAmigos == 0)
  {
    graph[aluno].amigos = malloc(sizeof(int));
  }
  else
  {
    graph[aluno].amigos = realloc(graph[aluno].amigos, (graph[aluno].nAmigos + 1) * (sizeof(int)));
  }

  graph[aluno].amigos[graph[aluno].nAmigos] = amigo;
  graph[aluno].nAmigos++;
}

void graphExecute()
{
  int i;
  for (i = 0; i < nAlunos; i++)
  {
    if (graph[i].cor == 0)
    {
      visitNode(i, 0);
    }
    else
    {
      
    }

  }

}

void visitNode(int node, int nota)
{
  int i;
  if (nota > graph[node].nota)
  {
    graph[node].nota = nota;
  }
  else
  {
    
  }

  graph[node].cor = 1;
  for (i = 0; i < graph[node].nAmigos; i++)
  {
    if (graph[graph[node].amigos[i]].nota < graph[node].nota)
    {
      visitNode(graph[node].amigos[i], graph[node].nota);
    }
    else
    {
      
    }

  }

}

void printGraph()
{
  int i;
  for (i = 0; i < nAlunos; i++)
    printf("%d\n", graph[i].nota);

}

