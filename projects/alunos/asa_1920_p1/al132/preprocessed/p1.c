#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


void inicializarTabela();
void adicionaArco(int u, int v);
void visitaTabela();
void visita(int u);
int adjacenciaDiferente(int u);
int lastCheck();
typedef struct vertice
{
  int nota;
  int cor;
  int nAdjacencias;
  int *adjacencias;
  int adjacenciaAtual;
} vertice;
vertice *tabela;
int nAlunos;
int main()
{
  int nRelacoes;
  int retorno;
  retorno = 2;
  nAlunos = new_sym_var(sizeof(int) * 8);
  nRelacoes = new_sym_var(sizeof(int) * 8);
  if (retorno != 2)
  {
    exit(1);
  }
  else
  {
    
  }

  inicializarTabela();
  int nota;
  int i;
  for (i = 1; i <= nAlunos; i++)
  {
    retorno = 1;
    nota = new_sym_var(sizeof(int) * 8);
    if (retorno != 1)
    {
      exit(1);
    }
    else
    {
      
    }

    tabela[i].nota = nota;
  }

  int j;
  int Pessoa1;
  int Pessoa2;
  for (j = 0; j < nRelacoes; j++)
  {
    retorno = 2;
    Pessoa1 = new_sym_var(sizeof(int) * 8);
    Pessoa2 = new_sym_var(sizeof(int) * 8);
    if (retorno != 2)
    {
      exit(1);
    }
    else
    {
      
    }

    adicionaArco(Pessoa1, Pessoa2);
  }

  visitaTabela();
  while (lastCheck())
    ;

  for (i = 1; i <= nAlunos; i++)
  {
    printf("%d\n", tabela[i].nota);
  }

  return 0;
}

void inicializarTabela()
{
  int i;
  tabela = malloc((sizeof(vertice)) * (nAlunos + 1));
  for (i = 1; i <= nAlunos; i++)
  {
    tabela[i].nota = 0;
    tabela[i].cor = 0;
    tabela[i].nAdjacencias = 0;
    tabela[i].adjacencias = malloc(sizeof(int));
    tabela[i].adjacenciaAtual = 0;
  }

}

void adicionaArco(int u, int v)
{
  if (tabela[u].nAdjacencias < 1)
  {
    tabela[u].adjacencias[0] = v;
    tabela[u].nAdjacencias++;
  }
  else
  {
    tabela[u].adjacencias = realloc(tabela[u].adjacencias, (sizeof(int)) * (tabela[u].nAdjacencias + 1));
    tabela[u].nAdjacencias++;
    tabela[u].adjacencias[tabela[u].nAdjacencias - 1] = v;
  }

}

void visitaTabela()
{
  int i;
  for (i = 1; i <= nAlunos; i++)
  {
    visita(i);
  }

}

void visita(int u)
{
  tabela[u].cor = 1;
  int i;
  for (i = tabela[u].adjacenciaAtual; i < tabela[u].nAdjacencias; i++)
  {
    if (tabela[tabela[u].adjacencias[i]].cor == 0)
    {
      visita(tabela[u].adjacencias[i]);
    }
    else
    {
      
    }

    if (tabela[tabela[u].adjacencias[i]].cor == 1)
    {
      if (adjacenciaDiferente(tabela[u].adjacencias[i]) != 0)
      {
        tabela[tabela[u].adjacencias[i]].adjacenciaAtual++;
        visita(tabela[u].adjacencias[i]);
      }
      else
      {
        
      }

    }
    else
    {
      
    }

    if (tabela[u].nota < tabela[tabela[u].adjacencias[i]].nota)
    {
      tabela[u].nota = tabela[tabela[u].adjacencias[i]].nota;
    }
    else
    {
      
    }

  }

  tabela[u].cor = 2;
}

int adjacenciaDiferente(int u)
{
  int i;
  for (i = 0; i < tabela[u].nAdjacencias; i++)
  {
    if (tabela[tabela[u].adjacencias[i]].cor == 0)
    {
      return 1;
    }
    else
    {
      
    }

  }

  return 0;
}

int lastCheck()
{
  int i;
  int j;
  for (i = 1; i <= nAlunos; i++)
  {
    for (j = 0; j < tabela[i].nAdjacencias; j++)
    {
      if (tabela[i].nota < tabela[tabela[i].adjacencias[j]].nota)
      {
        tabela[i].nota = tabela[tabela[i].adjacencias[j]].nota;
        return 1;
      }
      else
      {
        
      }

    }

  }

  return 0;
}

