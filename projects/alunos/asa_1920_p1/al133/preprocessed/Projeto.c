#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>


typedef struct 
{
  int grade;
  int nfriends;
  int *friends;
  int color;
} Student;
void init();
void getGrades();
void addFriends();
void DFS();
void DFS_Visit(int student, int original);
void out();
void aux(int student, int pos);
int NStudents;
int NFriendships = 0;
Student *class;
int state;
int main()
{
  init();
  getGrades();
  addFriends();
  while (state != 1)
    DFS();

  out();
  return 0;
}

void init()
{
  int i;
  if (2)
  {
    NStudents = new_sym_var(sizeof(int) * 8);
    NFriendships = new_sym_var(sizeof(int) * 8);
    ;
  }
  else
  {
    
  }

  class = malloc((sizeof(Student)) * NStudents);
  for (i = 0; i < NStudents; i++)
  {
    class[i].grade = 0;
    class[i].nfriends = 0;
    class[i].color = 0;
    class[i].friends = 0;
  }

}

void getGrades()
{
  int value;
  int i;
  for (i = 0; i < NStudents; i++)
  {
    if (1)
    {
      value = new_sym_var(sizeof(int) * 8);
      ;
    }
    else
    {
      
    }

    class[i].grade = value;
  }

}

void addFriends()
{
  int student;
  int friend;
  int position;
  int i;
  for (i = 0; i < NFriendships; i++)
  {
    if (2)
    {
      student = new_sym_var(sizeof(int) * 8);
      friend = new_sym_var(sizeof(int) * 8);
      ;
    }
    else
    {
      
    }

    class[student - 1].nfriends++;
    position = class[student - 1].nfriends;
    if (position == 1)
    {
      class[student - 1].friends = malloc(sizeof(int));
    }
    else
    {
      class[student - 1].friends = realloc(class[student - 1].friends, (sizeof(int)) * position);
    }

    class[student - 1].friends[position - 1] = friend;
  }

}

void DFS()
{
  int i;
  state = 1;
  for (i = 0; i < NStudents; i++)
  {
    DFS_Visit(i, i);
  }

}

void DFS_Visit(int student, int original)
{
  int friend;
  int i;
  int k = 0;
  class[student].color = 1;
  for (i = 0; i < class[student].nfriends; i++)
  {
    friend = class[student].friends[i] - 1;
    if (class[original].grade < class[friend].grade)
    {
      class[original].grade = class[friend].grade;
    }
    else
    {
      
    }

    if (class[friend].color == 0)
    {
      DFS_Visit(friend, original);
    }
    else
    {
      if ((class[friend].color == 1) && (class[friend].friends[k + 1] != 0))
      {
        aux(friend, k + 1);
      }
      else
      {
        
      }

    }

    if (class[student].grade < class[friend].grade)
    {
      class[student].grade = class[friend].grade;
      state = 0;
    }
    else
    {
      
    }

    k = i;
  }

  class[student].color = 2;
  k = 0;
}

void aux(int student, int pos)
{
  int friend;
  int i;
  for (i = pos; i < class[student].nfriends; i++)
  {
    friend = class[student].friends[i] - 1;
    if (class[friend].color == 0)
    {
      DFS_Visit(friend, student);
    }
    else
    {
      
    }

    if ((class[friend].color == 1) && (class[friend].friends[pos + 1] != 0))
    {
      aux(friend, pos + 1);
    }
    else
    {
      
    }

    if (class[student].grade < class[friend].grade)
    {
      class[student].grade = class[friend].grade;
      state = 0;
    }
    else
    {
      
    }

  }

  class[student].color = 2;
}

void out()
{
  int i;
  for (i = 0; i < NStudents; i++)
  {
    printf("%d\n", class[i].grade);
  }

}

