#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct friend
{
  struct student *info;
  struct friend *next;
} friend;
typedef struct student
{
  struct friend *lastFriend;
  struct friend *friends;
  int originalScore;
  int predictedScore;
} student;
student **students = 0;
int numStudents = 0;
student *addStudent(int score, int id)
{
  students[id] = malloc(sizeof(student));
  students[id]->friends = 0;
  students[id]->lastFriend = 0;
  students[id]->originalScore = score;
  students[id]->predictedScore = -1;
  return students[id];
}

friend *addFriend(student *s, student *newFriend)
{
  if (s->friends == 0)
  {
    s->friends = malloc(sizeof(friend));
    s->friends->info = newFriend;
    s->friends->next = 0;
    s->lastFriend = s->friends;
    return s->friends;
  }
  else
  {
    
  }

  s->lastFriend->next = malloc(sizeof(friend));
  s->lastFriend->next->info = newFriend;
  s->lastFriend->next->next = 0;
  s->lastFriend = s->lastFriend->next;
  return s->lastFriend;
}

void read()
{
  int relationsNumber;
  char line[900];
  int i = 0;
  int studentId;
  int friendId;
  fgets(line, (sizeof(line)) / (sizeof(char)), stdin);
  numStudents = new_sym_var(sizeof(int) * 8);
  relationsNumber = new_sym_var(sizeof(int) * 8);
  students = malloc((sizeof(student *)) * numStudents);
  while (i < numStudents)
  {
    fgets(line, (sizeof(line)) / (sizeof(char)), stdin);
    studentId = new_sym_var(sizeof(int) * 8);
    addStudent(studentId, i);
    i++;
  }

  i = 0;
  while (i < relationsNumber)
  {
    fgets(line, (sizeof(line)) / (sizeof(char)), stdin);
    friendId = new_sym_var(sizeof(int) * 8);
    studentId = new_sym_var(sizeof(int) * 8);
    addFriend(students[studentId - 1], students[friendId - 1]);
    i++;
  }

}

void setNewScore(student *s, int newScore)
{
  friend *f = s->friends;
  if ((s->predictedScore >= newScore) || (s->originalScore > newScore))
  {
    return;
  }
  else
  {
    
  }

  s->predictedScore = newScore;
  while (f != 0)
  {
    setNewScore(f->info, newScore);
    f = f->next;
  }

}

void setScores()
{
  int i = 0;
  while (i < numStudents)
  {
    if (students[i]->predictedScore == (-1))
    {
      setNewScore(students[i], students[i]->originalScore);
    }
    else
    {
      
    }

    i++;
  }

}

void write()
{
  int i = 0;
  while (i < numStudents)
  {
    printf("%d\n", students[i]->predictedScore);
    i++;
  }

}

int main()
{
  read();
  setScores();
  write();
  exit(0);
}

