#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct node
{
  int vertice;
  struct node *next;
} *Edge;
typedef struct stack
{
  int vertice;
  struct stack *next;
  struct stack *prev;
} *Stack;
typedef struct graph
{
  int numVertices;
  int *lenght;
  int *history;
  Edge *edges;
  int *inEdges;
} *Graph;
Graph createGraph(int num);
void addEdge(Graph graph, int v1, int v2);
Edge createEdge(int vertice);
void DFS(Graph graph);
void explore(Graph graph, int i);
int max(int a, int b);
void deleteGraph(Graph graph);
void deleteEdges(Edge edge);
Edge pop(Edge edge);
Stack createStack(int v);
Stack pushStack(Stack stack, int v);
Stack popStack(Stack stack);
int largestLength = 1;
int inDegreeVertices = 0;
int main()
{
  int i;
  int v1;
  int v2;
  int dominoes;
  int dependencies;
  if (2 <= 0)
  {
    return -1;
  }
  else
  {
    dominoes = new_sym_var(sizeof(int) * 8);
    dependencies = new_sym_var(sizeof(int) * 8);
    
  }

  Graph DAG = createGraph(dominoes);
  for (i = 1; i <= dependencies; i++)
  {
    if (2 <= 0)
    {
      return -1;
    }
    else
    {
      v1 = new_sym_var(sizeof(int) * 8);
      v2 = new_sym_var(sizeof(int) * 8);
      
    }

    addEdge(DAG, v1, v2);
  }

  DFS(DAG);
  return 0;
}

int max(int a, int b)
{
  return (a > b) ? (a) : (b);
}

Graph createGraph(int num)
{
  int i;
  Graph graph = malloc(sizeof(struct graph));
  graph->numVertices = num;
  graph->lenght = malloc((sizeof(int)) * (num + 1));
  graph->history = malloc((sizeof(int)) * (num + 1));
  graph->edges = malloc((sizeof(Edge)) * (num + 1));
  graph->inEdges = malloc((sizeof(int)) * (num + 1));
  for (i = 1; i <= num; i++)
  {
    graph->history[i] = 0;
    graph->edges[i] = 0;
    graph->inEdges[i] = 0;
    graph->lenght[i] = 1;
  }

  return graph;
}

void addEdge(Graph graph, int v1, int v2)
{
  Edge newEdge = createEdge(v2);
  newEdge->next = graph->edges[v1];
  graph->edges[v1] = newEdge;
  graph->inEdges[v2]++;
}

Edge createEdge(int vert)
{
  Edge edge = malloc(sizeof(struct node));
  edge->vertice = vert;
  edge->next = 0;
  return edge;
}

void DFS(Graph graph)
{
  int i;
  for (i = 1; i <= graph->numVertices; i++)
  {
    if ((!graph->inEdges[i]) && (graph->history[i] == 0))
    {
      explore(graph, i);
      inDegreeVertices++;
    }
    else
    {
      
    }

  }

  printf("%d %d\n", inDegreeVertices, largestLength);
}

void explore(Graph graph, int s)
{
  Stack stack = 0;
  stack = pushStack(stack, s);
  while (stack)
  {
    s = stack->vertice;
    stack = popStack(stack);
    graph->history[s] = 1;
    Edge edge = graph->edges[s];
    for (; edge; edge = edge->next)
    {
      graph->inEdges[edge->vertice]--;
      if ((graph->history[edge->vertice] == 0) && (graph->inEdges[edge->vertice] == 0))
      {
        stack = pushStack(stack, edge->vertice);
      }
      else
      {
        
      }

      graph->lenght[edge->vertice] = max(graph->lenght[edge->vertice], 1 + graph->lenght[s]);
      largestLength = max(largestLength, graph->lenght[edge->vertice]);
    }

  }

}

void deleteGraph(Graph graph)
{
  int i;
  free(graph->lenght);
  free(graph->history);
  for (i = 1; i <= graph->numVertices; i++)
  {
    deleteEdges(graph->edges[i]);
  }

  free(graph->inEdges);
  free(graph->edges);
  free(graph);
}

void deleteEdges(Edge edge)
{
  while (edge)
    edge = pop(edge);

}

Edge pop(Edge edge)
{
  Edge nextEdge = edge->next;
  free(edge);
  return nextEdge;
}

Stack createStack(int v)
{
  Stack newStack = malloc(sizeof(struct stack));
  newStack->vertice = v;
  newStack->next = 0;
  return newStack;
}

Stack pushStack(Stack stack, int v)
{
  Stack newStack = createStack(v);
  newStack->prev = stack;
  if (stack)
  {
    stack->next = newStack;
  }
  else
  {
    
  }

  return newStack;
}

Stack popStack(Stack stack)
{
  Stack previous = stack->prev;
  free(stack);
  if (previous)
  {
    previous->next = 0;
  }
  else
  {
    
  }

  return previous;
}

