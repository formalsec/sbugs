#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>


typedef struct Seq
{
  int *array;
  int size;
} Seq;
void print_sequence(Seq *a);
Seq *read_sequence(void);
int *list(int arr[], int n);
int lcs(Seq *a, Seq *b);
void free_sequence(Seq *a);
int main()
{
  Seq *a;
  Seq *b;
  char command;
  int lcs_result;
  int *resposta;
  int i;
  int *arrayOne = 0;
  int val;
  int s = 0;
  if (1 != 1)
  {
    return -1;
  }
  else
  {
    command = new_sym_var(sizeof(char) * 8);
    
  }

  if (command == '1')
  {
    while (1 != EOF)
    {
      val = new_sym_var(sizeof(int) * 8);
      arrayOne = (int *) realloc(arrayOne, (sizeof(int)) * (s + 1));
      arrayOne[s] = val;
      s++;
    }

    resposta = list(arrayOne, s);
    printf("%d %d\n", resposta[0], resposta[1]);
    free(arrayOne);
  }
  else
  {
    
  }

  if (command == '2')
  {
    a = read_sequence();
    b = read_sequence();
    int **table = (int **) malloc((a->size + 1) * (sizeof(int *)));
    for (i = 0; i < a->size; i++)
    {
      table[i] = (int *) malloc((b->size + 1) * (sizeof(int)));
    }

    lcs_result = lcs(a, b);
    printf("%d\n", lcs_result);
    for (i = 0; i < a->size; i++)
    {
      free(table[i]);
    }

    free(table);
    free_sequence(a);
    free_sequence(b);
  }
  else
  {
    
  }

  return 0;
}

Seq *read_sequence(void)
{
  Seq *a;
  int i;
  int space;
  int counter;
  int counter2;
  int ans;
  int temp;
  char c = ' ';
  ans = 1;
  counter2 = 0;
  space = 1;
  ;
  counter = 0;
  a = (Seq *) malloc(sizeof(Seq));
  a->array = (int *) malloc(space * (sizeof(int)));
  a->size = 0;
  for (i = 0; (c != '\n') && (c != EOF); i++)
  {
    if (counter == space)
    {
      space += 1;
      ;
      a->array = (int *) realloc(a->array, space * (sizeof(int)));
    }
    else
    {
      
    }

    if (1 != 1)
    {
      break;
    }
    else
    {
      temp = new_sym_var(sizeof(int) * 8);
      
    }

    if (temp == ans)
    {
      counter2++;
      if (counter2 == 3)
      {
        counter2 = 0;
        i--;
      }
      else
      {
        
      }

      continue;
    }
    else
    {
      a->array[i] = temp;
      ans = a->array[i];
    }

    counter += 1;
    a->size += 1;
    c = getchar();
  }

  return a;
}

void print_sequence(Seq *a)
{
  int i;
  for (i = 0; i < a->size; i++)
  {
    printf("%d ", a->array[i]);
  }

  puts(" ");
  printf("size:%d\n", a->size);
}

void free_sequence(Seq *a)
{
  free(a->array);
  free(a);
}

int *lis(Seq *a)
{
  int i;
  int j;
  int max;
  int counter;
  int table[a->size];
  static int result[2];
  i = 0;
  j = 0;
  max = 0;
  counter = 0;
  result[0] = 0;
  result[1] = 0;
  for (i = 0; i < a->size; i++)
  {
    table[i] = 1;
  }

  for (i = 2; i < a->size; i++)
  {
    for (j = 1; j < i; j++)
    {
      if ((a->array[i] > a->array[j]) && (table[i] < (table[j] + 1)))
      {
        table[i] = table[i] + 1;
        if (table[i] > max)
        {
          max = table[i];
          counter = 1;
        }
        else
        {
          
        }

        if (table[i] == max)
        {
          counter++;
        }
        else
        {
          
        }

      }
      else
      {
        
      }

    }

  }

  result[0] = max;
  result[1] = counter;
  return result;
}

int lcs(Seq *a, Seq *b)
{
  int i;
  int j;
  int result;
  int tabela[b->size];
  int current = 0;
  if ((a->size == 0) || (b->size == 0))
  {
    return 0;
  }
  else
  {
    
  }

  for (j = 0; j < b->size; j++)
  {
    tabela[j] = 0;
  }

  for (i = 0; i < a->size; i++)
  {
    current = 0;
    for (j = 0; j < b->size; j++)
    {
      if (a->array[i] == b->array[j])
      {
        if ((current + 1) > tabela[j])
        {
          tabela[j] = current + 1;
        }
        else
        {
          
        }

      }
      else
      {
        
      }

      if (a->array[i] > b->array[j])
      {
        if (tabela[j] > current)
        {
          current = tabela[j];
        }
        else
        {
          
        }

      }
      else
      {
        
      }

    }

  }

  result = 0;
  for (i = 0; i < b->size; i++)
  {
    if (tabela[i] > result)
    {
      result = tabela[i];
    }
    else
    {
      
    }

  }

  return result;
}

int *list(int arr[], int n)
{
  int aux[n];
  int j;
  int i;
  int tamanho_maximo = 1;
  int c = 0;
  int cp[n];
  static int resposta[2];
  aux[0] = 1;
  cp[0] = 1;
  for (i = 1; i < n; i++)
  {
    aux[i] = 1;
    cp[i] = 1;
    for (j = 0; j < i; j++)
    {
      if ((arr[i] > arr[j]) && (aux[i] < (aux[j] + 1)))
      {
        aux[i] = aux[j] + 1;
        cp[i] = cp[j];
        if (tamanho_maximo < aux[i])
        {
          tamanho_maximo = aux[i];
        }
        else
        {
          
        }

      }
      else
      {
        if (aux[i] == (aux[j] + 1))
        {
          cp[i] += cp[j];
        }
        else
        {
          
        }

      }

    }

  }

  for (i = 0; i < n; i++)
  {
    if (aux[i] == tamanho_maximo)
    {
      c += cp[i];
    }
    else
    {
      
    }

  }

  resposta[0] = tamanho_maximo;
  resposta[1] = c;
  return resposta;
}

