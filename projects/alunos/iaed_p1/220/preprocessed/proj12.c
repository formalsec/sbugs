#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>


void adiciona_produto();
void add_stock();
void remove_stock_produto();
void altera_preco_prod();
void nova_encomenda();
void sair();
typedef struct 
{
  int ProductInd[10000];
  char descricao[63];
  int preco;
  int peso;
  int qtd;
} Produto;
typedef struct 
{
  int EncomendaInd[500];
  int ide;
  int peso;
  Produto prod;
} Encomenda;
int ProductInd = 0;
int EncomendaInd = 0;
Produto prod[10000];
Encomenda encomenda[500];
int main()
{
  int ProductInd = 0;
  char descricao[63];
  int preco;
  int peso;
  int qtd;
  int qtd_n;
  char menu;
  while (1)
  {
    menu = getchar();
    switch (menu)
    {
      case 'a':
        for (int descricao_index = 0; descricao_index < 10; descricao_index++)
      {
        descricao[descricao_index] = new_sym_var(sizeof(char) * 8);
      }

        descricao[10 - 1] = '\0';
        preco = new_sym_var(sizeof(int) * 8);
        peso = new_sym_var(sizeof(int) * 8);
        qtd = new_sym_var(sizeof(int) * 8);
        adiciona_produto();
        break;

      case 'q':
        ProductInd = new_sym_var(sizeof(int) * 8);
        qtd_n = new_sym_var(sizeof(int) * 8);
        add_stock();
        break;

      case 'r':
        ProductInd = new_sym_var(sizeof(int) * 8);
        qtd_n = new_sym_var(sizeof(int) * 8);
        remove_stock_produto();
        break;

      case 'P':
        ProductInd = new_sym_var(sizeof(int) * 8);
        preco = new_sym_var(sizeof(int) * 8);
        altera_preco_prod();
        break;

      case 'N':
        nova_encomenda();
        break;

      case 'x':
        exit(0);

      default:
        printf("ERRO: Comando desconhecido \n");

    }

    getchar();
  }

  return 0;
}

void adiciona_produto(char *descricao, int preco, int peso, int qtd)
{
  if (ProductInd != 10000)
  {
    strcpy(prod[ProductInd].descricao, descricao);
    prod[ProductInd].preco = preco;
    prod[ProductInd].peso = peso;
    prod[ProductInd].qtd = qtd;
  }
  else
  {
    
  }

  printf("Novo produto %d.\n", ProductInd);
  ProductInd++;
}

void add_stock(int ProductInd, int qtd_n)
{
  if (ProductInd > 9999)
  {
    printf(" Impossivel adicionar produto%d ao stock. Produto inexistente\n", ProductInd);
  }
  else
  {
    prod[ProductInd].qtd += qtd_n;
  }

}

void remove_stock_produto(int ProductInd, int qtd_n)
{
  if (ProductInd > 9999)
  {
    printf(" Impossivel adicionar produto%d ao stock. Produto inexistente\n", ProductInd);
  }
  else
  {
    prod[ProductInd].qtd -= qtd_n;
  }

}

void altera_preco_prod(int ProductInd, int preco)
{
  if (ProductInd > 9999)
  {
    printf("ERRO: Impossivel alterar preco do produto %d. Produto inexistente.\n", ProductInd);
  }
  else
  {
    prod[ProductInd].preco = preco;
  }

}

void nova_encomenda()
{
  if (EncomendaInd != 500)
  {
    encomenda[EncomendaInd].ide = 0;
  }
  else
  {
    
  }

  printf("Nova encomenda %d.\n", EncomendaInd);
  EncomendaInd++;
}

