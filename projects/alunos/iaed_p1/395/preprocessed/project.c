#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>


typedef struct 
{
  char desc[63];
  int idp;
  int preco;
  int peso;
  int stock;
  int quantidade;
} Produto;
typedef struct 
{
  int ide;
  int qtd_p;
  int qtd_p_total;
} Encomenda;
int idprod = 0;
int idenco = 0;
Produto tab_produtos[10000];
Encomenda tab_encomendas[500];
void add_novo_produto()
{
  char nome[63];
  Produto new_prod;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  new_prod.preco = new_sym_var(sizeof(int) * 8);
  new_prod.peso = new_sym_var(sizeof(int) * 8);
  new_prod.stock = new_sym_var(sizeof(int) * 8);
  strcpy(new_prod.desc, nome);
  if (idprod < 10000)
  {
    printf("Novo produto %d.\n", idprod);
    new_prod.idp = idprod;
  }
  else
  {
    
  }

  tab_produtos[idprod] = new_prod;
  idprod++;
}

void add_stock()
{
  int id_p;
  int stock_p;
  id_p = new_sym_var(sizeof(int) * 8);
  stock_p = new_sym_var(sizeof(int) * 8);
  if (id_p != tab_produtos[id_p].idp)
  {
    printf("Impossivel adicionar produto %d ao stock. Produto inexistente.\n", id_p);
  }
  else
  {
    
  }

  tab_produtos[id_p].stock += stock_p;
}

void cria_nova_enco()
{
  Encomenda new_enco;
  if (idenco < 500)
  {
    printf("Nova encomenda %d.\n", idenco);
    new_enco.ide = idenco;
  }
  else
  {
    
  }

  tab_encomendas[idenco] = new_enco;
  idenco++;
}

void add_prod_enco()
{
  int id_e;
  int id_p;
  int qtd;
  int stock_aux;
  int peso_aux;
  id_e = new_sym_var(sizeof(int) * 8);
  id_p = new_sym_var(sizeof(int) * 8);
  qtd = new_sym_var(sizeof(int) * 8);
  stock_aux = tab_produtos[id_p].stock;
  peso_aux = tab_produtos[id_p].peso * qtd;
  if (id_e != tab_encomendas[id_e].ide)
  {
    printf("Impossivel adicionar produto %d a encomenda %d. Encomenda inexistente.\n", id_p, id_e);
  }
  else
  {
    
  }

  if (id_p != tab_produtos[id_p].idp)
  {
    printf("Impossivel adicionar produto %d a encomenda %d. Produto inexistente.\n", id_p, id_e);
  }
  else
  {
    
  }

  if ((id_e == tab_encomendas[id_e].ide) && (id_p == tab_produtos[id_p].idp))
  {
    if ((stock_aux < qtd) && (peso_aux > 200))
    {
      printf("Impossivel adicionar produto %d a encomenda %d. Quantidade em stock insuficiente.\n", id_p, id_e);
    }
    else
    {
      
    }

    if ((peso_aux > 200) && (stock_aux < qtd))
    {
      printf("Impossivel adicionar produto %d a encomenda %d. Peso da encomenda excede o maximo de %d.\n", id_p, id_e, 200);
    }
    else
    {
      
    }

    tab_produtos[id_p].quantidade = qtd;
    tab_produtos[id_p].stock -= qtd;
  }
  else
  {
    
  }

}

void remove_stock()
{
  int id_p;
  int qtd_p;
  id_p = new_sym_var(sizeof(int) * 8);
  qtd_p = new_sym_var(sizeof(int) * 8);
  if (id_p != tab_produtos[id_p].idp)
  {
    printf("Impossivel remover stock do produto %d. Produto inexistente.\n", id_p);
  }
  else
  {
    tab_produtos[id_p].stock -= qtd_p;
    if (tab_produtos[id_p].stock < 0)
    {
      printf("Impossivel remover %d unidades do produto %d do stock. Quantidade insuficiente.\n", qtd_p, id_p);
    }
    else
    {
      
    }

    if (tab_produtos[id_p].stock == 0)
    {
      tab_produtos[id_p].stock = 0;
    }
    else
    {
      
    }

  }

}

void remove_prod_enco()
{
  int id_e;
  int id_p;
  id_e = new_sym_var(sizeof(int) * 8);
  id_p = new_sym_var(sizeof(int) * 8);
  if ((tab_encomendas[id_e].ide == id_e) && (tab_produtos[id_p].idp == id_p))
  {
    tab_produtos[id_p].idp -= id_p;
  }
  else
  {
    
  }

  if (tab_encomendas[id_e].ide != id_e)
  {
    printf("Impossivel remover produto %d a encomenda %d. Encomenda inexistente.\n", id_p, id_e);
  }
  else
  {
    
  }

  if (tab_produtos[id_p].idp != id_p)
  {
    printf("Impossivel remover produto %d a encomenda %d. Produto inexistente.\n", id_p, id_e);
  }
  else
  {
    
  }

}

void calcula_custo_enco()
{
  int id_e;
  int i;
  int custo = 0;
  id_e = new_sym_var(sizeof(int) * 8);
  if (tab_encomendas[id_e].ide != id_e)
  {
    printf("Impossivel calcular custo da encomenda %d. Encomenda inexistente.\n", id_e);
  }
  else
  {
    for (i = 0; i <= idprod; i++)
      custo += tab_produtos[i].preco * tab_encomendas[i].qtd_p_total;

    printf("Custo da encomenda %d %d\n", id_e, custo);
  }

}

void altera_preco()
{
  int id_p;
  int new_preco;
  id_p = new_sym_var(sizeof(int) * 8);
  new_preco = new_sym_var(sizeof(int) * 8);
  if (id_p != tab_produtos[id_p].idp)
  {
    printf("Impossivel alterar preco do produto %d. Produto inexistente.\n", id_p);
  }
  else
  {
    tab_produtos[id_p].preco = new_preco;
  }

}

void lista_desc_qtd_prod()
{
  int id_e;
  int id_p;
  id_e = new_sym_var(sizeof(int) * 8);
  id_p = new_sym_var(sizeof(int) * 8);
  if ((tab_encomendas[id_e].ide == id_e) && (tab_produtos[id_p].idp == id_p))
  {
    printf("%s %d\n", tab_produtos[id_p].desc, tab_produtos[id_p].quantidade);
  }
  else
  {
    
  }

  if (tab_encomendas[id_e].ide != id_e)
  {
    printf("Impossivel listar encomenda %d. Encomenda inexistente.\n", id_e);
  }
  else
  {
    
  }

  if (tab_produtos[id_p].idp != id_p)
  {
    printf("Impossivel listar produto %d. Produto inexistente.\n", id_p);
  }
  else
  {
    
  }

}

void lista_ide_max()
{
}

void lista_prod_ex()
{
}

void lista_prod_alfa()
{
}

void selection_sort()
{
}

int main()
{
  char comando;
  while ((comando = getchar()) != 'x')
  {
    switch (comando)
    {
      case 'a':
        add_novo_produto();
        break;

      case 'q':
        add_stock();
        break;

      case 'N':
        cria_nova_enco();
        break;

      case 'A':
        add_prod_enco();
        break;

      case 'r':
        remove_stock();
        break;

      case 'R':
        remove_prod_enco();
        break;

      case 'C':
        calcula_custo_enco();
        break;

      case 'p':
        altera_preco();
        break;

      case 'E':
        lista_desc_qtd_prod();
        break;

      case 'm':
        lista_ide_max();
        break;

      case 'l':
        lista_prod_ex();
        break;

      case 'L':
        lista_prod_alfa();
        break;

    }

  }

  return 0;
}

