#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "equipas.h"


pEquipa criarEquipa(char *nome)
{
  pEquipa novaEquipa;
  novaEquipa = (pEquipa) malloc(sizeof(struct equipa));
  novaEquipa->nomeEquipa = (char *) malloc(((sizeof(char)) * strlen(nome)) + 1);
  strcpy(novaEquipa->nomeEquipa, nome);
  novaEquipa->numVitorias = 0;
  return novaEquipa;
}

void libertarEquipa(pEquipa equipaFree)
{
  if (equipaFree != 0)
  {
    free(equipaFree->nomeEquipa);
    free(equipaFree);
  }
  else
  {
    
  }

}

void mostrarEquipa(pEquipa equipa, int numINP)
{
  if (equipa != 0)
  {
    printf("%d %s %d\n", numINP, equipa->nomeEquipa, equipa->numVitorias);
  }
  else
  {
    printf("%d Equipa inexistente.\n", numINP);
  }

}

listaEq criarListaEquipas()
{
  listaEq novaLista = 0;
  return novaLista;
}

listaEq adicionarNovaEquipa(pEquipa novaEquipa, listaEq listaEquipas, int numINP)
{
  listaEq noAtual;
  listaEq noAnterior;
  listaEq novoNo;
  if (listaEquipas == 0)
  {
    listaEquipas = (listaEq) malloc(sizeof(struct noEquipa));
    listaEquipas->ptrEquipa = novaEquipa;
    listaEquipas->proximo = 0;
    return listaEquipas;
  }
  else
  {
    
  }

  novoNo = (listaEq) malloc(sizeof(struct noEquipa));
  novoNo->ptrEquipa = novaEquipa;
  for (noAtual = listaEquipas, noAnterior = 0; noAtual != 0; noAnterior = noAtual, noAtual = noAtual->proximo)
  {
    if (strcmp(noAtual->ptrEquipa->nomeEquipa, novaEquipa->nomeEquipa) == 0)
    {
      printf("%d Equipa existente.\n", numINP);
      libertarEquipa(novoNo->ptrEquipa);
      free(novoNo);
      return listaEquipas;
    }
    else
    {
      if (strcmp(noAtual->ptrEquipa->nomeEquipa, novaEquipa->nomeEquipa) > 0)
      {
        if (noAtual == listaEquipas)
        {
          novoNo->proximo = noAtual;
          return novoNo;
        }
        else
        {
          novoNo->proximo = noAtual;
          noAnterior->proximo = novoNo;
          return listaEquipas;
        }

      }
      else
      {
        
      }

    }

  }

  noAnterior->proximo = novoNo;
  novoNo->proximo = 0;
  return listaEquipas;
}

pEquipa procurarEquipa(listaEq listaEquipas, char *nome)
{
  listaEq no = listaEquipas;
  for (; no != 0; no = no->proximo)
  {
    if (strcmp(no->ptrEquipa->nomeEquipa, nome) == 0)
    {
      return no->ptrEquipa;
    }
    else
    {
      
    }

  }

  return 0;
}

int maxVitorias(listaEq listaEquipas)
{
  listaEq no;
  int max;
  no = listaEquipas;
  max = 0;
  for (; no != 0; no = no->proximo)
  {
    if (max < no->ptrEquipa->numVitorias)
    {
      max = no->ptrEquipa->numVitorias;
    }
    else
    {
      
    }

  }

  return max;
}

void melhoresEquipas(listaEq listaEquipas, int numINP)
{
  int max;
  int first;
  listaEq noLista;
  noLista = listaEquipas;
  first = 1;
  max = maxVitorias(listaEquipas);
  for (; noLista != 0; noLista = noLista->proximo)
  {
    if ((noLista->ptrEquipa->numVitorias == max) && (first == 1))
    {
      printf("%d Melhores %d\n", numINP, max);
      printf("%d * %s\n", numINP, noLista->ptrEquipa->nomeEquipa);
      first = 0;
    }
    else
    {
      if ((noLista->ptrEquipa->numVitorias == max) && (first == 0))
      {
        printf("%d * %s\n", numINP, noLista->ptrEquipa->nomeEquipa);
      }
      else
      {
        
      }

    }

  }

}

void libertarListaEquipas(listaEq listaEquipas)
{
  listaEq no;
  listaEq temp;
  no = listaEquipas;
  while (no != 0)
  {
    temp = no->proximo;
    libertarEquipa(no->ptrEquipa);
    free(no);
    no = temp;
  }

}

