/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "hash_table.h"


unsigned int funcao_tabela(char *nome)
{
  int i;
  int comp = strlen(nome);
  unsigned int valor_tabela = 0;
  for (i = 0; i < comp; i++)
  {
    valor_tabela += nome[i];
    valor_tabela = (valor_tabela + nome[i]) % 1000;
  }

  return valor_tabela;
}

void inserir_tabela(jogo *j, jogo *tabela_hash[1000])
{
  int index = funcao_tabela(j->nome);
  j->next = tabela_hash[index];
  tabela_hash[index] = j;
}

jogo *procura_tabela(char *nome, jogo *tabela_hash[1000])
{
  int index = funcao_tabela(nome);
  jogo *aux = tabela_hash[index];
  while ((aux != 0) && (strncmp(aux->nome, nome, 1024) != 0))
  {
    aux = aux->next;
  }

  return aux;
}

void apaga_tabela(char *nome, jogo *tabela_hash[1000])
{
  int index = funcao_tabela(nome);
  jogo *prev;
  int i = 0;
  jogo *aux = tabela_hash[index];
  while (aux != 0)
  {
    if (strcmp(aux->nome, nome) == 0)
    {
      if ((aux->next == 0) && (i == 0))
      {
        tabela_hash[index] = 0;
      }
      else
      {
        if ((aux->next != 0) && (i == 0))
        {
          tabela_hash[index] = aux->next;
        }
        else
        {
          if ((aux->next == 0) && (i != 0))
          {
            prev->next = 0;
          }
          else
          {
            if ((aux->next != 0) && (i != 0))
            {
              prev->next = aux->next;
            }
            else
            {
              
            }

          }

        }

      }

      free(aux->nome);
      free(aux->equipa1);
      free(aux->equipa2);
      free(aux);
      return;
    }
    else
    {
      
    }

    prev = aux;
    aux = prev->next;
    ++i;
  }

}

void apaga_mem_jogo(jogo *tabela_hash[1000])
{
  int i;
  for (i = 0; i < 1000; i++)
  {
    jogo *el = tabela_hash[i];
    while (el != 0)
    {
      jogo *apaga = el;
      free(el->nome);
      free(el->equipa1);
      free(el->equipa2);
      el = el->next;
      if (apaga != 0)
      {
        free(apaga);
      }
      else
      {
        
      }

    }

  }

}

