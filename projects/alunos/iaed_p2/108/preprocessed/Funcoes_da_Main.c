#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "Funcoes_da_Main.h"


char *__strdup(const char *nome)
{
  size_t tam_string = strlen(nome) + 1;
  void *novo = malloc(tam_string);
  if (novo == 0)
  {
    return 0;
  }
  else
  {
    
  }

  return (char *) memcpy(novo, nome, tam_string);
}

int compara(const void *nome1, const void *nome2)
{
  const char *p_nome1 = *((const char **) nome1);
  const char *p_nome2 = *((const char **) nome2);
  return strcmp(p_nome1, p_nome2);
}

void a(int contador, int *max_jogos, int *max_equipas, int *n_jogos, p_jogo **p_tab_j, p_equipa **p_tab_e, link *head, link *tail)
{
  char temp[1024];
  char equipa1[1024];
  char equipa2[1024];
  int score1;
  int score2;
  char *nome;
  for (int temp_index = 0; temp_index < 10; temp_index++)
  {
    temp[temp_index] = new_sym_var(sizeof(char) * 8);
  }

  temp[10 - 1] = '\0';
  for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
  {
    equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa1[10 - 1] = '\0';
  for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
  {
    equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (JogoProcura(max_jogos, temp, p_tab_j) != 0)
  {
    printf("%d Jogo existente.\n", contador);
  }
  else
  {
    p_equipa pont_e1;
    p_equipa pont_e2;
    pont_e1 = EquipaProcura(max_equipas, equipa1, p_tab_e);
    pont_e2 = EquipaProcura(max_equipas, equipa2, p_tab_e);
    if ((pont_e1 == 0) || (pont_e2 == 0))
    {
      printf("%d Equipa inexistente.\n", contador);
    }
    else
    {
      p_jogo jogo;
      jogo = malloc(sizeof(struct jogo));
      nome = __strdup(temp);
      jogo->nome_j = nome;
      jogo->score1 = score1;
      jogo->score2 = score2;
      if (score1 > score2)
      {
        pont_e1->jogos_ganhos += 1;
      }
      else
      {
        if (score1 < score2)
        {
          pont_e2->jogos_ganhos += 1;
        }
        else
        {
          
        }

      }

      jogo->equipa1 = pont_e1;
      jogo->equipa2 = pont_e2;
      JogoInsereLista(jogo, head, tail);
      JogoInsereHash(max_jogos, n_jogos, jogo, p_tab_j);
    }

  }

}

void p(int contador, int *max_jogos, p_jogo **p_tab_j)
{
  char nome[1024];
  p_jogo jogo;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  jogo = JogoProcura(max_jogos, nome, p_tab_j);
  if (jogo == 0)
  {
    printf("%d Jogo inexistente.\n", contador);
  }
  else
  {
    char *nome_e1;
    char *nome_e2;
    nome_e1 = jogo->equipa1->nome;
    nome_e2 = jogo->equipa2->nome;
    printf("%d %s %s %s %d %d\n", contador, jogo->nome_j, nome_e1, nome_e2, jogo->score1, jogo->score2);
  }

}

void s(int contador, int *max_jogos, p_jogo **p_tab_j)
{
  char nome[1024];
  int novo_score1;
  int novo_score2;
  p_jogo jogo;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  novo_score1 = new_sym_var(sizeof(int) * 8);
  novo_score2 = new_sym_var(sizeof(int) * 8);
  jogo = JogoProcura(max_jogos, nome, p_tab_j);
  if (jogo == 0)
  {
    printf("%d Jogo inexistente.\n", contador);
  }
  else
  {
    if (novo_score1 > novo_score2)
    {
      jogo->equipa1->jogos_ganhos += 1;
    }
    else
    {
      
    }

    if (novo_score2 > novo_score1)
    {
      jogo->equipa2->jogos_ganhos += 1;
    }
    else
    {
      
    }

    if (jogo->score1 > jogo->score2)
    {
      jogo->equipa1->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    if (jogo->score2 > jogo->score1)
    {
      jogo->equipa2->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    jogo->score1 = novo_score1;
    jogo->score2 = novo_score2;
  }

}

void r(int contador, int *max_jogos, int *n_jogos, p_jogo **p_tab_j, link *head, link *tail)
{
  char nome[1024];
  p_jogo jogo;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  jogo = JogoProcura(max_jogos, nome, p_tab_j);
  if (jogo == 0)
  {
    printf("%d Jogo inexistente.\n", contador);
  }
  else
  {
    if (jogo->score1 > jogo->score2)
    {
      jogo->equipa1->jogos_ganhos -= 1;
    }
    else
    {
      if (jogo->score1 < jogo->score2)
      {
        jogo->equipa2->jogos_ganhos -= 1;
      }
      else
      {
        
      }

    }

    JogoApagaHash(jogo, max_jogos, n_jogos, p_tab_j);
    JogoApagaLista(jogo, head, tail);
  }

}

void l(int contador, link head)
{
  link t;
  for (t = head; t != 0; t = t->next)
  {
    printf("%d %s %s %s %d %d\n", contador, t->jogo->nome_j, t->jogo->equipa1->nome, t->jogo->equipa2->nome, t->jogo->score1, t->jogo->score2);
  }

}

void g(int contador, int n_equipas, int max_equipas, p_equipa *tab_e)
{
  if (n_equipas > 0)
  {
    int maior;
    int i;
    int j;
    int n_vencedores;
    const char **lista_vencedores;
    lista_vencedores = malloc(n_equipas * (sizeof(char *)));
    maior = 0;
    j = 0;
    n_vencedores = 0;
    for (i = 0; i < max_equipas; i++)
    {
      if ((tab_e[i] != 0) && (tab_e[i]->jogos_ganhos > maior))
      {
        maior = tab_e[i]->jogos_ganhos;
      }
      else
      {
        
      }

    }

    for (i = 0; i < max_equipas; i++)
    {
      if ((tab_e[i] != 0) && (tab_e[i]->jogos_ganhos == maior))
      {
        lista_vencedores[j] = tab_e[i]->nome;
        j += 1;
        n_vencedores += 1;
      }
      else
      {
        
      }

    }

    qsort(lista_vencedores, n_vencedores, sizeof(char *), compara);
    printf("%d Melhores %d\n", contador, maior);
    for (i = 0; i < n_vencedores; i++)
    {
      printf("%d * %s\n", contador, lista_vencedores[i]);
    }

    free(lista_vencedores);
  }
  else
  {
    
  }

}

void A(int contador, int *max_equipas, int *n_equipas, p_equipa **p_tab_e)
{
  char temp[1024];
  char *nome;
  for (int temp_index = 0; temp_index < 10; temp_index++)
  {
    temp[temp_index] = new_sym_var(sizeof(char) * 8);
  }

  temp[10 - 1] = '\0';
  if (EquipaProcura(max_equipas, temp, p_tab_e) != 0)
  {
    printf("%d Equipa existente.\n", contador);
  }
  else
  {
    p_equipa equipa;
    nome = __strdup(temp);
    equipa = malloc(sizeof(struct equipa));
    equipa->jogos_ganhos = 0;
    equipa->nome = nome;
    EquipaInsere(max_equipas, n_equipas, equipa, p_tab_e);
  }

}

void P(int contador, int *max_equipas, p_equipa **p_tab_e)
{
  char nome[1024];
  p_equipa equipa;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  equipa = EquipaProcura(max_equipas, nome, p_tab_e);
  if (equipa == 0)
  {
    printf("%d Equipa inexistente.\n", contador);
  }
  else
  {
    printf("%d %s %d\n", contador, equipa->nome, equipa->jogos_ganhos);
  }

}

void liberta(int max_equipas, p_equipa *tab_e, p_jogo *tab_j, link head)
{
  link t;
  link aux;
  int i;
  for (i = 0; i < max_equipas; i++)
  {
    if (tab_e[i] != 0)
    {
      free(tab_e[i]->nome);
      free(tab_e[i]);
    }
    else
    {
      
    }

  }

  free(tab_e);
  free(tab_j);
  t = head;
  while (t != 0)
  {
    aux = t->next;
    free(t->jogo->nome_j);
    free(t->jogo);
    free(t);
    t = aux;
  }

}

