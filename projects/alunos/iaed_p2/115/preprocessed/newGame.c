#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "newGame.h"


int hashU(char *v, int M)
{
  int h;
  for (h = 0; (*v) != '\0'; v++)
    h += *v;

  h = h % M;
  return h;
}

gameNodeP newGame(TeamsHash *HashT, char *name, char *eq1, char *eq2, int score1, int score2)
{
  Game *game;
  teamNodeP x;
  gameNodeP new_game;
  int a = hashU(eq1, HashT->size);
  int b = hashU(eq2, HashT->size);
  teamNodeP *headsT = HashT->headsT;
  game = (Game *) malloc(sizeof(Game));
  game->name = (char *) malloc(((sizeof(char)) * strlen(name)) + 1);
  strcpy(game->name, name);
  for (x = headsT[a]; x != 0; x = x->next)
  {
    if (strcmp(x->team->name, eq1) == 0)
    {
      game->team1 = x->team;
      if (score1 > score2)
      {
        x->team->wins++;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

  }

  for (x = headsT[b]; x != 0; x = x->next)
  {
    if (strcmp(x->team->name, eq2) == 0)
    {
      game->team2 = x->team;
      if (score2 > score1)
      {
        x->team->wins++;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

  }

  game->score1 = score1;
  game->score2 = score2;
  new_game = newGameNode(game);
  return new_game;
}

gameNodeP newGameNode(Game *game)
{
  GameNode *newGame = (GameNode *) malloc(sizeof(GameNode));
  newGame->game = game;
  newGame->nextH = 0;
  newGame->nextL = 0;
  newGame->previous = 0;
  newGame->prevH = 0;
  return newGame;
}

void removeWin(Game *game)
{
  if (game->score1 > game->score2)
  {
    game->team1->wins--;
  }
  else
  {
    if (game->score1 < game->score2)
    {
      game->team2->wins--;
    }
    else
    {
      
    }

  }

}

