#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "equipa.h"
#include "hash.h"
#include "strdup.h"


link_e createEquipa(const char *name, link_e next)
{
  link_e x = (link_e) malloc(sizeof(node_e));
  x->e.name = strdup(name);
  x->e.wins = 0;
  x->next = next;
  return x;
}

void freeEquipa(link_e x)
{
  free(x->e.name);
  free(x);
}

void pushEquipa(link_e *head, const char *name)
{
  link_e x;
  if ((*head) == 0)
  {
    *head = createEquipa(name, 0);
    return;
  }
  else
  {
    
  }

  x = createEquipa(name, *head);
  *head = x;
  return;
}

void popEquipa(link_e *head, const char *name)
{
  link_e x = *head;
  if (strcmp(x->e.name, name) == 0)
  {
    *head = (*head)->next;
    freeEquipa(x);
    return;
  }
  else
  {
    
  }

  while (x->next != 0)
  {
    if (strcmp(x->next->e.name, name) == 0)
    {
      link_e tmp = x->next;
      x->next = x->next->next;
      freeEquipa(tmp);
      return;
    }
    else
    {
      
    }

    x = x->next;
  }

}

HT_E initEquipa(int m)
{
  HT_E new = (HT_E) malloc(sizeof(ht_e));
  new->L = (link_e *) malloc(m * (sizeof(link_e)));
  new->M = m;
  return new;
}

void insertEquipa(HT_E Equipas, const char *name)
{
  int index = hash(name, Equipas->M);
  pushEquipa(&Equipas->L[index], name);
}

void removeEquipa(HT_E Equipas, const char *name)
{
  int index = hash(name, Equipas->M);
  popEquipa(&Equipas->L[index], name);
}

Equipa *searchEquipa(HT_E Equipas, const char *name)
{
  int index = hash(name, Equipas->M);
  link_e x = Equipas->L[index];
  for (; x != 0; x = x->next)
  {
    if (strcmp(x->e.name, name) == 0)
    {
      return &x->e;
    }
    else
    {
      
    }

  }

  return 0;
}

void incWin(HT_E Equipas, const char *name, int direction)
{
  Equipa *ptr = searchEquipa(Equipas, name);
  if (ptr != 0)
  {
    if (direction > 0)
    {
      ptr->wins++;
    }
    else
    {
      ptr->wins--;
    }

  }
  else
  {
    
  }

}

