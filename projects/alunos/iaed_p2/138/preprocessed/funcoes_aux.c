#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "structs.h"
#include "funcoes_aux.h"


int calcula_chave(char nome[])
{
  int a = 0;
  int len;
  int i;
  int chave;
  len = strlen(nome);
  for (i = 0; i < len; i++)
  {
    a += nome[i];
  }

  chave = (((strlen(nome) * a) * nome[0]) * nome[len - 1]) % 3013;
  return chave;
}

int verifica_se_jogo_existe(int chave, char nome[], noh *cabeca[])
{
  if (cabeca[chave] != 0)
  {
    noh *noh_temp = cabeca[chave];
    while (noh_temp != 0)
    {
      if (strcmp(noh_temp->jogo->nome, nome) == 0)
      {
        return 1;
      }
      else
      {
        noh_temp = noh_temp->prox;
      }

    }

  }
  else
  {
    
  }

  return 0;
}

int verifica_se_equipa_existe(int chave, char equipa[], noh_equipa *cabeca_equipa[])
{
  if (cabeca_equipa[chave] != 0)
  {
    noh_equipa *noh_temp = cabeca_equipa[chave];
    while (noh_temp != 0)
    {
      if (strcmp(noh_temp->equipa, equipa) == 0)
      {
        return 1;
      }
      else
      {
        noh_temp = noh_temp->prox;
      }

    }

  }
  else
  {
    
  }

  return 0;
}

int cmp(const void *a, const void *b)
{
  return strcmp(*((char **) a), *((char **) b));
}

void free_total(int *contador_input, noh *cabeca[], noh_equipa *cabeca_equipa[], fila *fila_jogos)
{
  int i;
  noh *noh_temp;
  noh *noh_apagar;
  noh_equipa *noh_temp_eq;
  noh_equipa *noh_apagar_eq;
  free(contador_input);
  for (i = 0; i < 3013; i++)
  {
    if (cabeca[i] != 0)
    {
      noh_temp = cabeca[i];
      while (noh_temp != 0)
      {
        noh_apagar = noh_temp;
        noh_temp = noh_temp->prox;
        free(noh_apagar->jogo->nome);
        free(noh_apagar->jogo->equipa1);
        free(noh_apagar->jogo->equipa2);
        free(noh_apagar->jogo);
        free(noh_apagar);
      }

    }
    else
    {
      
    }

    if (cabeca_equipa[i] != 0)
    {
      noh_temp_eq = cabeca_equipa[i];
      while (noh_temp_eq != 0)
      {
        noh_apagar_eq = noh_temp_eq;
        noh_temp_eq = noh_temp_eq->prox;
        free(noh_apagar_eq->equipa);
        free(noh_apagar_eq);
      }

    }
    else
    {
      
    }

  }

  if (fila_jogos->cabeca != 0)
  {
    noh_temp = fila_jogos->cabeca;
    while (noh_temp != 0)
    {
      noh_apagar = noh_temp;
      noh_temp = noh_temp->prox_fila;
      free(noh_apagar);
    }

  }
  else
  {
    
  }

  free(fila_jogos);
}

void lista_com_equipas_melhores_e_sort(int *contador_input, int max, noh_equipa *cabeca_equipa[])
{
  char **lista;
  int i;
  int cont;
  int len;
  noh_equipa *noh_temp_eq;
  lista = malloc((sizeof(char *)) * 500);
  cont = 0;
  for (i = 0; i < 3013; i++)
  {
    if (cabeca_equipa[i] != 0)
    {
      noh_temp_eq = cabeca_equipa[i];
      while (noh_temp_eq != 0)
      {
        if (noh_temp_eq->jogos_ganhos == max)
        {
          len = strlen(noh_temp_eq->equipa);
          lista[cont] = malloc((sizeof(char)) * (len + 1));
          strcpy(lista[cont], noh_temp_eq->equipa);
          cont++;
          if (cont >= 500)
          {
            lista = realloc(lista, (sizeof(char *)) * 1000);
          }
          else
          {
            
          }

        }
        else
        {
          
        }

        noh_temp_eq = noh_temp_eq->prox;
      }

    }
    else
    {
      
    }

  }

  qsort(lista, cont, sizeof(char *), cmp);
  for (i = 0; i < cont; i++)
  {
    printf("%d * %s\n", *contador_input, lista[i]);
    free(lista[i]);
  }

  free(lista);
}

