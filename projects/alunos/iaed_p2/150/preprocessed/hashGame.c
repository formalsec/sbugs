#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "hashGame.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>


GAMElink *GAMEinit()
{
  int i;
  GAMElink *Games;
  Games = malloc((sizeof(GAMElink)) * 1009);
  for (i = 0; i < 1009; i++)
  {
    Games[i] = 0;
  }

  return Games;
}

void GAMEinsert(Game *game, GAMElink *Games)
{
  int i = hash(game->name);
  GAMElink next = Games[i];
  Games[i] = malloc(sizeof(struct GAMEnode));
  Games[i]->next = next;
  Games[i]->game = game;
}

Game *GAMEsearch(char *name, GAMElink *Games)
{
  int i = hash(name);
  GAMElink head = Games[i];
  while (head && (strcmp(name, head->game->name) != 0))
  {
    head = head->next;
  }

  if (!head)
  {
    return 0;
  }
  else
  {
    
  }

  return head->game;
}

void GAMEdelete(char *name, GAMElink *Games)
{
  int i = hash(name);
  GAMElink *link = &Games[i];
  GAMElink head = Games[i];
  GAMElink *prev;
  GAMElink tmp;
  for (prev = 0; (*link) != 0; prev = &(*link), link = &(*link)->next)
  {
    tmp = *link;
    if (strcmp(tmp->game->name, name) == 0)
    {
      if (tmp == head)
      {
        *link = tmp->next;
      }
      else
      {
        (*prev)->next = tmp->next;
      }

      destroyGame(tmp->game);
      free(tmp);
      break;
    }
    else
    {
      
    }

  }

}

void GAMESfree(GAMElink *Games)
{
  int i;
  GAMElink head;
  GAMElink tmp;
  for (i = 0; i < 1009; i++)
  {
    head = Games[i];
    while (head)
    {
      destroyGame(head->game);
      tmp = head->next;
      free(head);
      head = tmp;
    }

  }

  free(Games);
}

