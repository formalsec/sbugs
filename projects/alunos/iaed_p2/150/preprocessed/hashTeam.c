#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h> /* para tirar */
#include <string.h>
#include <stdlib.h>
#include "hashTeam.h"


int hash(char *name)
{
  int sum = 0;
  int a = 127;
  for (; (*name) != '\0'; name++)
  {
    sum = ((a * sum) + (*name)) % 1009;
  }

  return sum;
}

TEAMlink *TEAMinit()
{
  int i;
  TEAMlink *Teams;
  Teams = malloc((sizeof(TEAMlink)) * 1009);
  for (i = 0; i < 1009; i++)
  {
    Teams[i] = 0;
  }

  return Teams;
}

void TEAMinsert(Team *team, TEAMlink *Teams)
{
  int i = hash(team->name);
  TEAMlink next = Teams[i];
  Teams[i] = malloc(sizeof(struct TEAMnode));
  Teams[i]->next = next;
  Teams[i]->team = team;
}

Team *TEAMsearch(char *name, TEAMlink *Teams)
{
  int i = hash(name);
  TEAMlink head = Teams[i];
  while (head && (strcmp(name, head->team->name) != 0))
  {
    head = head->next;
  }

  if (!head)
  {
    return 0;
  }
  else
  {
    
  }

  return head->team;
}

void TEAMdelete(Team *team, TEAMlink *Teams)
{
  int i = hash(team->name);
  TEAMlink *link = &Teams[i];
  TEAMlink tmp = 0;
  while (*link)
  {
    tmp = *link;
    if (strcmp(tmp->team->name, team->name) == 0)
    {
      *link = tmp->next;
      destroyTeam(tmp->team);
      free(tmp);
      break;
    }
    else
    {
      link = &(*link)->next;
    }

  }

}

void TEAMSfree(TEAMlink *Teams)
{
  int i;
  TEAMlink head;
  TEAMlink tmp;
  for (i = 0; i < 1009; i++)
  {
    head = Teams[i];
    while (head)
    {
      destroyTeam(head->team);
      tmp = head->next;
      free(head);
      head = tmp;
    }

  }

  free(Teams);
}

