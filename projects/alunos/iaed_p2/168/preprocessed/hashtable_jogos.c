#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "hashtable_jogos.h"


void HTinic_jogos(Jogo **jogos, int max)
{
  int i;
  for (i = 0; i < max; i++)
    jogos[i] = 0;

}

void HTinsere_jogo(Jogo *jogo, Jogo **jogos, int dim)
{
  int chave;
  char *nome;
  Jogo *jogo_aux;
  nome = jogo->nome;
  chave = hash(nome, dim);
  if (jogos[chave] == 0)
  {
    jogos[chave] = jogo;
  }
  else
  {
    jogo_aux = jogos[chave];
    while (jogo_aux->next != 0)
      jogo_aux = jogo_aux->next;

    jogo_aux->next = jogo;
  }

}

void quicksort_jogos(Jogo **jogos, int first, int last)
{
  int i;
  int j;
  int prim;
  Jogo *temp;
  if (first < last)
  {
    prim = first;
    i = first;
    j = last;
    while (i < j)
    {
      while ((jogos[i]->linha_n <= jogos[prim]->linha_n) && (i < last))
        i++;

      while (jogos[j]->linha_n > jogos[prim]->linha_n)
        j--;

      if (i < j)
      {
        temp = jogos[i];
        jogos[i] = jogos[j];
        jogos[j] = temp;
      }
      else
      {
        
      }

    }

    temp = jogos[prim];
    jogos[prim] = jogos[j];
    jogos[j] = temp;
    quicksort_jogos(jogos, first, j - 1);
    quicksort_jogos(jogos, j + 1, last);
  }
  else
  {
    
  }

}

void HTlista_jogos(Jogo **jogos, int dim, int conta_linhas)
{
  Jogo **tabela_jogos;
  Jogo *aux;
  int i;
  int j = 0;
  tabela_jogos = (Jogo **) malloc(sizeof(Jogo));
  for (i = 0; i < dim; i++)
  {
    aux = jogos[i];
    while (aux != 0)
    {
      tabela_jogos[j] = aux;
      aux = aux->next;
      j++;
      tabela_jogos = realloc(tabela_jogos, (j + 1) * (sizeof(Jogo)));
    }

  }

  quicksort_jogos(tabela_jogos, 0, j - 1);
  for (i = 0; i < j; i++)
  {
    printJogo(tabela_jogos[i], conta_linhas);
  }

  free(tabela_jogos);
}

void HTremove_jogo(Jogo *jogo, Jogo **jogos, int dim)
{
  int chave;
  Jogo *aux;
  Jogo *jogo_aux;
  char *nome;
  nome = jogo->nome;
  chave = hash(nome, dim);
  aux = 0;
  jogo_aux = jogos[chave];
  while (strcmp(nome, jogo_aux->nome) != 0)
  {
    aux = jogo_aux;
    jogo_aux = jogo_aux->next;
  }

  if (aux == 0)
  {
    jogos[chave] = jogo_aux->next;
  }
  else
  {
    aux->next = jogo_aux->next;
  }

  freeJogo(jogo_aux);
}

Jogo *HTprocura_jogo(char *nome, Jogo **jogos, int dim)
{
  Jogo *jogo_aux;
  int chave = hash(nome, dim);
  if (jogos[chave] == 0)
  {
    return 0;
  }
  else
  {
    jogo_aux = jogos[chave];
    while ((strcmp(nome, jogo_aux->nome) != 0) && (jogo_aux->next != 0))
      jogo_aux = jogo_aux->next;

    if (strcmp(nome, jogo_aux->nome) == 0)
    {
      return jogo_aux;
    }
    else
    {
      return 0;
    }

  }

}

void HTfree_jogos(Jogo **jogos, int dim)
{
  Jogo *jogo_aux_1;
  Jogo *jogo_aux_2;
  int i;
  for (i = 0; i < dim; i++)
  {
    jogo_aux_1 = jogos[i];
    while (jogo_aux_1 != 0)
    {
      jogo_aux_2 = jogo_aux_1;
      jogo_aux_1 = jogo_aux_1->next;
      freeJogo(jogo_aux_2);
    }

  }

  free(jogos);
}

