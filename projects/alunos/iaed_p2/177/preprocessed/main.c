#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "jogos.h"
#include "sistema.h"


int main()
{
  lista *lista_jogos = inicializa_lista();
  jogo jogos = 0;
  sistema equipas = 0;
  int n_jogos_ganhos;
  int score1;
  int score2;
  int nl = 0;
  char nome[1024];
  char equipa1[1024];
  char equipa2[1024];
  char comando;
  jogos = inicializa_jogo(jogos, 31);
  equipas = inicializa_sistema(equipas, 31);
  while ((comando = getchar()) != 'x')
  {
    switch (comando)
    {
      case 'a':
        nl += 1;
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
      {
        equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
      }

        equipa1[10 - 1] = '\0';
        for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
      {
        equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
      }

        equipa2[10 - 1] = '\0';
        score1 = new_sym_var(sizeof(int) * 8);
        score2 = new_sym_var(sizeof(int) * 8);
        if (pertence_jogo(jogos, nome) == 1)
      {
        printf("%d Jogo existente.\n", nl);
      }
      else
      {
        if ((pertence_equipa(equipas, equipa1) == 0) || (pertence_equipa(equipas, equipa2) == 0))
        {
          printf("%d Equipa inexistente.\n", nl);
        }
        else
        {
          jogos = insere_jogo(jogos, lista_jogos, nome, equipa1, equipa2, score1, score2);
          equipas = insere_vitoria(equipas, equipa1, equipa2, score1, score2);
        }

      }

        break;

      case 'l':
        nl += 1;
        print(lista_jogos, nl);
        break;

      case 'p':
        nl += 1;
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        if (pertence_jogo(jogos, nome) == 0)
      {
        printf("%d Jogo inexistente.\n", nl);
      }
      else
      {
        print_jogo(jogos, nome, nl);
      }

        break;

      case 'r':
        nl += 1;
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        if (pertence_jogo(jogos, nome) == 0)
      {
        printf("%d Jogo inexistente.\n", nl);
      }
      else
      {
        equipas = elimina_vitoria(equipas, jogos, nome);
        jogos = elimina_jogo(jogos, nome);
      }

        break;

      case 's':
        nl += 1;
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        score1 = new_sym_var(sizeof(int) * 8);
        score2 = new_sym_var(sizeof(int) * 8);
        if (pertence_jogo(jogos, nome) == 0)
      {
        printf("%d Jogo inexistente.\n", nl);
      }
      else
      {
        equipas = atualiza_vitoria(equipas, jogos, nome, score1, score2);
        jogos = altera_score(jogos, nome, score1, score2);
      }

        break;

      case 'A':
        nl += 1;
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        if (pertence_equipa(equipas, nome) == 1)
      {
        printf("%d Equipa existente.\n", nl);
      }
      else
      {
        equipas = insere_equipa(equipas, nome, 0);
      }

        break;

      case 'P':
        nl += 1;
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        if (pertence_equipa(equipas, nome) == 0)
      {
        printf("%d Equipa inexistente.\n", nl);
      }
      else
      {
        n_jogos_ganhos = jogos_ganhos(equipas, nome);
        printf("%d %s %d\n", nl, nome, n_jogos_ganhos);
      }

        break;

      case 'g':
        nl += 1;
        tabela(equipas, nl);

    }

  }

  equipas = destroi_sistema(equipas);
  jogos = destroi_jogo(jogos);
  free(lista_jogos);
  return 0;
}

