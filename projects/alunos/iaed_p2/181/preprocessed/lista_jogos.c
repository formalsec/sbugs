#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "lista_jogos.h"


Jogo *cria_jogo(char *nome, Equipa *equipa1, Equipa *equipa2, int score1, int score2)
{
  Jogo *novo_jogo;
  char *nome_jogo;
  novo_jogo = (Jogo *) malloc(sizeof(Jogo));
  nome_jogo = duplica_string(nome);
  novo_jogo->nome = nome_jogo;
  novo_jogo->equipa1 = equipa1;
  novo_jogo->equipa2 = equipa2;
  novo_jogo->resultado[0] = score1;
  novo_jogo->resultado[1] = score2;
  return novo_jogo;
}

Jogo *procura_jogo(ListaJogos *lista, char *nome)
{
  NodeJogo *node_jogo;
  if (lista->inicio == 0)
  {
    return 0;
  }
  else
  {
    
  }

  for (node_jogo = lista->inicio; node_jogo != 0; node_jogo = node_jogo->proximo)
    if (strcmp(node_jogo->jogo->nome, nome) == 0)
  {
    return node_jogo->jogo;
  }
  else
  {
    
  }


  return 0;
}

void altera_resultado(Jogo *jogo, int score1, int score2)
{
  jogo->resultado[0] = score1;
  jogo->resultado[1] = score2;
}

void print_jogo(int numero_linha, Jogo *jogo)
{
  if (jogo == 0)
  {
    return;
  }
  else
  {
    
  }

  printf("%d %s %s %s %d %d\n", numero_linha, jogo->nome, jogo->equipa1->nome, jogo->equipa2->nome, jogo->resultado[0], jogo->resultado[1]);
}

Equipa *vencedor_jogo(Jogo *jogo)
{
  if (jogo->resultado[0] > jogo->resultado[1])
  {
    return jogo->equipa1;
  }
  else
  {
    
  }

  if (jogo->resultado[0] < jogo->resultado[1])
  {
    return jogo->equipa2;
  }
  else
  {
    
  }

  return 0;
}

void adiciona_vitoria(Jogo *jogo, int quantidade)
{
  Equipa *a_ganhar = vencedor_jogo(jogo);
  if (a_ganhar == jogo->equipa1)
  {
    jogo->equipa1->vitorias += quantidade;
  }
  else
  {
    
  }

  if (a_ganhar == jogo->equipa2)
  {
    jogo->equipa2->vitorias += quantidade;
  }
  else
  {
    
  }

}

void free_jogo(Jogo *jogo)
{
  free(jogo->nome);
  free(jogo);
}

NodeJogo *cria_NodeJogo(Jogo *jogo)
{
  NodeJogo *node_jogo;
  node_jogo = (NodeJogo *) malloc(sizeof(NodeJogo));
  node_jogo->jogo = jogo;
  node_jogo->proximo = 0;
  return node_jogo;
}

void free_NodeJogo(NodeJogo *node_jogo)
{
  free_jogo(node_jogo->jogo);
  free(node_jogo);
}

void inicializa_ListaJogos(ListaJogos *lista)
{
  lista->inicio = 0;
}

void adiciona_jogo(ListaJogos *lista, char *nome, Equipa *equipa1, Equipa *equipa2, int score1, int score2)
{
  NodeJogo *novo_jogo;
  Jogo *jogo;
  jogo = cria_jogo(nome, equipa1, equipa2, score1, score2);
  novo_jogo = cria_NodeJogo(jogo);
  novo_jogo->proximo = lista->inicio;
  lista->inicio = novo_jogo;
}

void remove_jogo(ListaJogos *lista, char *nome)
{
  NodeJogo *t;
  NodeJogo *anterior;
  for (t = lista->inicio, anterior = 0; t != 0; anterior = t, t = t->proximo)
  {
    if (strcmp(t->jogo->nome, nome) == 0)
    {
      if (t == lista->inicio)
      {
        lista->inicio = lista->inicio->proximo;
        free_NodeJogo(t);
        break;
      }
      else
      {
        anterior->proximo = t->proximo;
        free_NodeJogo(t);
        break;
      }

    }
    else
    {
      
    }

  }

}

void print_ListaJogosReverse(int numero_linha, NodeJogo *incio_lista)
{
  if (incio_lista == 0)
  {
    return;
  }
  else
  {
    
  }

  print_ListaJogosReverse(numero_linha, incio_lista->proximo);
  print_jogo(numero_linha, incio_lista->jogo);
}

void free_ListaJogo(ListaJogos *lista)
{
  NodeJogo *jogo;
  NodeJogo *proximo_jogo;
  jogo = lista->inicio;
  while (jogo != 0)
  {
    proximo_jogo = jogo->proximo;
    free_NodeJogo(jogo);
    jogo = proximo_jogo;
  }

}

