#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "item.h"
#include "hashtable.h"
#include "hashtableEquipa.h"
#include "itemEquipa.h"


int a(int i, char *str, int *keyJogo, int *tamHash, int *contadorJogos, int *tamHashEquipa)
{
  char nome[1024];
  char equipa1[1024];
  char equipa2[1024];
  int score1 = 0;
  int score2 = 0;
  Item jogo;
  ItemEquipa ptr;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
  {
    equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa1[10 - 1] = '\0';
  for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
  {
    equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (search(*tamHash, nome) != 0)
  {
    printf("%d Jogo existente.\n", i);
    return 0;
  }
  else
  {
    
  }

  if ((searchEquipa(*tamHashEquipa, equipa1) == 0) || (searchEquipa(*tamHashEquipa, equipa2) == 0))
  {
    printf("%d Equipa inexistente.\n", i);
    return 0;
  }
  else
  {
    
  }

  if (score1 > score2)
  {
    ptr = searchEquipa(*tamHashEquipa, equipa1);
    ptr->pontosVencedores = ptr->pontosVencedores + 1;
  }
  else
  {
    
  }

  if (score2 > score1)
  {
    ptr = searchEquipa(*tamHashEquipa, equipa2);
    ptr->pontosVencedores = ptr->pontosVencedores + 1;
  }
  else
  {
    
  }

  jogo = (Item) malloc(sizeof(struct jogo));
  jogo->nome = (char *) malloc((strlen(nome) + 1) * (sizeof(char)));
  strcpy(jogo->nome, nome);
  jogo->equipa1 = (char *) malloc((strlen(equipa1) + 1) * (sizeof(char)));
  strcpy(jogo->equipa1, equipa1);
  jogo->equipa2 = (char *) malloc((strlen(equipa2) + 1) * (sizeof(char)));
  strcpy(jogo->equipa2, equipa2);
  jogo->pontos.score1 = score1;
  jogo->pontos.score2 = score2;
  jogo->keyJogo = *keyJogo;
  insert(*tamHash, jogo);
  *keyJogo = (*keyJogo) + 1;
  *contadorJogos = (*contadorJogos) + 1;
  return 0;
}

int A(int i, char *str, int *tamHashEquipa, int *contadorEquipas)
{
  char nome[1024];
  ItemEquipa equipa;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (searchEquipa(*tamHashEquipa, nome) != 0)
  {
    printf("%d Equipa existente.\n", i);
    return 0;
  }
  else
  {
    
  }

  equipa = (struct equipa *) malloc(sizeof(struct equipa));
  equipa->nomeEquipa = (char *) malloc((strlen(nome) + 1) * (sizeof(char)));
  strcpy(equipa->nomeEquipa, nome);
  equipa->pontosVencedores = 0;
  insertEquipa(*tamHashEquipa, equipa);
  *contadorEquipas = (*contadorEquipas) + 1;
  return 0;
}

int p(int i, char *str, int *tamHash)
{
  char nome[1024];
  Item ptr;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (search(*tamHash, nome) == 0)
  {
    printf("%d Jogo inexistente.\n", i);
    return 0;
  }
  else
  {
    ptr = search(*tamHash, nome);
    printf("%d %s %s %s %d %d\n", i, ptr->nome, ptr->equipa1, ptr->equipa2, ptr->pontos.score1, ptr->pontos.score2);
  }

  return 0;
}

int P(int i, char *str, int *tamHashEquipa)
{
  char nome[1024];
  ItemEquipa ptr;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (searchEquipa(*tamHashEquipa, nome) == 0)
  {
    printf("%d Equipa inexistente.\n", i);
    return 0;
  }
  else
  {
    ptr = searchEquipa(*tamHashEquipa, nome);
    printf("%d %s %d\n", i, ptr->nomeEquipa, ptr->pontosVencedores);
  }

  return 0;
}

void x(int tamHash, int tamHashEquipa)
{
  int i;
  for (i = 0; i < tamHash; ++i)
    deleteTudo(i);

  for (i = 0; i < tamHashEquipa; ++i)
    deleteTudoE(i);

  deleteHeads();
  deleteHeadsE();
}

int compara_ints(const void *p, const void *q)
{
  Item x = *((const Item *) p);
  Item y = *((const Item *) q);
  int xI = x->keyJogo;
  int yI = y->keyJogo;
  if (xI < yI)
  {
    return -1;
  }
  else
  {
    if (xI > yI)
    {
      return 1;
    }
    else
    {
      
    }

  }

  return 0;
}

int l(int e, int contadorJogos, int tamHash)
{
  Item *array;
  Item printA;
  int j;
  array = HashToArray(tamHash, contadorJogos);
  if (array == 0)
  {
    return 0;
  }
  else
  {
    qsort(array, contadorJogos, sizeof(Item), compara_ints);
    for (j = 0; j < contadorJogos; ++j)
    {
      printA = array[j];
      printf("%d %s %s %s %d %d\n", e, printA->nome, printA->equipa1, printA->equipa2, printA->pontos.score1, printA->pontos.score2);
    }

  }

  free(array);
  return 0;
}

int compareEquipas(const void *p, const void *q)
{
  ItemEquipa x = *((const ItemEquipa *) p);
  ItemEquipa y = *((const ItemEquipa *) q);
  char *xI = x->nomeEquipa;
  char *yI = y->nomeEquipa;
  if (strcmp(xI, yI) < 0)
  {
    return -1;
  }
  else
  {
    if (strcmp(xI, yI) > 0)
    {
      return 1;
    }
    else
    {
      
    }

  }

  return 0;
}

int g(int e, int tamHashEquipa, int contadorEquipas)
{
  ItemEquipa *array = 0;
  ItemEquipa *best = 0;
  int i;
  int j = 0;
  int k;
  int pontosMax = -1;
  if (contadorEquipas == 0)
  {
    return 0;
  }
  else
  {
    
  }

  array = HashToArrayEquipa(tamHashEquipa, contadorEquipas);
  if (array == 0)
  {
    return 0;
  }
  else
  {
    best = (ItemEquipa *) malloc((sizeof(ItemEquipa)) * contadorEquipas);
    for (i = 0; i < contadorEquipas; ++i)
    {
      if (array[i]->pontosVencedores == pontosMax)
      {
        best[j] = array[i];
        j++;
      }
      else
      {
        if (array[i]->pontosVencedores > pontosMax)
        {
          for (k = 0; k < contadorEquipas; ++k)
          {
            best[k] = 0;
            pontosMax = array[i]->pontosVencedores;
            j = 0;
            best[j] = array[i];
            j++;
          }

        }
        else
        {
          
        }

      }

    }

    if ((j > 1) && (best[0] != 0))
    {
      qsort(best, j, sizeof(ItemEquipa), compareEquipas);
    }
    else
    {
      
    }

    if (contadorEquipas > 0)
    {
      printf("%d Melhores %d\n", e, best[0]->pontosVencedores);
      for (k = 0; k < j; ++k)
      {
        printf("%d * %s\n", e, best[k]->nomeEquipa);
      }

    }
    else
    {
      
    }

  }

  free(best);
  free(array);
  return 0;
}

int r(int i, char *str, int tamHash, int tamHashEquipa, int *contadorJogos)
{
  char nome[1024];
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (search(tamHash, nome) == 0)
  {
    printf("%d Jogo inexistente.\n", i);
    return 0;
  }
  else
  {
    
  }

  delete(tamHash, nome, tamHashEquipa);
  *contadorJogos = (*contadorJogos) - 1;
  return 0;
}

int s(int i, char *str, int tamHash, int tamHashEquipa)
{
  char nome[1024];
  Item jogo;
  int score1 = 0;
  int score2 = 0;
  ItemEquipa ptr;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (search(tamHash, nome) == 0)
  {
    printf("%d Jogo inexistente.\n", i);
    return 0;
  }
  else
  {
    jogo = search(tamHash, nome);
    if (jogo->pontos.score1 > jogo->pontos.score2)
    {
      if (score1 < score2)
      {
        ptr = searchEquipa(tamHashEquipa, jogo->equipa1);
        ptr->pontosVencedores = ptr->pontosVencedores - 1;
        ptr = searchEquipa(tamHashEquipa, jogo->equipa2);
        ptr->pontosVencedores = ptr->pontosVencedores + 1;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

    if (jogo->pontos.score2 > jogo->pontos.score1)
    {
      if (score2 < score1)
      {
        ptr = searchEquipa(tamHashEquipa, jogo->equipa2);
        ptr->pontosVencedores = ptr->pontosVencedores - 1;
        ptr = searchEquipa(tamHashEquipa, jogo->equipa1);
        ptr->pontosVencedores = ptr->pontosVencedores + 1;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

    if (jogo->pontos.score1 == jogo->pontos.score2)
    {
      if (score1 > score2)
      {
        ptr = searchEquipa(tamHashEquipa, jogo->equipa1);
        ptr->pontosVencedores = ptr->pontosVencedores + 1;
      }
      else
      {
        
      }

      if (score2 > score1)
      {
        ptr = searchEquipa(tamHashEquipa, jogo->equipa2);
        ptr->pontosVencedores = ptr->pontosVencedores + 1;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

    if (score2 == score1)
    {
      if (jogo->pontos.score1 > jogo->pontos.score2)
      {
        ptr = searchEquipa(tamHashEquipa, jogo->equipa1);
        ptr->pontosVencedores = ptr->pontosVencedores - 1;
      }
      else
      {
        
      }

      if (jogo->pontos.score2 > jogo->pontos.score1)
      {
        ptr = searchEquipa(tamHashEquipa, jogo->equipa2);
        ptr->pontosVencedores = ptr->pontosVencedores - 1;
      }
      else
      {
        
      }

    }
    else
    {
      
    }

    jogo->pontos.score1 = score1;
    jogo->pontos.score2 = score2;
  }

  return 0;
}

