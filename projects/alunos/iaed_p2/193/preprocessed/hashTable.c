/*File generated by PreProcessor.py*/


#include "hashTable.h"
#include <stdlib.h>


HashTable *createHashTable(int buckets)
{
  int i;
  HashTable *hashTable;
  if (buckets < 1)
  {
    return 0;
  }
  else
  {
    
  }

  hashTable = (HashTable *) malloc(sizeof(HashTable));
  hashTable->lists = (List **) malloc((sizeof(List *)) * buckets);
  for (i = 0; i < buckets; i++)
  {
    hashTable->lists[i] = creatList();
  }

  hashTable->buckets = buckets;
  return hashTable;
}

void deleteHashTable(HashTable *hashTable, void (*freeFunction)(void *))
{
  int i;
  if (hashTable == 0)
  {
    return;
  }
  else
  {
    
  }

  for (i = 0; i < hashTable->buckets; i++)
  {
    deleteList(hashTable->lists[i], freeFunction);
  }

  free(hashTable->lists);
  free(hashTable);
}

int hash(char *v, int buckets)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (buckets - 1))
    h = ((a * h) + (*v)) % buckets;

  return h;
}

void hashTableInsert(HashTable *hashTable, char *key, void *dataPointer)
{
  int index;
  if (((hashTable == 0) || (key == 0)) || (dataPointer == 0))
  {
    return;
  }
  else
  {
    
  }

  index = hash(key, hashTable->buckets);
  listInsertEnd(hashTable->lists[index], dataPointer);
}

void hashTableRemove(HashTable *hashTable, char *key, int (*compareFunction)(char *, void *), void (*freeFunction)(void *))
{
  int index;
  if (((hashTable == 0) || (key == 0)) || (compareFunction == 0))
  {
    return;
  }
  else
  {
    
  }

  index = hash(key, hashTable->buckets);
  listRemoveElement(hashTable->lists[index], key, compareFunction, freeFunction);
}

link *hashTableSearch(HashTable *hashTable, char *key, int (*compareFunction)(char *, void *))
{
  int index;
  if (((hashTable == 0) || (key == 0)) || (compareFunction == 0))
  {
    return 0;
  }
  else
  {
    
  }

  index = hash(key, hashTable->buckets);
  return listSearch(hashTable->lists[index], key, compareFunction);
}

