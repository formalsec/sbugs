#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "equipa.h"
#include "processos.h"


pEquipa *EQUIPAinit(int max, pEquipa *tab)
{
  int i;
  tab = (pEquipa *) malloc(max * (sizeof(pEquipa)));
  for (i = 0; i < max; i++)
  {
    tab[i] = 0;
  }

  return tab;
}

void EQUIPAinsert(char *nome, int contVencidos, pEquipa *tab, int max)
{
  int i;
  i = goodHash(nome, max);
  while (tab[i] != 0)
  {
    i = (i + 1) % max;
  }

  tab[i] = (pEquipa) malloc(sizeof(struct Equipa));
  tab[i]->nome = strdup(nome);
  tab[i]->contVencidos = contVencidos;
}

pEquipa EQUIPAseach(char *nome, pEquipa *tab, int max)
{
  int i;
  i = goodHash(nome, max);
  while (tab[i] != 0)
  {
    if (strcmp(tab[i]->nome, nome) == 0)
    {
      return tab[i];
    }
    else
    {
      i = (i + 1) % max;
    }

  }

  return 0;
}

int EQUIPAmaxWin(pEquipa *tab, int max)
{
  int maxW = 0;
  int i;
  for (i = 0; i < max; i++)
  {
    if ((tab[i] != 0) && (tab[i]->contVencidos > maxW))
    {
      maxW = tab[i]->contVencidos;
    }
    else
    {
      
    }

  }

  return maxW;
}

int EQUIPAsizeOfList(int ganhos, pEquipa *tab, int max)
{
  int i;
  int sizeList = 0;
  for (i = 0; i < max; i++)
  {
    if ((tab[i] != 0) && (tab[i]->contVencidos == ganhos))
    {
      sizeList++;
    }
    else
    {
      
    }

  }

  return sizeList;
}

void EQUIPAlist(int contComandos, int ganhos, pEquipa *tab, int max)
{
  static char **str;
  int len;
  int sizeList;
  int j;
  int x = 0;
  sizeList = EQUIPAsizeOfList(ganhos, tab, max);
  str = (char **) malloc((sizeof(char *)) * sizeList);
  for (j = 0; j < max; j++)
  {
    if ((tab[j] != 0) && (tab[j]->contVencidos == ganhos))
    {
      len = strlen(tab[j]->nome) + 1;
      str[x] = (char *) malloc((sizeof(char)) * len);
      strcpy(str[x], tab[j]->nome);
      x++;
    }
    else
    {
      
    }

  }

  EQUIPAsort(str, sizeList);
  EQUIPAlistPrintf(str, contComandos, sizeList, ganhos);
  free(str);
}

void EQUIPAsort(char **str, int sizeList)
{
  char *temp;
  int i;
  int j;
  for (i = 0; i < sizeList; ++i)
  {
    for (j = i + 1; j < sizeList; ++j)
    {
      if (strcmp(str[i], str[j]) > 0)
      {
        temp = str[i];
        str[i] = str[j];
        str[j] = temp;
      }
      else
      {
        
      }

    }

  }

}

void EQUIPAlistPrintf(char **str, int contComandos, int sizeList, int ganhos)
{
  int i;
  if (sizeList != 0)
  {
    printf("%d Melhores %d\n", contComandos, ganhos);
  }
  else
  {
    
  }

  for (i = 0; i < sizeList; i++)
  {
    printf("%d * %s\n", contComandos, str[i]);
  }

}

pEquipa *EQUIPAexpand(pEquipa *tabE, int maxE)
{
  int i;
  pEquipa *t = tabE;
  tabE = EQUIPAinit(maxE, tabE);
  for (i = 0; i < (maxE / 2); i++)
  {
    if (t[i] != 0)
    {
      EQUIPAinsert(t[i]->nome, t[i]->contVencidos, tabE, maxE);
    }
    else
    {
      
    }

  }

  free(t);
  return tabE;
}

