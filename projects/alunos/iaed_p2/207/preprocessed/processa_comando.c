#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "funcoes.h"


int get_comando(PRINCIPAL p)
{
  char *comando;
  char *cmd_temp;
  int exit;
  cmd_temp = malloc((sizeof(char)) * 3200);
  fgets(cmd_temp, (sizeof(char)) * 3200, stdin);
  if (((cmd_temp[0] != 'g') && (cmd_temp[0] != 'l')) && (cmd_temp[0] != 'x'))
  {
    comando = strdup(cmd_temp);
    comando = comando + 2;
    exit = exe_comando(cmd_temp[0], comando, p);
    comando = comando - 2;
    free(comando);
    free(cmd_temp);
    return exit;
  }
  else
  {
    exit = exe_comando(cmd_temp[0], " ", p);
    free(cmd_temp);
    return exit;
  }

}

int exe_comando(char action, char *args, PRINCIPAL p)
{
  JOGO j;
  char *nome;
  char *equipa1;
  char *equipa2;
  int score1;
  int score2;
  int len = strlen(args);
  p->input_contador++;
  switch (action)
  {
    case 'a':
      j = (JOGO) malloc(sizeof(struct jogo));
      nome = malloc((sizeof(char)) * (len + 1));
      equipa1 = malloc((sizeof(char)) * (len + 1));
      equipa2 = malloc((sizeof(char)) * (len + 1));
      for (int nome_index = 0; nome_index < 10; nome_index++)
    {
      nome[nome_index] = new_sym_var(sizeof(char) * 8);
    }

      nome[10 - 1] = '\0';
      for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
    {
      equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
    }

      equipa1[10 - 1] = '\0';
      for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
    {
      equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
    }

      equipa2[10 - 1] = '\0';
      score1 = new_sym_var(sizeof(int) * 8);
      score2 = new_sym_var(sizeof(int) * 8);
      j->nome = strdup(nome);
      j->equipa1 = strdup(equipa1);
      j->equipa2 = strdup(equipa2);
      j->score1 = score1;
      j->score2 = score2;
      adiciona_jogo(j, p);
      free(j->nome);
      free(j->equipa1);
      free(j->equipa2);
      free(nome);
      free(equipa1);
      free(equipa2);
      free(j);
      return 1;

    case 'A':
      nome = malloc((sizeof(char)) * (len + 1));
      for (int nome_index = 0; nome_index < 10; nome_index++)
    {
      nome[nome_index] = new_sym_var(sizeof(char) * 8);
    }

      nome[10 - 1] = '\0';
      adiciona_equipa_cmd(nome, p);
      free(nome);
      return 1;

    case 'l':
      lista_jogos(p);
      return 1;

    case 'p':
      nome = malloc((sizeof(char)) * (len + 1));
      for (int nome_index = 0; nome_index < 10; nome_index++)
    {
      nome[nome_index] = new_sym_var(sizeof(char) * 8);
    }

      nome[10 - 1] = '\0';
      procura_jogo_cmd(nome, p);
      free(nome);
      return 1;

    case 'P':
      nome = malloc((sizeof(char)) * (len + 1));
      for (int nome_index = 0; nome_index < 10; nome_index++)
    {
      nome[nome_index] = new_sym_var(sizeof(char) * 8);
    }

      nome[10 - 1] = '\0';
      procura_equipa_cmd(nome, p);
      free(nome);
      nome = 0;
      return 1;

    case 'r':
      nome = malloc((sizeof(char)) * (len + 1));
      for (int nome_index = 0; nome_index < 10; nome_index++)
    {
      nome[nome_index] = new_sym_var(sizeof(char) * 8);
    }

      nome[10 - 1] = '\0';
      remove_jogo_cmd(nome, p);
      free(nome);
      return 1;

    case 's':
      nome = malloc((sizeof(char)) * (len + 1));
      for (int nome_index = 0; nome_index < 10; nome_index++)
    {
      nome[nome_index] = new_sym_var(sizeof(char) * 8);
    }

      nome[10 - 1] = '\0';
      score1 = new_sym_var(sizeof(int) * 8);
      score2 = new_sym_var(sizeof(int) * 8);
      altera_score_cmd(nome, score1, score2, p);
      free(nome);
      return 1;

    case 'g':
      lista_melhor_equipas(p);
      return 1;

    case 'x':
      return 0;

    default:
      return 1;

  }

}

