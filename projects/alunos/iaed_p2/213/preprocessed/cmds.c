#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include "cmds.h"


void cmd_a(int c, System system)
{
  char name[1024];
  char t1[1024];
  char t2[1024];
  int score1;
  int score2;
  Team team1;
  Team team2;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  for (int t1_index = 0; t1_index < 10; t1_index++)
  {
    t1[t1_index] = new_sym_var(sizeof(char) * 8);
  }

  t1[10 - 1] = '\0';
  for (int t2_index = 0; t2_index < 10; t2_index++)
  {
    t2[t2_index] = new_sym_var(sizeof(char) * 8);
  }

  t2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (G_search(system->games, name))
  {
    printf("%d Jogo existente.\n", c);
    return;
  }
  else
  {
    
  }

  team1 = T_search(system->teams, t1);
  team2 = T_search(system->teams, t2);
  if (team1 && team2)
  {
    Game game = newGame(name, team1, team2, score1, score2);
    G_insert(system->games, game);
    add_last(system->games_dl, game);
    if (score1 != score2)
    {
      add_win((score1 > score2) ? (team1) : (team2));
    }
    else
    {
      
    }

  }
  else
  {
    printf("%d Equipa inexistente.\n", c);
  }

}

void cmd_l(int c, System system)
{
  printGames(system->games_dl, c);
  return;
}

void cmd_p(int c, System system)
{
  Game game;
  char name[1024];
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (game = G_search(system->games, name))
  {
    printGame(game, c);
  }
  else
  {
    printf("%d Jogo inexistente.\n", c);
  }

}

void cmd_r(int c, System system)
{
  char name[1024];
  Game game;
  Team win;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if ((game = G_search(system->games, name)) == 0)
  {
    printf("%d Jogo inexistente.\n", c);
    return;
  }
  else
  {
    
  }

  win = winner(game);
  if (win)
  {
    rm_win(win);
  }
  else
  {
    
  }

  rm_node(system->games_dl, game);
  G_delete(system->games, name);
}

void cmd_s(int c, System system)
{
  Game game;
  int score1;
  int score2;
  char name[1024];
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  game = G_search(system->games, name);
  if (game)
  {
    changeScore(game, score1, score2);
  }
  else
  {
    printf("%d Jogo inexistente.\n", c);
  }

}

void cmd_A(int c, System system)
{
  Team team;
  char name[1024];
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (T_search(system->teams, name) == 0)
  {
    team = newTeam(name);
    T_insert(system->teams, team);
  }
  else
  {
    printf("%d Equipa existente.\n", c);
  }

}

void cmd_P(int c, System system)
{
  char name[1024];
  Team team;
  for (int name_index = 0; name_index < 10; name_index++)
  {
    name[name_index] = new_sym_var(sizeof(char) * 8);
  }

  name[10 - 1] = '\0';
  if (team = T_search(system->teams, name))
  {
    printTeamWins(team, c);
  }
  else
  {
    printf("%d Equipa inexistente.\n", c);
  }

}

void cmd_g(int c, System system)
{
  int num;
  int max;
  max = find_winner(system->teams, &num);
  if (max >= 0)
  {
    int i;
    Team *winners = malloc((sizeof(Team)) * num);
    get_winners(system->teams, winners, max);
    sort(winners, 0, num - 1);
    printf("%d Melhores %d\n", c, max);
    for (i = 0; i < num; i++)
    {
      printTeam(winners[i], c);
    }

    free(winners);
  }
  else
  {
    
  }

}

