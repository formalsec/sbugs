#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "aux.h"
#include "hash.h"


void comando_a(int commandLine);
void comando_l(int commandLine);
void comando_p(int commandLine);
void comando_r(int commandLine);
void comando_s(int commandLine);
void comando_A(int commandLine);
void comando_P(int commandLine);
void comando_g(int commandLine);
void comando_a(int commandLine)
{
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game[10 - 1] = '\0';
  for (int team1_index = 0; team1_index < 10; team1_index++)
  {
    team1[team1_index] = new_sym_var(sizeof(char) * 8);
  }

  team1[10 - 1] = '\0';
  for (int team2_index = 0; team2_index < 10; team2_index++)
  {
    team2[team2_index] = new_sym_var(sizeof(char) * 8);
  }

  team2[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if (searchNode(htGames, game, 'g') != 0)
  {
    printf("%d Jogo existente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  if (searchNode(htTeams, team1, 't') == 0)
  {
    printf("%d Equipa inexistente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  if (searchNode(htTeams, team2, 't') == 0)
  {
    printf("%d Equipa inexistente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  createNode(htGames, 'g');
}

void comando_l(int commandLine)
{
  int i;
  List *node;
  Game *gameInfo;
  for (i = 0; i < numGames; i++)
  {
    node = searchNode(htGames, listGames[i], 'g');
    gameInfo = (Game *) node->data;
    printf("%d %s %s %s", commandLine, gameInfo->name, gameInfo->team1, gameInfo->team2);
    printf(" %d %d\n", gameInfo->score1, gameInfo->score2);
  }

}

void comando_p(int commandLine)
{
  Game *gameInfo;
  List *node;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game[10 - 1] = '\0';
  if ((node = searchNode(htGames, game, 'g')) == 0)
  {
    printf("%d Jogo inexistente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  gameInfo = (Game *) node->data;
  printf("%d %s %s %s", commandLine, gameInfo->name, gameInfo->team1, gameInfo->team2);
  printf(" %d %d\n", gameInfo->score1, gameInfo->score2);
}

void comando_r(int commandLine)
{
  List *node;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game[10 - 1] = '\0';
  if ((node = searchNode(htGames, game, 'g')) == 0)
  {
    printf("%d Jogo inexistente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  removeGameNode((Game *) node->data);
}

void comando_s(int commandLine)
{
  List *node;
  for (int game_index = 0; game_index < 10; game_index++)
  {
    game[game_index] = new_sym_var(sizeof(char) * 8);
  }

  game[10 - 1] = '\0';
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  if ((node = searchNode(htGames, game, 'g')) == 0)
  {
    printf("%d Jogo inexistente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  changeGamesWon((Game *) node->data, score1, score2);
  ((Game *) node->data)->score1 = score1;
  ((Game *) node->data)->score2 = score2;
}

void comando_A(int commandLine)
{
  for (int team1_index = 0; team1_index < 10; team1_index++)
  {
    team1[team1_index] = new_sym_var(sizeof(char) * 8);
  }

  team1[10 - 1] = '\0';
  if (searchNode(htTeams, team1, 't') != 0)
  {
    printf("%d Equipa existente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  createNode(htTeams, 't');
}

void comando_P(int commandLine)
{
  Team *teamInfo;
  List *node;
  for (int team1_index = 0; team1_index < 10; team1_index++)
  {
    team1[team1_index] = new_sym_var(sizeof(char) * 8);
  }

  team1[10 - 1] = '\0';
  if ((node = searchNode(htTeams, team1, 't')) == 0)
  {
    printf("%d Equipa inexistente.\n", commandLine);
    return;
  }
  else
  {
    
  }

  teamInfo = (Team *) node->data;
  printf("%d %s %d\n", commandLine, teamInfo->name, teamInfo->gamesWon);
}

void comando_g(int commandLine)
{
  int i;
  int ind;
  int maxGamesWon = -1;
  ind = findBestTeams(&maxGamesWon);
  if ((ind == 0) && (listTeams[0] == 0))
  {
    return;
  }
  else
  {
    
  }

  printf("%d Melhores %d\n", commandLine, maxGamesWon);
  for (i = 0; i < ind; i++)
  {
    printf("%d * %s\n", commandLine, listTeams[i]);
  }

}

int main()
{
  int commandLine = 0;
  char command;
  htGames = htInit();
  htTeams = htInit();
  numGames = 0;
  sizeListGames = 0;
  while ((command = getchar()) != 'x')
  {
    commandLine++;
    switch (command)
    {
      case 'a':
        getchar();
        comando_a(commandLine);
        break;

      case 'l':
        comando_l(commandLine);
        break;

      case 'p':
        getchar();
        comando_p(commandLine);
        break;

      case 'r':
        getchar();
        comando_r(commandLine);
        break;

      case 's':
        getchar();
        comando_s(commandLine);
        break;

      case 'A':
        getchar();
        comando_A(commandLine);
        break;

      case 'P':
        getchar();
        comando_P(commandLine);
        break;

      case 'g':
        comando_g(commandLine);
        break;

    }

    while (getchar() != '\n')
      ;

  }

  htFree(htGames, 'g');
  htFree(htTeams, 't');
  free(listGames);
  return 0;
}

