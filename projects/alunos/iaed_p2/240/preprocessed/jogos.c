#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "header.h"


node_htable_jogos **init_hash_jogos()
{
  int i;
  node_htable_jogos **hashtable_jogos;
  hashtable_jogos = malloc((sizeof(node_htable_jogos)) * 607);
  for (i = 0; i < 607; i++)
    hashtable_jogos[i] = 0;

  return hashtable_jogos;
}

lista_ligada_jogos *init_lista_ligada_j()
{
  lista_ligada_jogos *lista_ligada;
  lista_ligada = malloc(sizeof(lista_ligada_jogos));
  lista_ligada->jogo = malloc(sizeof(jogo *));
  lista_ligada = 0;
  return lista_ligada;
}

jogo *cria_jogo(char *nome_jogo, char *nome_equipa1, char *nome_equipa2, int score1, int score2, node_htable_equipas **entrada_hash_equipas)
{
  jogo *jogo_new = malloc(sizeof(jogo));
  jogo_new->nome_jogo = malloc((sizeof(char *)) * (strlen(nome_jogo) + 1));
  strcpy(jogo_new->nome_jogo, nome_jogo);
  jogo_new->equipa1 = procura_equipa_aux(nome_equipa1, entrada_hash_equipas);
  jogo_new->equipa2 = procura_equipa_aux(nome_equipa2, entrada_hash_equipas);
  jogo_new->score1 = score1;
  jogo_new->score2 = score2;
  if (score1 > score2)
  {
    jogo_new->equipa1->jogos_ganhos++;
  }
  else
  {
    
  }

  if (score1 < score2)
  {
    jogo_new->equipa2->jogos_ganhos++;
  }
  else
  {
    
  }

  return jogo_new;
}

node_htable_jogos *adiciona_ao_node_jogos(node_htable_jogos *pt_lista, jogo *jogo_new)
{
  node_htable_jogos *new = malloc(sizeof(node_htable_jogos));
  new->jogo = jogo_new;
  new->next = pt_lista;
  return new;
}

lista_ligada_jogos **adiciona_a_lista_ligada_j(jogo *jogo_new, lista_ligada_jogos **lista_ligada)
{
  lista_ligada_jogos *new_node;
  lista_ligada_jogos *node_aux = *lista_ligada;
  new_node = malloc(sizeof(lista_ligada_jogos));
  new_node->jogo = jogo_new;
  new_node->next = 0;
  if ((*lista_ligada) == 0)
  {
    *lista_ligada = new_node;
    return lista_ligada;
  }
  else
  {
    
  }

  if (node_aux->next == 0)
  {
    new_node->next = node_aux;
    *lista_ligada = new_node;
    return lista_ligada;
  }
  else
  {
    
  }

  new_node->next = node_aux;
  *lista_ligada = new_node;
  return lista_ligada;
}

jogo *procura_jogo_aux(char *nome_jogo, node_htable_jogos **entrada_hash)
{
  node_htable_jogos *lista_jogos;
  long hash_index;
  hash_index = hash(nome_jogo);
  lista_jogos = entrada_hash[hash_index];
  while ((lista_jogos != 0) && (strcmp(lista_jogos->jogo->nome_jogo, nome_jogo) != 0))
  {
    lista_jogos = lista_jogos->next;
  }

  if (lista_jogos == 0)
  {
    return 0;
  }
  else
  {
    
  }

  return lista_jogos->jogo;
}

void apaga_jogo_hashtable(char *nome_jogo, node_htable_jogos **entrada_hash_jogos)
{
  int hash_index;
  node_htable_jogos *node_hash;
  node_htable_jogos *antes;
  hash_index = hash(nome_jogo);
  node_hash = entrada_hash_jogos[hash_index];
  if ((node_hash != 0) && (strcmp(node_hash->jogo->nome_jogo, nome_jogo) == 0))
  {
    entrada_hash_jogos[hash_index] = entrada_hash_jogos[hash_index]->next;
    free(node_hash->jogo->nome_jogo);
    free(node_hash->jogo);
    free(node_hash);
    return;
  }
  else
  {
    
  }

  while ((node_hash != 0) && (strcmp(node_hash->jogo->nome_jogo, nome_jogo) != 0))
  {
    antes = node_hash;
    node_hash = node_hash->next;
  }

  antes->next = node_hash->next;
  free(node_hash->jogo->nome_jogo);
  free(node_hash->jogo);
  free(node_hash);
}

void apaga_jogo_lista_ligada(char *nome_jogo, lista_ligada_jogos **lista_ligada)
{
  lista_ligada_jogos *node = *lista_ligada;
  lista_ligada_jogos *node_aux;
  if (node->next == 0)
  {
    *lista_ligada = 0;
    free(*lista_ligada);
    return;
  }
  else
  {
    
  }

  if (strcmp(node->jogo->nome_jogo, nome_jogo) == 0)
  {
    *lista_ligada = node->next;
    free(node);
    return;
  }
  else
  {
    
  }

  while (node->next != 0)
  {
    if (strcmp(node->next->jogo->nome_jogo, nome_jogo) == 0)
    {
      node_aux = node->next;
      node->next = node->next->next;
      free(node_aux);
      return;
    }
    else
    {
      
    }

    node = node->next;
  }

}

