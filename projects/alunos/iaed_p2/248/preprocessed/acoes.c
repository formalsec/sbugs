#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "acoes.h"


void a(Lista_jogo *jogos, Hashtable_jogo *jogos_hashtable, Hashtable_equipa *equipas, int linha_input)
{
  char nome[1024];
  char equipa_1[1024];
  char equipa_2[1024];
  int pontuacao_1;
  int pontuacao_2;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  for (int equipa_1_index = 0; equipa_1_index < 10; equipa_1_index++)
  {
    equipa_1[equipa_1_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa_1[10 - 1] = '\0';
  for (int equipa_2_index = 0; equipa_2_index < 10; equipa_2_index++)
  {
    equipa_2[equipa_2_index] = new_sym_var(sizeof(char) * 8);
  }

  equipa_2[10 - 1] = '\0';
  pontuacao_1 = new_sym_var(sizeof(int) * 8);
  pontuacao_2 = new_sym_var(sizeof(int) * 8);
  if (procura_hashtable_jogo(jogos_hashtable, nome) != 0)
  {
    printf("%d Jogo existente.\n", linha_input);
  }
  else
  {
    if ((procura_hashtable_equipa(equipas, equipa_1) == 0) || (procura_hashtable_equipa(equipas, equipa_2) == 0))
    {
      printf("%d Equipa inexistente.\n", linha_input);
    }
    else
    {
      Equipa *equipa;
      Jogo *jogo = cria_jogo(nome, equipa_1, equipa_2, pontuacao_1, pontuacao_2);
      adiciona_lista_jogo(jogos, jogo);
      adiciona_hashtable_jogo(jogos_hashtable, jogo);
      if (pontuacao_1 > pontuacao_2)
      {
        equipa = procura_hashtable_equipa(equipas, equipa_1);
        altera_vitorias_equipas(equipa, equipa->vitorias + 1);
      }
      else
      {
        if (pontuacao_2 > pontuacao_1)
        {
          equipa = procura_hashtable_equipa(equipas, equipa_2);
          altera_vitorias_equipas(equipa, equipa->vitorias + 1);
        }
        else
        {
          
        }

      }

    }

  }

}

void l(Lista_jogo *jogos, int linha_input)
{
  imprime_lista_jogo(jogos, linha_input);
}

void p(Hashtable_jogo *jogos, int linha_input)
{
  Jogo *jogo;
  char nome[1024];
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if ((jogo = procura_hashtable_jogo(jogos, nome)) == 0)
  {
    printf("%d Jogo inexistente.\n", linha_input);
  }
  else
  {
    printf("%d %s %s %s %d %d\n", linha_input, jogo->nome, jogo->equipa_1, jogo->equipa_2, jogo->pontuacao_1, jogo->pontuacao_2);
  }

}

void r(Lista_jogo *jogos, Hashtable_jogo *jogos_hashtable, Hashtable_equipa *equipas, int linha_input)
{
  Jogo *jogo;
  char nome[1024];
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if ((jogo = procura_hashtable_jogo(jogos_hashtable, nome)) == 0)
  {
    printf("%d Jogo inexistente.\n", linha_input);
  }
  else
  {
    Equipa *equipa;
    jogo = remove_hashtable_jogo(jogos_hashtable, nome);
    remove_lista_jogo(jogos, jogo);
    if (jogo->pontuacao_1 > jogo->pontuacao_2)
    {
      equipa = procura_hashtable_equipa(equipas, jogo->equipa_1);
      altera_vitorias_equipas(equipa, equipa->vitorias - 1);
    }
    else
    {
      if (jogo->pontuacao_2 > jogo->pontuacao_1)
      {
        equipa = procura_hashtable_equipa(equipas, jogo->equipa_2);
        altera_vitorias_equipas(equipa, equipa->vitorias - 1);
      }
      else
      {
        
      }

    }

    liberta_jogo(jogo);
  }

}

void s(Hashtable_jogo *jogos, Hashtable_equipa *equipas, int linha_input)
{
  Jogo *jogo;
  char nome[1024];
  int pontuacao_1;
  int pontuacao_2;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  pontuacao_1 = new_sym_var(sizeof(int) * 8);
  pontuacao_2 = new_sym_var(sizeof(int) * 8);
  if ((jogo = procura_hashtable_jogo(jogos, nome)) == 0)
  {
    printf("%d Jogo inexistente.\n", linha_input);
  }
  else
  {
    Equipa *equipa;
    if (jogo->pontuacao_1 > jogo->pontuacao_2)
    {
      equipa = procura_hashtable_equipa(equipas, jogo->equipa_1);
      altera_vitorias_equipas(equipa, equipa->vitorias - 1);
    }
    else
    {
      if (jogo->pontuacao_2 > jogo->pontuacao_1)
      {
        equipa = procura_hashtable_equipa(equipas, jogo->equipa_2);
        altera_vitorias_equipas(equipa, equipa->vitorias - 1);
      }
      else
      {
        
      }

    }

    if (pontuacao_1 > pontuacao_2)
    {
      equipa = procura_hashtable_equipa(equipas, jogo->equipa_1);
      altera_vitorias_equipas(equipa, equipa->vitorias + 1);
    }
    else
    {
      if (pontuacao_2 > pontuacao_1)
      {
        equipa = procura_hashtable_equipa(equipas, jogo->equipa_2);
        altera_vitorias_equipas(equipa, equipa->vitorias + 1);
      }
      else
      {
        
      }

    }

    altera_pontucao_jogo(jogo, pontuacao_1, pontuacao_2);
  }

}

void A(Hashtable_equipa *equipas, int linha_input)
{
  char nome[1024];
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if (procura_hashtable_equipa(equipas, nome) != 0)
  {
    printf("%d Equipa existente.\n", linha_input);
  }
  else
  {
    Equipa *equipa = cria_equipa(nome);
    adiciona_hashtable_equipa(equipas, equipa);
  }

}

void P(Hashtable_equipa *equipas, int linha_input)
{
  Equipa *equipa;
  char nome[1024];
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  if ((equipa = procura_hashtable_equipa(equipas, nome)) == 0)
  {
    printf("%d Equipa inexistente.\n", linha_input);
  }
  else
  {
    printf("%d %s %d\n", linha_input, equipa->nome, equipa->vitorias);
  }

}

int compara(const void *x, const void *y)
{
  Equipa **i = (Equipa **) x;
  Equipa **j = (Equipa **) y;
  char *equipa_1 = (*i)->nome;
  char *equipa_2 = (*j)->nome;
  return strcmp(equipa_1, equipa_2);
}

void g(Hashtable_equipa *equipas, int linha_input)
{
  Tabela_equipas *tabela;
  if ((tabela = maximas_vitorias_equipa(equipas))->equipas != 0)
  {
    int i = 0;
    qsort(tabela->equipas, tabela->n_equipas, sizeof(char *), compara);
    printf("%d Melhores %d\n", linha_input, tabela->vitorias);
    for (; i < tabela->n_equipas; i++)
    {
      printf("%d * %s\n", linha_input, (*(tabela->equipas + i))->nome);
    }

    free(tabela->equipas);
  }
  else
  {
    
  }

  free(tabela);
}

