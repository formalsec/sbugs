/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "estruturas.h"


int funcao_hash(char *v, int M)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (M - 1))
    h = ((a * h) + (*v)) % M;

  return h;
}

EQUIPA **ht_equipas_init()
{
  int i;
  EQUIPA **ht = malloc((sizeof(EQUIPA *)) * 419);
  for (i = 0; i < 419; i++)
    ht[i] = 0;

  return ht;
}

LISTA_EQ *lista_equipas_init()
{
  LISTA_EQ *nova_lista;
  nova_lista = 0;
  return nova_lista;
}

EQUIPA *cria_equipa(char *nome)
{
  EQUIPA *nova_equipa = malloc(sizeof(EQUIPA));
  nova_equipa->nome = malloc((sizeof(char *)) * (strlen(nome) + 1));
  strcpy(nova_equipa->nome, nome);
  nova_equipa->jogos_ganhos = 0;
  return nova_equipa;
}

LISTA_EQ **adiciona_eq_lista(LISTA_EQ **lista, EQUIPA *equipa)
{
  LISTA_EQ *ultimo = *lista;
  LISTA_EQ *nova_lista = malloc(sizeof(LISTA_EQ));
  nova_lista->equipa = equipa;
  nova_lista->next = 0;
  if ((*lista) == 0)
  {
    *lista = nova_lista;
    return lista;
  }
  else
  {
    
  }

  if ((ultimo->next == 0) || (strcmp(equipa->nome, ultimo->equipa->nome) < 0))
  {
    if (strcmp(equipa->nome, ultimo->equipa->nome) < 0)
    {
      nova_lista->next = ultimo;
      *lista = nova_lista;
      return lista;
    }
    else
    {
      
    }

    if (strcmp(equipa->nome, ultimo->equipa->nome) > 0)
    {
      ultimo->next = nova_lista;
      nova_lista->next = 0;
      return lista;
    }
    else
    {
      
    }

  }
  else
  {
    
  }

  while (ultimo->next != 0)
  {
    if (strcmp(equipa->nome, ultimo->next->equipa->nome) < 0)
    {
      nova_lista->next = ultimo->next;
      ultimo->next = nova_lista;
      return lista;
    }
    else
    {
      
    }

    ultimo = ultimo->next;
  }

  ultimo->next = nova_lista;
  nova_lista->next = 0;
  return lista;
}

EQUIPA *procura_equipa_aux(char *nome, EQUIPA **ht)
{
  int hash;
  EQUIPA *equipa;
  hash = funcao_hash(nome, 419);
  equipa = ht[hash];
  if (equipa == 0)
  {
    return 0;
  }
  else
  {
    
  }

  while (equipa != 0)
  {
    if (strcmp(equipa->nome, nome) == 0)
    {
      return equipa;
    }
    else
    {
      
    }

    equipa = equipa->next;
  }

  return 0;
}

void destroi_ht_eq(EQUIPA **ht_eq)
{
  int hash = 0;
  EQUIPA *equipa;
  for (; hash < 419; hash++)
  {
    while (ht_eq[hash] != 0)
    {
      equipa = ht_eq[hash];
      ht_eq[hash] = ht_eq[hash]->next;
      free(equipa->nome);
      free(equipa);
    }

  }

}

void destroi_lista_eq(LISTA_EQ **lista)
{
  LISTA_EQ *node = *lista;
  while (node != 0)
  {
    *lista = node;
    node = node->next;
    free(*lista);
  }

}

