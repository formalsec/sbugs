#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "hash_equipa.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>


int M;
equipa **head_hash_e;
jogo **head_hash_j;
lista_e *mk_lista_e()
{
  lista_e *l = malloc(sizeof(lista_e));
  l->head = (l->last = 0);
  return l;
}

lista_j *mk_lista_j()
{
  lista_j *l = malloc(sizeof(lista_j));
  l->head = (l->last = 0);
  return l;
}

void free_list_equipa(lista_e *l)
{
  while (l->head)
  {
    equipa *tmp = l->head->next;
    free(l->head->nome);
    free(l->head);
    l->head = tmp;
  }

  free(l);
}

void free_list_jogo(lista_j *l)
{
  while (l->head)
  {
    jogo *tmp = l->head->next;
    free(l->head->nome);
    free(l->head);
    l->head = tmp;
  }

  free(l);
}

void add_last_equipa(lista_e *l, const char *n)
{
  equipa *nn = malloc(sizeof(equipa));
  nn->prev = l->last;
  nn->next = 0;
  nn->nome = malloc((sizeof(char)) * (strlen(n) + 1));
  strcpy(nn->nome, n);
  nn->vitorias = 0;
  if (l->last)
  {
    l->last->next = nn;
  }
  else
  {
    l->head = nn;
  }

  l->last = nn;
}

void add_last_jogo(lista_j *l, const char *n, equipa *e1, equipa *e2, int o, int i)
{
  jogo *nn = malloc(sizeof(jogo));
  nn->prev = l->last;
  nn->next = 0;
  nn->nome = malloc((sizeof(char)) * (strlen(n) + 1));
  strcpy(nn->nome, n);
  nn->e1 = e1;
  nn->e2 = e2;
  nn->resultado1 = o;
  nn->resultado2 = i;
  if (l->last)
  {
    l->last->next = nn;
  }
  else
  {
    l->head = nn;
  }

  l->last = nn;
}

void rm_equipa(lista_e *l, equipa *n)
{
  if (n->prev == 0)
  {
    l->head = n->next;
  }
  else
  {
    n->prev->next = n->next;
  }

  if (n->next == 0)
  {
    l->last = n->prev;
  }
  else
  {
    n->next->prev = n->prev;
  }

  free(n->nome);
  free(n);
}

void rm_jogo(lista_j *l, jogo *n)
{
  if (n->prev == 0)
  {
    l->head = n->next;
  }
  else
  {
    n->prev->next = n->next;
  }

  if (n->next == 0)
  {
    l->last = n->prev;
  }
  else
  {
    n->next->prev = n->prev;
  }

  free(n->nome);
  free(n);
  n = 0;
}

equipa *lookup_e(char *text)
{
  int i = hash(text, M);
  equipa *t;
  for (t = head_hash_e[i]; t != 0; i = (i + 1) % M, t = head_hash_e[i])
    if (strcmp(t->nome, text) == 0)
  {
    return t;
  }
  else
  {
    
  }


  return 0;
}

jogo *lookup_j(char *text)
{
  int i = hash(text, M);
  while (head_hash_j[i] != 0)
    if (strcmp(head_hash_j[i]->nome, text) == 0)
  {
    return head_hash_j[i];
  }
  else
  {
    i = (i + 1) % M;
  }


  return 0;
}

