#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "estrutura.h"


void adicionaequipa(equipas *hashtable_equipas, char *nome_equipa, int NL)
{
  int id;
  if (lookupequipa(hashtable_equipas, nome_equipa) == 0)
  {
    id = hash(nome_equipa);
    hashtable_equipas[id] = insertBeginequipas(hashtable_equipas[id], nome_equipa);
  }
  else
  {
    printf("%d Equipa existente.\n", NL);
  }

}

int adicionajogo(jogos *hashtable_jogos, equipas *hashtable_equipas, char *nome, char *equipa1, char *equipa2, int score1, int score2, int num_jogos, int NL)
{
  int id = hash(nome);
  equipas x = lookupequipa(hashtable_equipas, equipa1);
  equipas y = lookupequipa(hashtable_equipas, equipa2);
  if (lookupjogo(hashtable_jogos, nome) == 0)
  {
    if ((lookupequipa(hashtable_equipas, equipa1) != 0) && (lookupequipa(hashtable_equipas, equipa2) != 0))
    {
      hashtable_jogos[id] = insertBeginjogos(hashtable_jogos[id], nome, equipa1, equipa2, score1, score2, num_jogos);
      if (score1 > score2)
      {
        x->vitorias++;
      }
      else
      {
        
      }

      if (score1 < score2)
      {
        y->vitorias++;
      }
      else
      {
        
      }

      return 1;
    }
    else
    {
      printf("%d Equipa inexistente.\n", NL);
    }

  }
  else
  {
    printf("%d Jogo existente.\n", NL);
  }

  return 0;
}

void listaordemjogos(jogos *hashtable_jogos, int num_jogos, int NL)
{
  int i;
  int e;
  jogos x;
  for (e = 0; e < num_jogos; e++)
  {
    for (i = 0; i < 10; i++)
    {
      for (x = hashtable_jogos[i]; x != 0; x = x->next)
      {
        if (x->num_jogos == e)
        {
          printf("%d %s %s %s %d %d\n", NL, x->nome, x->equipa1, x->equipa2, x->score1, x->score2);
        }
        else
        {
          
        }

      }

    }

  }

}

void procurajogo(jogos *hashtable_jogos, char *nome, int NL)
{
  jogos x = lookupjogo(hashtable_jogos, nome);
  if (x != 0)
  {
    printf("%d %s %s %s %d %d\n", NL, x->nome, x->equipa1, x->equipa2, x->score1, x->score2);
  }
  else
  {
    printf("%d Jogo inexistente.\n", NL);
  }

}

jogos apagajogo(jogos *hashtable_jogos, equipas *hashtable_equipas, char *nome, int NL)
{
  int id = hash(nome);
  jogos x = hashtable_jogos[id];
  jogos anterior;
  equipas y;
  equipas z;
  if (lookupjogo(hashtable_jogos, nome) != 0)
  {
    y = lookupequipa(hashtable_equipas, x->equipa1);
    z = lookupequipa(hashtable_equipas, x->equipa2);
    if (x->score1 > x->score2)
    {
      y->vitorias--;
    }
    else
    {
      if (x->score1 < x->score2)
      {
        z->vitorias--;
      }
      else
      {
        
      }

    }

    for (x = hashtable_jogos[id], anterior = 0; x != 0; anterior = x, x = x->next)
    {
      if (strcmp(x->nome, nome) == 0)
      {
        if (x == hashtable_jogos[id])
        {
          hashtable_jogos[id] = x->next;
        }
        else
        {
          anterior->next = x->next;
        }

        free(x->nome);
        free(x->equipa1);
        free(x->equipa2);
        free(x);
        return hashtable_jogos[id];
      }
      else
      {
        
      }

    }

  }
  else
  {
    printf("%d Jogo inexistente.\n", NL);
  }

  return hashtable_jogos[id];
}

void procuraequipa(equipas *hashtable_equipas, char *nome_equipa, int NL)
{
  equipas x = lookupequipa(hashtable_equipas, nome_equipa);
  if (x != 0)
  {
    printf("%d %s %d\n", NL, x->nome_equipa, x->vitorias);
  }
  else
  {
    printf("%d Equipa inexistente.\n", NL);
  }

}

void alterascore(jogos *hashtable_jogos, equipas *hashtable_equipas, char *nome, int score1, int score2, int NL)
{
  jogos x;
  equipas y;
  equipas z;
  if (lookupjogo(hashtable_jogos, nome) != 0)
  {
    x = lookupjogo(hashtable_jogos, nome);
    y = lookupequipa(hashtable_equipas, x->equipa1);
    z = lookupequipa(hashtable_equipas, x->equipa2);
    if (x->score1 == x->score2)
    {
      if (score1 > score2)
      {
        y->vitorias++;
      }
      else
      {
        if (score1 < score2)
        {
          z->vitorias++;
        }
        else
        {
          
        }

      }

    }
    else
    {
      if (x->score1 < x->score2)
      {
        if (score1 == score2)
        {
          z->vitorias--;
        }
        else
        {
          if (score1 > score2)
          {
            y->vitorias++;
            z->vitorias--;
          }
          else
          {
            
          }

        }

      }
      else
      {
        if (x->score1 > x->score2)
        {
          if (score1 == score2)
          {
            y->vitorias--;
          }
          else
          {
            if (score1 < score2)
            {
              y->vitorias--;
              z->vitorias++;
            }
            else
            {
              
            }

          }

        }
        else
        {
          
        }

      }

    }

    x->score1 = score1;
    x->score2 = score2;
  }
  else
  {
    printf("%d Jogo inexistente.\n", NL);
  }

}

