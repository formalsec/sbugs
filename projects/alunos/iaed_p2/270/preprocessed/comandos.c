#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "comandos.h"


void cmd_a(int nl, pLista ls_jg, pTabEquipas ht_eq, pTabJogos ht_jg)
{
  pJogo jg_aux;
  pEquipa eq_aux1;
  pEquipa eq_aux2;
  int golos1;
  int golos2;
  char aux[1024];
  char aux1[1024];
  char aux2[1024];
  for (int aux_index = 0; aux_index < 10; aux_index++)
  {
    aux[aux_index] = new_sym_var(sizeof(char) * 8);
  }

  aux[10 - 1] = '\0';
  for (int aux1_index = 0; aux1_index < 10; aux1_index++)
  {
    aux1[aux1_index] = new_sym_var(sizeof(char) * 8);
  }

  aux1[10 - 1] = '\0';
  for (int aux2_index = 0; aux2_index < 10; aux2_index++)
  {
    aux2[aux2_index] = new_sym_var(sizeof(char) * 8);
  }

  aux2[10 - 1] = '\0';
  golos1 = new_sym_var(sizeof(int) * 8);
  golos2 = new_sym_var(sizeof(int) * 8);
  eq_aux1 = procura_eq(aux1, ht_eq);
  eq_aux2 = procura_eq(aux2, ht_eq);
  if (procura_jg(aux, ht_jg) != 0)
  {
    printf("%d Jogo existente.\n", nl);
  }
  else
  {
    if ((eq_aux1 == 0) || (eq_aux2 == 0))
    {
      printf("%d Equipa inexistente.\n", nl);
    }
    else
    {
      jg_aux = novo_jogo(aux, eq_aux1, eq_aux2, golos1, golos2);
      insere_jg(jg_aux, ht_jg);
      adiciona_fim(ls_jg, jg_aux);
      if (golos1 > golos2)
      {
        eq_aux1->jogos_ganhos += 1;
      }
      else
      {
        if (golos2 > golos1)
        {
          eq_aux2->jogos_ganhos += 1;
        }
        else
        {
          
        }

      }

    }

  }

}

void cmd_A(int nl, pTabEquipas ht_eq)
{
  char aux[1024];
  for (int aux_index = 0; aux_index < 10; aux_index++)
  {
    aux[aux_index] = new_sym_var(sizeof(char) * 8);
  }

  aux[10 - 1] = '\0';
  if (procura_eq(aux, ht_eq) == 0)
  {
    pEquipa eq_aux;
    eq_aux = nova_equipa(aux);
    insere_eq(eq_aux, ht_eq);
  }
  else
  {
    printf("%d Equipa existente.\n", nl);
  }

}

void cmd_l(int nl, pLista ls_jg)
{
  pJogo n;
  for (n = ls_jg->primeiro; n; n = n->seguinte)
  {
    printf("%d ", nl);
    imprime_jogo(n);
  }

}

void cmd_p(int nl, pTabJogos ht_jg)
{
  pJogo jg_aux;
  char aux[1024];
  for (int aux_index = 0; aux_index < 10; aux_index++)
  {
    aux[aux_index] = new_sym_var(sizeof(char) * 8);
  }

  aux[10 - 1] = '\0';
  jg_aux = procura_jg(aux, ht_jg);
  if (jg_aux == 0)
  {
    printf("%d Jogo inexistente.\n", nl);
  }
  else
  {
    printf("%d ", nl);
    imprime_jogo(jg_aux);
  }

}

void cmd_P(int nl, pTabEquipas ht_eq)
{
  pEquipa eq_aux;
  char aux[1024];
  for (int aux_index = 0; aux_index < 10; aux_index++)
  {
    aux[aux_index] = new_sym_var(sizeof(char) * 8);
  }

  aux[10 - 1] = '\0';
  eq_aux = procura_eq(aux, ht_eq);
  if (eq_aux == 0)
  {
    printf("%d Equipa inexistente.\n", nl);
  }
  else
  {
    printf("%d ", nl);
    imprime_equipa(eq_aux);
  }

}

void cmd_r(int nl, pLista ls_jg, pTabJogos ht_jg)
{
  pJogo jg_aux;
  char aux[1024];
  for (int aux_index = 0; aux_index < 10; aux_index++)
  {
    aux[aux_index] = new_sym_var(sizeof(char) * 8);
  }

  aux[10 - 1] = '\0';
  jg_aux = procura_jg(aux, ht_jg);
  if (jg_aux == 0)
  {
    printf("%d Jogo inexistente.\n", nl);
  }
  else
  {
    if (jg_aux->golos1 > jg_aux->golos2)
    {
      jg_aux->equipa1->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    if (jg_aux->golos2 > jg_aux->golos1)
    {
      jg_aux->equipa2->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    rm_no(ls_jg, jg_aux);
    apaga_jg(aux, ht_jg);
  }

}

void cmd_s(int nl, pTabJogos ht_jg)
{
  pJogo jg_aux;
  int golos1;
  int golos2;
  char aux[1024];
  for (int aux_index = 0; aux_index < 10; aux_index++)
  {
    aux[aux_index] = new_sym_var(sizeof(char) * 8);
  }

  aux[10 - 1] = '\0';
  golos1 = new_sym_var(sizeof(int) * 8);
  golos2 = new_sym_var(sizeof(int) * 8);
  jg_aux = procura_jg(aux, ht_jg);
  if (jg_aux == 0)
  {
    printf("%d Jogo inexistente.\n", nl);
  }
  else
  {
    if (jg_aux->golos1 > jg_aux->golos2)
    {
      jg_aux->equipa1->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    if (jg_aux->golos2 > jg_aux->golos1)
    {
      jg_aux->equipa2->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    if (golos1 > golos2)
    {
      jg_aux->equipa1->jogos_ganhos += 1;
    }
    else
    {
      
    }

    if (golos2 > golos1)
    {
      jg_aux->equipa2->jogos_ganhos += 1;
    }
    else
    {
      
    }

    jg_aux->golos1 = golos1;
    jg_aux->golos2 = golos2;
  }

}

void cmd_g(int nl, pTabEquipas ht_eq)
{
  int i = 0;
  int max = 0;
  for (; i < ht_eq->max; i++)
    if ((ht_eq->equipas[i] != 0) && (ht_eq->equipas[i]->jogos_ganhos > max))
  {
    max = ht_eq->equipas[i]->jogos_ganhos;
  }
  else
  {
    
  }


  if (ht_eq->N > 0)
  {
    int j = 0;
    char **nomes = malloc((sizeof(char *)) * 100);
    printf("%d Melhores %d\n", nl, max);
    for (i = 0; i < ht_eq->max; i++)
      if ((ht_eq->equipas[i] != 0) && (ht_eq->equipas[i]->jogos_ganhos == max))
    {
      nomes[j] = ht_eq->equipas[i]->nome;
      j++;
    }
    else
    {
      
    }


    qsort(nomes, j, sizeof(char *), compara);
    for (i = 0; i < j; i++)
      printf("%d * %s\n", nl, nomes[i]);

    free(nomes);
  }
  else
  {
    
  }

}

char *strdup(const char *s)
{
  size_t tamanho = strlen(s) + 1;
  char *p = malloc(tamanho * (sizeof(char)));
  while (tamanho--)
    p[tamanho] = s[tamanho];

  return p;
}

int compara(const void *p1, const void *p2)
{
  return strcmp(*((char * const *) p1), *((char * const *) p2));
}

void liberta_tudo(pLista ls_jg, pTabEquipas ht_eq, pTabJogos ht_jg)
{
  liberta_lista(ls_jg);
  liberta_te(ht_eq);
  liberta_tj(ht_jg);
}

