#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "tabela_jogo.h"
#include "hash.h"


void liberta_link(link head)
{
  link aux;
  while (head != 0)
  {
    aux = head;
    head = head->next;
    free_jogo(aux->jogo);
    free(aux);
  }

  free(head);
}

link *init()
{
  link *table;
  table = calloc(1551, sizeof(link));
  return table;
}

Jogo *encontra(link *table, char jogo[])
{
  int hash_id;
  link aux;
  hash_id = hash(jogo);
  aux = table[hash_id];
  while (aux != 0)
  {
    if (strcmp(jogo, aux->jogo->nome_jogo) == 0)
    {
      return aux->jogo;
    }
    else
    {
      
    }

    aux = aux->next;
  }

  return 0;
}

void introduz_table(link *table, Jogo *novo_jogo)
{
  int hash_id;
  link novo_link = malloc(sizeof(struct link));
  novo_link->jogo = novo_jogo;
  hash_id = hash(novo_jogo->nome_jogo);
  novo_link->next = table[hash_id];
  table[hash_id] = novo_link;
}

void liberta_table(link *table)
{
  int i;
  link *aux;
  aux = table;
  for (i = 0; i < 1551; i++)
    liberta_link(aux[i]);

  free(aux);
}

void Remove_table(link *table, Jogo *j)
{
  int hash_id;
  link tmp;
  link tmp2;
  hash_id = hash(j->nome_jogo);
  tmp = table[hash_id];
  if (table[hash_id] == 0)
  {
    return;
  }
  else
  {
    if ((table[hash_id]->next == 0) && (strcmp(j->nome_jogo, tmp->jogo->nome_jogo) != 0))
    {
      return;
    }
    else
    {
      if ((table[hash_id]->next == 0) && (strcmp(j->nome_jogo, tmp->jogo->nome_jogo) == 0))
      {
        table[hash_id] = table[hash_id]->next;
        free_jogo(tmp->jogo);
        free(tmp);
        return;
      }
      else
      {
        if (strcmp(tmp->jogo->nome_jogo, j->nome_jogo) == 0)
        {
          tmp2 = tmp;
          table[hash_id] = table[hash_id]->next;
          free_jogo(tmp2->jogo);
          free(tmp2);
          return;
        }
        else
        {
          
        }

        while (tmp->next != 0)
        {
          if (strcmp(j->nome_jogo, tmp->next->jogo->nome_jogo) == 0)
          {
            tmp2 = tmp->next;
            tmp->next = tmp2->next;
            free_jogo(tmp2->jogo);
            free(tmp2);
            return;
          }
          else
          {
            
          }

          tmp = tmp->next;
        }

        return;
      }

    }

  }

}

