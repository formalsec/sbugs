#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "equipas.h"


void apaga_Equipa(Equipa a)
{
  free(a->nome);
  free(a);
}

Equipa nova_Equipa(char *nome)
{
  Equipa new = (Equipa) malloc(sizeof(struct equipa));
  new->vitorias = 0;
  new->nome = malloc(strlen(nome) + 1);
  strcpy(new->nome, nome);
  return new;
}

int compara_equipas(const void *a, const void *b)
{
  char **equipaA = (char **) a;
  char **equipaB = (char **) b;
  return strcmp(*equipaA, *equipaB);
}

int hashU(char *v, int tamanho)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (tamanho - 1))
    h = ((a * h) + (*v)) % tamanho;

  return h;
}

int hash(Key nome, int tamanho)
{
  int h = hashU(nome, tamanho);
  return h;
}

link_equi *inicia_tab_equi(int tamanho)
{
  int i;
  link_equi *equipas;
  equipas = malloc(tamanho * (sizeof(link_equi)));
  for (i = 0; i < tamanho; i++)
    equipas[i] = 0;

  return equipas;
}

void insere_tab_equi(Equipa equipa, link_equi *equipas, int tamanho)
{
  int i = hash(equipa->nome, tamanho);
  equipas[i] = insere_cadeia_equi(equipas[i], equipa);
}

Equipa procura_tab_equi(Key v, link_equi *equipas, int tamanho)
{
  int i = hash(v, tamanho);
  return procura_cadeia_equi(equipas[i], v);
}

link_equi insere_cadeia_equi(link_equi equi_slot, Equipa equipa)
{
  link_equi new = 0;
  new = (link_equi) malloc(sizeof(struct node));
  new->next = equi_slot;
  new->equipa = equipa;
  return new;
}

Equipa procura_cadeia_equi(link_equi equi_slot, Key v)
{
  while (equi_slot != 0)
  {
    if (strcmp(v, equi_slot->equipa->nome) == 0)
    {
      return equi_slot->equipa;
    }
    else
    {
      
    }

    equi_slot = equi_slot->next;
  }

  return 0;
}

void apaga_tab_equi(link_equi *equipas)
{
  int i;
  link_equi temp1;
  link_equi temp2;
  Equipa equi_temp;
  for (i = 0; i < 997; i++)
  {
    if (equipas[i] != 0)
    {
      temp1 = equipas[i];
      while (temp1 != 0)
      {
        equi_temp = temp1->equipa;
        temp2 = temp1;
        temp1 = temp1->next;
        apaga_Equipa(equi_temp);
        free(temp2);
      }

    }
    else
    {
      
    }

  }

  free(equipas);
}

