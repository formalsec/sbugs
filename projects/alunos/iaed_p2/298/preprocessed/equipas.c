/*File generated by PreProcessor.py*/


#include "hash_defines.h"
#include "equipas.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>


EQUIPA **init_hash_table()
{
  int i;
  EQUIPA **hashtable_equipas = malloc((sizeof(EQUIPA)) * 2001);
  for (i = 0; i < 2001; i++)
    hashtable_equipas[i] = 0;

  return hashtable_equipas;
}

void add_equipa(EQUIPA **hashtable_equipas, EQUIPA *nova_equipa)
{
  if (nova_equipa == 0)
  {
    return;
  }
  else
  {
    unsigned long indice = hash(nova_equipa->nome);
    nova_equipa->next = hashtable_equipas[indice];
    hashtable_equipas[indice] = nova_equipa;
  }

}

EQUIPA *procura_equipa(EQUIPA **hashtable_equipas, char *nome)
{
  unsigned long indice = hash(nome);
  EQUIPA *tmp = hashtable_equipas[indice];
  if (tmp == 0)
  {
    return 0;
  }
  else
  {
    while (tmp != 0)
    {
      if (strcmp(tmp->nome, nome) == 0)
      {
        return tmp;
      }
      else
      {
        
      }

      tmp = tmp->next;
    }

    return 0;
  }

}

void add_score(EQUIPA **hashtable_equipas, char *nome)
{
  EQUIPA *equipa = procura_equipa(hashtable_equipas, nome);
  equipa->score += 1;
}

void remove_score(EQUIPA **hashtable_equipas, char *nome)
{
  EQUIPA *equipa = procura_equipa(hashtable_equipas, nome);
  if (equipa->score >= 1)
  {
    equipa->score -= 1;
  }
  else
  {
    equipa->score = 0;
  }

}

int maior_score_equipa(EQUIPA **hashtable_equipas)
{
  int i;
  int maior_score = 0;
  EQUIPA *tmp = 0;
  for (i = 0; i < 2001; i++)
  {
    tmp = hashtable_equipas[i];
    while (tmp != 0)
    {
      if (maior_score < tmp->score)
      {
        maior_score = tmp->score;
      }
      else
      {
        
      }

      tmp = tmp->next;
    }

  }

  return maior_score;
}

int num_equipas(EQUIPA **hashtable_equipas, int score)
{
  int i;
  int num_equipas = 0;
  EQUIPA *tmp = 0;
  for (i = 0; i < 2001; i++)
  {
    tmp = hashtable_equipas[i];
    while (tmp != 0)
    {
      if (tmp->score == score)
      {
        num_equipas++;
      }
      else
      {
        
      }

      tmp = tmp->next;
    }

  }

  return num_equipas;
}

EQUIPA *cria_equipa(char *nome)
{
  EQUIPA *nova_equipa = malloc(sizeof(EQUIPA));
  int len = strlen(nome);
  nova_equipa->nome = malloc((sizeof(char)) * (len + 1));
  strcpy(nova_equipa->nome, nome);
  nova_equipa->score = 0;
  nova_equipa->next = 0;
  return nova_equipa;
}

void destroy_hash_equipa(EQUIPA **hashtable_equipas)
{
  EQUIPA *tmp = 0;
  int i;
  for (i = 0; i < 2001; i++)
  {
    while ((tmp = hashtable_equipas[i]) != 0)
    {
      hashtable_equipas[i] = hashtable_equipas[i]->next;
      free(tmp->nome);
      free(tmp);
    }

  }

  free(hashtable_equipas);
}

