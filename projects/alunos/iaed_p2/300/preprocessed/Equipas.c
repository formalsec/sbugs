#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "Equipas.h"


int hash(char *nome, int m)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; strcmp(nome, "\0") != 0; nome++, a = (a * b) % (m - 1))
    h = ((a * h) + (*nome)) % m;

  return h;
}

pEquipa NEW(char *nome)
{
  pEquipa x = malloc(sizeof(struct Equipa));
  x->nome = malloc((sizeof(char)) * (strlen(nome) + 1));
  strcpy(x->nome, nome);
  x->vitorias = 0;
  x->next = 0;
  return x;
}

pEquipa insertBeginList(pEquipa head, char *nome)
{
  pEquipa x = NEW(nome);
  x->next = head;
  return x;
}

pEquipa removeEquipaList(pEquipa head, char *nome)
{
  pEquipa t;
  pEquipa prev;
  for (t = head, prev = 0; t != 0; prev = t, t = t->next)
  {
    if (strcmp(t->nome, nome) == 0)
    {
      if (t == head)
      {
        head = t->next;
      }
      else
      {
        prev->next = t->next;
      }

      freeEquipa(t);
      break;
    }
    else
    {
      
    }

  }

  return head;
}

pEquipa searchList(pEquipa head, char *nome)
{
  pEquipa t;
  for (t = head; t != 0; t = t->next)
  {
    if (strcmp(t->nome, nome) == 0)
    {
      return t;
    }
    else
    {
      
    }

  }

  return 0;
}

pEquipa *STinit(int m)
{
  pEquipa *heads;
  heads = calloc(m, sizeof(pEquipa));
  return heads;
}

void STinsert(pEquipa *heads, char *nome, int m)
{
  int i = hash(nome, m);
  heads[i] = insertBeginList(heads[i], nome);
}

void STdelete(pEquipa *heads, char *nome, int m)
{
  int i = hash(nome, m);
  heads[i] = removeEquipaList(heads[i], nome);
}

pEquipa STsearch(pEquipa *heads, char *nome, int m)
{
  int i = hash(nome, m);
  return searchList(heads[i], nome);
}

void freeEquipa(pEquipa a)
{
  free(a->nome);
  free(a);
}

void printEquipa(pEquipa a, int nl)
{
  printf("%d %s %u\n", nl, a->nome, a->vitorias);
}

