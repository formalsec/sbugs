/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "equipas.h"


node_equipa criar_node_equipa(char *nome)
{
  node_equipa novo = malloc(sizeof(struct stru_node_equipa));
  novo->next = 0;
  novo->vitorias = 0;
  novo->nome_equipa = malloc((strlen(nome) + 1) * (sizeof(char)));
  strcpy(novo->nome_equipa, nome);
  return novo;
}

node_equipa insert_equipa(node_equipa head, char *equipa)
{
  node_equipa novo = criar_node_equipa(equipa);
  novo->next = head;
  return novo;
}

node_equipa adicionar_ordem_alfabetica(node_equipa head, char *equipa)
{
  if (head == 0)
  {
    node_equipa new = criar_node_equipa(equipa);
    return new;
  }
  else
  {
    if (strcmp(head->nome_equipa, equipa) > 0)
    {
      node_equipa new = criar_node_equipa(equipa);
      new->next = head;
      return new;
    }
    else
    {
      node_equipa aux;
      for (aux = head; aux->next != 0; aux = aux->next)
      {
        if (strcmp(aux->next->nome_equipa, equipa) > 0)
        {
          node_equipa team;
          node_equipa aux2;
          team = criar_node_equipa(equipa);
          aux2 = aux->next;
          aux->next = team;
          team->next = aux2;
          break;
        }
        else
        {
          
        }

      }

      if (aux->next == 0)
      {
        node_equipa team = criar_node_equipa(equipa);
        aux->next = team;
      }
      else
      {
        
      }

      return head;
    }

  }

}

void init_hash_table_equipas(hash_table_team hash_table, int lim)
{
  int i;
  hash_table->cap = lim;
  hash_table->table = malloc(lim * (sizeof(no)));
  for (i = 0; i < lim; i++)
    hash_table->table[i] = 0;

}

no equipa_insert(no head)
{
  no novo = malloc(sizeof(struct stru_no_equipa));
  novo->next = head;
  return novo;
}

void hash_insert_equipas(hash_table_team hash_table, char *equipa, lista *equipas)
{
  int h;
  int h1;
  h = hash(equipa, hash_table->cap);
  h1 = hash1(equipa, hash_table->cap);
  while (hash_table->table[h] != 0)
    h = (h + h1) % hash_table->cap;

  hash_table->table[h] = equipa_insert(hash_table->table[h]);
  hash_table->table[h]->no_e = equipas->head;
}

no hash_search_equipas(hash_table_team hash_table, char *equipa)
{
  int h;
  int h1;
  h = hash(equipa, hash_table->cap);
  h1 = hash1(equipa, hash_table->cap);
  while (hash_table->table[h] != 0)
    if (strcmp(hash_table->table[h]->no_e->nome_equipa, equipa) == 0)
  {
    return hash_table->table[h];
  }
  else
  {
    h = (h + h1) % hash_table->cap;
  }


  return 0;
}

void libertar_lista_teams(node_equipa head)
{
  node_equipa aux;
  while (head != 0)
  {
    aux = head;
    head = head->next;
    free(aux->nome_equipa);
    free(aux);
  }

}

void libertar_elemento_hash(no head)
{
  free(head->no_e->nome_equipa);
  free(head->no_e);
  free(head);
}

void libertar_hash_equipas(hash_table_team hash_table)
{
  int i;
  for (i = 0; i < hash_table->cap; i++)
    if (hash_table->table[i] != 0)
  {
    libertar_elemento_hash(hash_table->table[i]);
  }
  else
  {
    
  }


  free(hash_table->table);
  free(hash_table);
}

