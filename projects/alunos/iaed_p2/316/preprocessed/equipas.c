#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "equipas.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>


Equipas *init_equipas()
{
  Equipas *equipas = malloc(sizeof(Equipas));
  equipas->head = 0;
  return equipas;
}

void destroy_equipas(Equipas *equipas)
{
  node_equipas *e = 0;
  while (equipas->head)
  {
    e = equipas->head->next;
    free(equipas->head->nome);
    free(equipas->head);
    equipas->head = e;
  }

  free(equipas);
}

node_equipas *cria_equipa(char *nome)
{
  node_equipas *e = malloc(sizeof(node_equipas));
  e->next = 0;
  e->nome = malloc((strlen(nome) + 1) * (sizeof(char)));
  strcpy(e->nome, nome);
  e->jogos_ganhos = 0;
  return e;
}

Equipas *push_equipa(Equipas *equipas, node_equipas *equipa)
{
  equipa->next = equipas->head;
  equipas->head = equipa;
  return equipas;
}

void equipa_vencedora(node_equipas *equipa)
{
  equipa->jogos_ganhos++;
}

void equipa_diminui_jogos_ganhos(node_equipas *equipa)
{
  if (equipa->jogos_ganhos == 0)
  {
    return;
  }
  else
  {
    
  }

  equipa->jogos_ganhos--;
}

node_equipas **melhores_equipas(Equipas *equipas, long *numero_melhores)
{
  node_equipas **melhores = 0;
  node_equipas *equipa = 0;
  long max_jogos_ganhos = 0;
  long i = 0;
  for (equipa = equipas->head; equipa; equipa = equipa->next)
  {
    if (equipa->jogos_ganhos > max_jogos_ganhos)
    {
      max_jogos_ganhos = equipa->jogos_ganhos;
      i = 1;
    }
    else
    {
      if (equipa->jogos_ganhos == max_jogos_ganhos)
      {
        i++;
      }
      else
      {
        
      }

    }

  }

  melhores = calloc(i, sizeof(node_equipas *));
  *numero_melhores = i;
  i = 0;
  for (equipa = equipas->head; equipa; equipa = equipa->next)
    if (equipa->jogos_ganhos == max_jogos_ganhos)
  {
    melhores[i++] = equipa;
  }
  else
  {
    
  }


  return melhores;
}

void destroy_melhores(node_equipas **melhores)
{
  free(melhores);
}

