#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "heads.h"


void add_jovo(int NL, list_jogos *jogos, HT_jogos *HT_jogos, HT_equipas *HT_equipas, int HT_tam)
{
  jogo *novo = malloc((sizeof(jogo)) + 1);
  equipa *equipa;
  int score1;
  int score2;
  char tmp[1023];
  for (int tmp_index = 0; tmp_index < 10; tmp_index++)
  {
    tmp[tmp_index] = new_sym_var(sizeof(char) * 8);
  }

  tmp[10 - 1] = '\0';
  novo->nome = malloc((sizeof(char)) * (strlen(tmp) + 1));
  strcpy(novo->nome, tmp);
  for (int tmp_index = 0; tmp_index < 10; tmp_index++)
  {
    tmp[tmp_index] = new_sym_var(sizeof(char) * 8);
  }

  tmp[10 - 1] = '\0';
  novo->e1 = malloc((sizeof(char)) * (strlen(tmp) + 1));
  strcpy(novo->e1, tmp);
  for (int tmp_index = 0; tmp_index < 10; tmp_index++)
  {
    tmp[tmp_index] = new_sym_var(sizeof(char) * 8);
  }

  tmp[10 - 1] = '\0';
  novo->e2 = malloc((sizeof(char)) * (strlen(tmp) + 1));
  strcpy(novo->e2, tmp);
  score1 = new_sym_var(sizeof(int) * 8);
  score2 = new_sym_var(sizeof(int) * 8);
  novo->score1 = score1;
  novo->score2 = score2;
  if (searchJogo(novo->nome, HT_jogos, HT_tam) != 0)
  {
    printf("%d Jogo existente.\n", NL);
    free_jogo(novo);
  }
  else
  {
    if ((searchEquipa(novo->e1, HT_equipas, HT_tam) == 0) || (searchEquipa(novo->e2, HT_equipas, HT_tam) == 0))
    {
      printf("%d Equipa inexistente.\n", NL);
      free_jogo(novo);
    }
    else
    {
      novo->prev = jogos->last;
      novo->next = 0;
      addHTJ(novo, HT_jogos, HT_tam);
      if (jogos->last)
      {
        jogos->last->next = novo;
      }
      else
      {
        jogos->head = novo;
      }

      jogos->last = novo;
      if (novo->score1 > novo->score2)
      {
        equipa = searchEquipa(novo->e1, HT_equipas, HT_tam);
        equipa->jogos_ganhos = equipa->jogos_ganhos + 1;
      }
      else
      {
        if (novo->score1 < novo->score2)
        {
          equipa = searchEquipa(novo->e2, HT_equipas, HT_tam);
          equipa->jogos_ganhos = equipa->jogos_ganhos + 1;
        }
        else
        {
          
        }

      }

    }

  }

}

void apaga_jogo(int NL, list_jogos *jogos, HT_jogos *HT_jogos, HT_equipas *HT_equipas, int HT_tam)
{
  jogo *jogo;
  char nome[1023];
  equipa *equipa;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  jogo = searchJogo(nome, HT_jogos, HT_tam);
  if (jogo)
  {
    if (jogo->score1 > jogo->score2)
    {
      equipa = searchEquipa(jogo->e1, HT_equipas, HT_tam);
      equipa->jogos_ganhos = equipa->jogos_ganhos - 1;
    }
    else
    {
      
    }

    if (jogo->score1 < jogo->score2)
    {
      equipa = searchEquipa(jogo->e2, HT_equipas, HT_tam);
      equipa->jogos_ganhos = equipa->jogos_ganhos - 1;
    }
    else
    {
      
    }

    remHTJ(nome, HT_jogos, HT_tam);
    rm_jogo(jogos, jogo);
  }
  else
  {
    printf("%d Jogo inexistente.\n", NL);
  }

}

void lista_jogos(int NL, list_jogos *jogos)
{
  jogo *jogo;
  for (jogo = jogos->head; jogo; jogo = jogo->next)
  {
    printf("%d ", NL);
    printf("%s ", jogo->nome);
    printf("%s ", jogo->e1);
    printf("%s ", jogo->e2);
    printf("%d ", jogo->score1);
    printf("%d\n", jogo->score2);
  }

}

void procura_jogo(int NL, HT_jogos *HT, int HT_tam)
{
  char nome[1023];
  jogo *jogo;
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  jogo = searchJogo(nome, HT, HT_tam);
  if (jogo != 0)
  {
    printf("%d ", NL);
    printf("%s ", jogo->nome);
    printf("%s ", jogo->e1);
    printf("%s ", jogo->e2);
    printf("%d ", jogo->score1);
    printf("%d\n", jogo->score2);
  }
  else
  {
    printf("%d Jogo inexistente.\n", NL);
  }

}

void altera_score(int NL, HT_jogos *HT_jogos, HT_equipas *HT_equipas, int HT_tam)
{
  char nome[1023];
  int s1;
  int s2;
  jogo *jogo;
  equipa *equipa1;
  equipa *equipa2;
  memset(nome, 0, 1023);
  for (int nome_index = 0; nome_index < 10; nome_index++)
  {
    nome[nome_index] = new_sym_var(sizeof(char) * 8);
  }

  nome[10 - 1] = '\0';
  s1 = new_sym_var(sizeof(int) * 8);
  s2 = new_sym_var(sizeof(int) * 8);
  jogo = searchJogo(nome, HT_jogos, HT_tam);
  if (jogo)
  {
    equipa1 = searchEquipa(jogo->e1, HT_equipas, HT_tam);
    equipa2 = searchEquipa(jogo->e2, HT_equipas, HT_tam);
    if (jogo->score1 > jogo->score2)
    {
      equipa1->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    if (jogo->score1 < jogo->score2)
    {
      equipa2->jogos_ganhos -= 1;
    }
    else
    {
      
    }

    if (s1 > s2)
    {
      equipa1->jogos_ganhos += 1;
    }
    else
    {
      
    }

    if (s1 < s2)
    {
      equipa2->jogos_ganhos += 1;
    }
    else
    {
      
    }

    jogo->score1 = s1;
    jogo->score2 = s2;
  }
  else
  {
    printf("%d Jogo inexistente.\n", NL);
  }

}

