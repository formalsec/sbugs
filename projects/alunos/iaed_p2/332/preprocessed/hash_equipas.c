/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "equipas.h"
#include "hash_equipas.h"


unsigned int hash(char *v)
{
  int h;
  int a = 31415;
  int b = 27183;
  int M = 32911;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (M - 1))
  {
    h = ((a * h) + (*v)) % M;
  }

  return h;
}

equipa *init_tab_equipas()
{
  int i;
  int M = 32911;
  equipa *ht = malloc(M * (sizeof(equipa)));
  for (i = 0; i < M; i++)
  {
    ht[i] = 0;
  }

  return ht;
}

void tab_insert_eq(equipa eq, equipa *ht)
{
  char *key = eq->nome_equipa;
  int i = 0;
  int M = 32911;
  int h = hash(key);
  while (ht[(h + i) % M] != 0)
  {
    i += 1;
  }

  ht[(h + i) % M] = eq;
}

int procura_equipa(char *key, equipa *ht)
{
  int i = 0;
  int M = 32911;
  int h = hash(key);
  while (ht[(h + i) % M] != 0)
  {
    if (strcmp(ht[(h + i) % M]->nome_equipa, key) == 0)
    {
      return (h + i) % M;
    }
    else
    {
      
    }

    i += 1;
  }

  if ((ht[(h + i) % M] != 0) && (strcmp(ht[(h + i) % M]->nome_equipa, key) == 0))
  {
    return (h + i) % M;
  }
  else
  {
    
  }

  return -1;
}

void free_tabela_eq(equipa *ht)
{
  int i;
  for (i = 0; i < 32911; i++)
  {
    if (ht[i] != 0)
    {
      free_equipa(ht[i]);
    }
    else
    {
      
    }

  }

}

