/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "equipas.h"
#include "jogos.h"


link_equipa *inicializa_ht_equipas()
{
  int i;
  link_equipa *ht = malloc(4111 * (sizeof(link_equipa)));
  for (i = 0; i < 4111; i++)
    ht[i] = 0;

  return ht;
}

lista_equipas *inicializa_lista_equipas()
{
  lista_equipas *lista = malloc(sizeof(lista_equipas));
  lista->primeiro = 0;
  return lista;
}

link_equipa nova_equipa(char *nome_equipa)
{
  link_equipa novo = malloc(sizeof(struct node_equipa));
  novo->nome_equipa = malloc((sizeof(char)) * (strlen(nome_equipa) + 1));
  strcpy(novo->nome_equipa, nome_equipa);
  novo->vitorias = 0;
  novo->next_ht = 0;
  novo->next_lista = 0;
  return novo;
}

void adiciona_equipa_lista(link_equipa equipa, lista_equipas *lista)
{
  link_equipa t;
  if ((lista->primeiro == 0) || (strcmp(equipa->nome_equipa, lista->primeiro->nome_equipa) < 0))
  {
    equipa->next_lista = lista->primeiro;
    lista->primeiro = equipa;
    return;
  }
  else
  {
    
  }

  t = lista->primeiro;
  while ((t->next_lista != 0) && (strcmp(t->next_lista->nome_equipa, equipa->nome_equipa) < 0))
    t = t->next_lista;

  equipa->next_lista = t->next_lista;
  t->next_lista = equipa;
}

void adiciona_equipa_ht(link_equipa equipa, link_equipa *ht)
{
  int i = hash(equipa->nome_equipa);
  if (!ht[i])
  {
    ht[i] = equipa;
    return;
  }
  else
  {
    
  }

  equipa->next_ht = ht[i];
  ht[i] = equipa;
}

link_equipa procura_equipa(char *nome_equipa, link_equipa *ht)
{
  link_equipa t;
  int i = hash(nome_equipa);
  for (t = ht[i]; t != 0; t = t->next_ht)
    if (strcmp(t->nome_equipa, nome_equipa) == 0)
  {
    return t;
  }
  else
  {
    
  }


  return 0;
}

int encontra_max_vit(lista_equipas *lista)
{
  link_equipa t;
  int max_vit = -1;
  for (t = lista->primeiro; t != 0; t = t->next_lista)
    if (t->vitorias > max_vit)
  {
    max_vit = t->vitorias;
  }
  else
  {
    
  }


  return max_vit;
}

void print_g(int NL, int max_vit, lista_equipas *lista)
{
  link_equipa t;
  printf("%d Melhores %d\n", NL, max_vit);
  for (t = lista->primeiro; t != 0; t = t->next_lista)
    if (t->vitorias == max_vit)
  {
    printf("%d * %s\n", NL, t->nome_equipa);
  }
  else
  {
    
  }


}

void destroi_estrut_equipas(lista_equipas *lista, link_equipa *ht)
{
  link_equipa aux;
  while (lista->primeiro)
  {
    aux = lista->primeiro->next_lista;
    free(lista->primeiro->nome_equipa);
    free(lista->primeiro);
    lista->primeiro = aux;
  }

  free(lista);
  free(ht);
}

int hash(char *v)
{
  int h = 0;
  int a = 127;
  for (; (*v) != '\0'; v++)
    h = ((a * h) + (*v)) % 4111;

  return h;
}

