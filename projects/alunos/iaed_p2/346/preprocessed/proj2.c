#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>


int tamanhojogo = 16;
int tamanhoequipa = 16;
int NL = 0;
struct jogo
{
  char jogo[1024];
  char equipa1[1024];
  char equipa2[1024];
  int score1;
  int score2;
};
struct jogo jogo[16];
struct equipas
{
  char equipa[1024];
  int wins;
};
struct equipas equipas[16];
void run_a(char nome[], char equipa1[], char equipa2[], int score1, int score2)
{
  int i;
  int idx;
  char nogame[] = "";
  for (i = 0; i < tamanhojogo; i++)
  {
    if (strcmp(jogo[i].jogo, nome) == 0)
    {
      printf("%d Jogo existente.\n", NL);
      return;
    }
    else
    {
      
    }

  }

  for (i = 0; i < tamanhoequipa; i++)
  {
    if (strcmp(equipas[i].equipa, equipa1) == 0)
    {
      break;
    }
    else
    {
      
    }

    if ((i == (tamanhoequipa - 1)) && (strcmp(equipas[i].equipa, equipa1) != 0))
    {
      printf("%d Equipa inexistente.\n", NL);
      return;
    }
    else
    {
      
    }

  }

  for (i = 0; i < tamanhoequipa; i++)
  {
    if (strcmp(equipas[i].equipa, equipa2) == 0)
    {
      break;
    }
    else
    {
      
    }

    if ((i == (tamanhoequipa - 1)) && (strcmp(equipas[i].equipa, equipa2) != 0))
    {
      printf("%d Equipa inexistente.\n", NL);
      return;
    }
    else
    {
      
    }

  }

  for (i = 0; i < tamanhojogo; i++)
  {
    if (strcmp(jogo[i].jogo, nogame) == 0)
    {
      strcpy(jogo[i].jogo, nome);
      strcpy(jogo[i].equipa1, equipa1);
      strcpy(jogo[i].equipa2, equipa2);
      jogo[i].score1 = score1;
      jogo[i].score2 = score2;
      if (score1 > score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, equipa1) == 0)
          {
            equipas[idx].wins++;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      if (score1 < score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, equipa2) == 0)
          {
            equipas[idx].wins++;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      return;
    }
    else
    {
      
    }

  }

}

void run_l()
{
  int i;
  char nogame[] = "";
  for (i = 0; i < tamanhojogo; i++)
  {
    if (strcmp(jogo[i].jogo, nogame) == 0)
    {
      return;
    }
    else
    {
      
    }

    printf("%d %s %s %s %d %d\n", NL, jogo[i].jogo, jogo[i].equipa1, jogo[i].equipa2, jogo[i].score1, jogo[i].score2);
  }

}

void run_p(char nome[])
{
  int i;
  for (i = 0; i < tamanhojogo; i++)
  {
    if (strcmp(jogo[i].jogo, nome) == 0)
    {
      printf("%d %s %s %s %d %d\n", NL, jogo[i].jogo, jogo[i].equipa1, jogo[i].equipa2, jogo[i].score1, jogo[i].score2);
      return;
    }
    else
    {
      
    }

    if ((i == (tamanhojogo - 1)) && (strcmp(jogo[i].jogo, nome) != 0))
    {
      printf("%d Jogo inexistente.\n", NL);
    }
    else
    {
      
    }

  }

}

void run_r(char nome[])
{
  int i;
  int idx;
  char empty[] = "";
  for (i = 0; i < tamanhojogo; i++)
  {
    if (strcmp(jogo[i].jogo, nome) == 0)
    {
      if (jogo[i].score1 > jogo[i].score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, jogo[i].equipa1) == 0)
          {
            equipas[idx].wins--;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      if (jogo[i].score1 < jogo[i].score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, jogo[i].equipa2) == 0)
          {
            equipas[idx].wins--;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      strcpy(jogo[i].jogo, empty);
      strcpy(jogo[i].equipa1, empty);
      strcpy(jogo[i].equipa2, empty);
      jogo[i].score1 = 0;
      jogo[i].score2 = 0;
      for (idx = i + 1; idx < tamanhojogo; idx++)
      {
        if (strcmp(jogo[idx].jogo, empty) != 0)
        {
          strcpy(jogo[idx - 1].jogo, jogo[idx].jogo);
          strcpy(jogo[idx - 1].equipa1, jogo[idx].equipa1);
          strcpy(jogo[idx - 1].equipa2, jogo[idx].equipa2);
          jogo[idx - 1].score1 = jogo[idx].score1;
          jogo[idx - 1].score2 = jogo[idx].score2;
          strcpy(jogo[idx].jogo, empty);
          strcpy(jogo[idx].equipa1, empty);
          strcpy(jogo[idx].equipa2, empty);
          jogo[idx].score1 = 0;
          jogo[idx].score2 = 0;
        }
        else
        {
          
        }

      }

      return;
    }
    else
    {
      
    }

  }

  printf("%d Jogo inexistente.\n", NL);
}

void run_s(char nome[], int score1, int score2)
{
  int i;
  int idx;
  for (i = 0; i < tamanhojogo; i++)
  {
    if (strcmp(jogo[i].jogo, nome) == 0)
    {
      if (jogo[i].score1 > jogo[i].score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, jogo[i].equipa1) == 0)
          {
            equipas[idx].wins--;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      if (jogo[i].score1 < jogo[i].score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, jogo[i].equipa2) == 0)
          {
            equipas[idx].wins--;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      jogo[i].score1 = score1;
      jogo[i].score2 = score2;
      if (score1 > score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, jogo[i].equipa1) == 0)
          {
            equipas[idx].wins++;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      if (score1 < score2)
      {
        for (idx = 0; idx < tamanhoequipa; idx++)
        {
          if (strcmp(equipas[idx].equipa, jogo[i].equipa2) == 0)
          {
            equipas[idx].wins++;
            break;
          }
          else
          {
            
          }

        }

      }
      else
      {
        
      }

      return;
    }
    else
    {
      
    }

  }

  printf("%d Jogo inexistente.\n", NL);
}

void run_A(char nome[])
{
  int i;
  char noteam[] = "";
  for (i = 0; i < tamanhoequipa; i++)
  {
    if (strcmp(equipas[i].equipa, nome) == 0)
    {
      printf("%d Equipa existente.\n", NL);
      return;
    }
    else
    {
      
    }

  }

  for (i = 0; i < tamanhoequipa; i++)
  {
    if (strcmp(equipas[i].equipa, noteam) == 0)
    {
      strcpy(equipas[i].equipa, nome);
      return;
    }
    else
    {
      
    }

  }

}

void run_P(char nome[])
{
  int i;
  for (i = 0; i < tamanhoequipa; i++)
  {
    if (strcmp(equipas[i].equipa, nome) == 0)
    {
      printf("%d %s %d\n", NL, nome, equipas[i].wins);
      return;
    }
    else
    {
      
    }

  }

  printf("%d Equipa inexistente.\n", NL);
}

void run_g()
{
  int i;
  int idx;
  char noteam[] = "";
  char equipaAux[1024] = "";
  int winsAux = 0;
  struct equipas ord[16];
  int contAux = 0;
  for (i = 0; i < tamanhoequipa; i++)
  {
    if (equipas[i].wins > winsAux)
    {
      winsAux = equipas[i].wins;
    }
    else
    {
      
    }

  }

  for (i = 0; i < tamanhoequipa; i++)
  {
    if ((equipas[i].wins == winsAux) && (strcmp(equipas[i].equipa, noteam) != 0))
    {
      strcpy(ord[contAux].equipa, equipas[i].equipa);
      contAux++;
    }
    else
    {
      
    }

  }

  if (contAux == 0)
  {
    return;
  }
  else
  {
    
  }

  for (i = 1; i < contAux; i++)
  {
    strcpy(equipaAux, ord[i].equipa);
    idx = i - 1;
    while ((idx >= 0) && (strcmp(equipaAux, ord[idx].equipa) < 0))
    {
      strcpy(ord[idx + 1].equipa, ord[idx].equipa);
      idx--;
    }

    strcpy(ord[idx + 1].equipa, equipaAux);
  }

  printf("%d Melhores %d\n", NL, winsAux);
  for (i = 0; i < contAux; i++)
  {
    printf("%d * %s\n", NL, ord[i].equipa);
  }

}

int main()
{
  char command;
  char nome[1024];
  char equipa1[1024];
  char equipa2[1024];
  int score1;
  int score2;
  while (1)
  {
    command = getchar();
    switch (command)
    {
      case 'a':
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        for (int equipa1_index = 0; equipa1_index < 10; equipa1_index++)
      {
        equipa1[equipa1_index] = new_sym_var(sizeof(char) * 8);
      }

        equipa1[10 - 1] = '\0';
        for (int equipa2_index = 0; equipa2_index < 10; equipa2_index++)
      {
        equipa2[equipa2_index] = new_sym_var(sizeof(char) * 8);
      }

        equipa2[10 - 1] = '\0';
        score1 = new_sym_var(sizeof(int) * 8);
        score2 = new_sym_var(sizeof(int) * 8);
        NL++;
        run_a(nome, equipa1, equipa2, score1, score2);
        break;

      case 'l':
        NL++;
        run_l();
        break;

      case 'p':
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        NL++;
        run_p(nome);
        break;

      case 'r':
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        NL++;
        run_r(nome);
        break;

      case 's':
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        score1 = new_sym_var(sizeof(int) * 8);
        score2 = new_sym_var(sizeof(int) * 8);
        NL++;
        run_s(nome, score1, score2);
        break;

      case 'A':
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        NL++;
        run_A(nome);
        break;

      case 'P':
        for (int nome_index = 0; nome_index < 10; nome_index++)
      {
        nome[nome_index] = new_sym_var(sizeof(char) * 8);
      }

        nome[10 - 1] = '\0';
        NL++;
        run_P(nome);
        break;

      case 'g':
        NL++;
        run_g();
        break;

      case 'x':
        return 0;

    }

  }

  return -1;
}

