#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <limits.h>
#include "Equipa.h"


Equipa *novaEquipa(char *nome)
{
  Equipa *equipa;
  equipa = malloc(sizeof(Equipa));
  equipa->nome = malloc((sizeof(char)) * (strlen(nome) + 1));
  strcpy(equipa->nome, nome);
  equipa->vitorias = 0;
  return equipa;
}

void liberarEquipa(Equipa *equipa)
{
  free(equipa->nome);
  free(equipa);
}

entradaE_t *criarEntrada_htE(char *chaveE, Equipa *equipa)
{
  entradaE_t *entrada = malloc(sizeof(entradaE_t));
  entrada->chaveE = malloc(strlen(chaveE) + 1);
  entrada->equipa = equipa;
  strcpy(entrada->chaveE, chaveE);
  entrada->proxE = 0;
  return entrada;
}

htE_t *criar_htE(void)
{
  int i = 0;
  htE_t *hashtable = malloc(sizeof(htE_t));
  hashtable->entradas = malloc((sizeof(entradaE_t)) * 2000);
  for (; i < 2000; ++i)
    hashtable->entradas[i] = 0;

  return hashtable;
}

int hashE(char *chaveE)
{
  unsigned int valor_hash = 0;
  int i = 0;
  int tamanho_chave = strlen(chaveE);
  for (; i < tamanho_chave; ++i)
    valor_hash = (valor_hash * 23) + chaveE[i];

  valor_hash %= 2000;
  return valor_hash;
}

void apropriar_htE(htE_t *hashtable, char *chaveE, Equipa *equipa)
{
  int index = hashE(chaveE);
  entradaE_t *ant;
  entradaE_t *entradaE = hashtable->entradas[index];
  if (entradaE == 0)
  {
    hashtable->entradas[index] = criarEntrada_htE(chaveE, equipa);
    return;
  }
  else
  {
    
  }

  while (entradaE != 0)
  {
    if (strcmp(entradaE->chaveE, chaveE) == 0)
    {
      entradaE->equipa = equipa;
      return;
    }
    else
    {
      
    }

    ant = entradaE;
    entradaE = ant->proxE;
  }

  ant->proxE = criarEntrada_htE(chaveE, equipa);
}

Equipa *obter_htE(htE_t *hashtable, char *chaveE)
{
  int index = hashE(chaveE);
  entradaE_t *entradaE = hashtable->entradas[index];
  if (entradaE == 0)
  {
    return 0;
  }
  else
  {
    
  }

  while (entradaE != 0)
  {
    if (strcmp(entradaE->chaveE, chaveE) == 0)
    {
      return entradaE->equipa;
    }
    else
    {
      
    }

    entradaE = entradaE->proxE;
  }

  return 0;
}

void htE_del(htE_t *hashtable, char *chaveE)
{
  int index = hashE(chaveE);
  int id = 0;
  entradaE_t *ant;
  entradaE_t *entradaE = hashtable->entradas[index];
  if (entradaE == 0)
  {
    return;
  }
  else
  {
    
  }

  while (entradaE != 0)
  {
    if (strcmp(entradaE->chaveE, chaveE) == 0)
    {
      if ((entradaE->proxE == 0) && (id == 0))
      {
        hashtable->entradas[index] = 0;
      }
      else
      {
        
      }

      if ((entradaE->proxE != 0) && (id == 0))
      {
        hashtable->entradas[index] = entradaE->proxE;
      }
      else
      {
        
      }

      if ((entradaE->proxE == 0) && (id != 0))
      {
        ant->proxE = 0;
      }
      else
      {
        
      }

      if ((entradaE->proxE != 0) && (id != 0))
      {
        ant->proxE = entradaE->proxE;
      }
      else
      {
        
      }

      free(entradaE->chaveE);
      free(entradaE);
      return;
    }
    else
    {
      
    }

    ant = entradaE;
    entradaE = ant->proxE;
    ++id;
  }

}

