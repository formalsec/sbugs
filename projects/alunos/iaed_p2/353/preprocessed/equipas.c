#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "equipas.h"


unsigned int hash(const char *v)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (1553 - 1))
    h = ((a * h) + (*v)) % 1553;

  return h;
}

ht_equipas *ht_init_equipas(void)
{
  int i = 0;
  ht_equipas *hashtable = malloc(sizeof(ht_equipas));
  hashtable->entries = malloc((sizeof(link_equipa *)) * 1553);
  for (; i < 1553; ++i)
  {
    hashtable->entries[i] = 0;
  }

  return hashtable;
}

void ht_pair_equipas(ht_equipas *hashtable_equipas, const char *nome)
{
  unsigned int slot = hash(nome);
  link_equipa *x = malloc(sizeof(link_equipa));
  x->nome = malloc((sizeof(char)) * (strlen(nome) + 1));
  strcpy(x->nome, nome);
  x->nr_vitorias = 0;
  x->next = hashtable_equipas->entries[slot];
  hashtable_equipas->entries[slot] = x;
}

void ht_set_equipas(ht_equipas *hashtable, const char *nome, int NL)
{
  link_equipa *equipa = st_search(hashtable, nome);
  if (equipa != 0)
  {
    printf("%d Equipa existente.\n", NL);
    return;
  }
  else
  {
    
  }

  ht_pair_equipas(hashtable, nome);
}

link_equipa *st_search(ht_equipas *hashtable, const char *nome)
{
  unsigned int slot = hash(nome);
  link_equipa *x = hashtable->entries[slot];
  while (x != 0)
  {
    if (strcmp(x->nome, nome) == 0)
    {
      return x;
    }
    else
    {
      
    }

    x = x->next;
  }

  return 0;
}

void ht_search_equipas(ht_equipas *hashtable, const char *nome, int NL)
{
  link_equipa *equipa = st_search(hashtable, nome);
  if (equipa == 0)
  {
    printf("%d Equipa inexistente.\n", NL);
    return;
  }
  else
  {
    
  }

  printf("%d %s %d\n", NL, equipa->nome, equipa->nr_vitorias);
}

