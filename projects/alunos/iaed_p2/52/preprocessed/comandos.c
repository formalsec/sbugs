/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "comandos.h"
#include "estruturasAlgoritmos.h"


char *stringalloc(char *buff)
{
  char *new;
  if (buff == 0)
  {
    return 0;
  }
  else
  {
    
  }

  new = (char *) malloc((sizeof(char)) * (strlen(buff) + 1));
  strcpy(new, buff);
  return new;
}

dados *novoDado(char *nomeBuff, char *eq1Buff, char *eq2Buff, int scr1, int scr2)
{
  dados *new;
  new = (dados *) malloc(sizeof(dados));
  new->nome = stringalloc(nomeBuff);
  new->eq1 = stringalloc(eq1Buff);
  new->eq2 = stringalloc(eq2Buff);
  new->scr[0] = scr1;
  new->scr[1] = scr2;
  return new;
}

dados *vencedor(dados *eq1, dados *eq2, int scr1, int scr2)
{
  if (scr1 == scr2)
  {
    return 0;
  }
  else
  {
    
  }

  return (scr1 > scr2) ? (eq1) : (eq2);
}

void a(tabela *jogos, tabela *equipas, int NL, lista *jogosL)
{
  char nomeBuff[1024];
  char eq1Buff[1024];
  char eq2Buff[1024];
  int scr1;
  int scr2;
  dados *jogo;
  dados *eq1;
  dados *eq2;
  getchar();
  for (int nomeBuff_index = 0; nomeBuff_index < 10; nomeBuff_index++)
  {
    nomeBuff[nomeBuff_index] = new_sym_var(sizeof(char) * 8);
  }

  nomeBuff[10 - 1] = '\0';
  for (int eq1Buff_index = 0; eq1Buff_index < 10; eq1Buff_index++)
  {
    eq1Buff[eq1Buff_index] = new_sym_var(sizeof(char) * 8);
  }

  eq1Buff[10 - 1] = '\0';
  for (int eq2Buff_index = 0; eq2Buff_index < 10; eq2Buff_index++)
  {
    eq2Buff[eq2Buff_index] = new_sym_var(sizeof(char) * 8);
  }

  eq2Buff[10 - 1] = '\0';
  scr1 = new_sym_var(sizeof(int) * 8);
  scr2 = new_sym_var(sizeof(int) * 8);
  if (procuraTabela(jogos, nomeBuff) != 0)
  {
    printf("%d Jogo existente.\n", NL);
  }
  else
  {
    if (((eq1 = procuraTabela(equipas, eq1Buff)) == 0) || ((eq2 = procuraTabela(equipas, eq2Buff)) == 0))
    {
      printf("%d Equipa inexistente.\n", NL);
    }
    else
    {
      if ((eq1 = vencedor(eq1, eq2, scr1, scr2)) != 0)
      {
        eq1->scr[1]++;
      }
      else
      {
        
      }

      jogo = novoDado(nomeBuff, eq1Buff, eq2Buff, scr1, scr2);
      insereTabela(jogos, jogo);
      insereFinalLista(jogosL, jogo);
    }

  }

}

void A(tabela *equipas, int NL, lista *equipasL)
{
  char buffer[1024];
  getchar();
  for (int buffer_index = 0; buffer_index < 10; buffer_index++)
  {
    buffer[buffer_index] = new_sym_var(sizeof(char) * 8);
  }

  buffer[10 - 1] = '\0';
  if (procuraTabela(equipas, buffer) != 0)
  {
    printf("%d Equipa existente.\n", NL);
  }
  else
  {
    dados *equipa;
    equipa = novoDado(buffer, 0, 0, -1, 0);
    insereTabela(equipas, equipa);
    insereFinalLista(equipasL, equipa);
  }

}

void l(lista *jogosL, int NL)
{
  int i;
  for (i = 0; i < jogosL->n; i++)
    if (jogosL->vetor[i]->scr[1] > (-1))
  {
    printf("%d %s %s %s %d %d\n", NL, jogosL->vetor[i]->nome, jogosL->vetor[i]->eq1, jogosL->vetor[i]->eq2, jogosL->vetor[i]->scr[0], jogosL->vetor[i]->scr[1]);
  }
  else
  {
    
  }


}

void p(tabela *jogos, int NL)
{
  char buff[1024];
  dados *jogo;
  getchar();
  for (int buff_index = 0; buff_index < 10; buff_index++)
  {
    buff[buff_index] = new_sym_var(sizeof(char) * 8);
  }

  buff[10 - 1] = '\0';
  if ((jogo = procuraTabela(jogos, buff)) == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
  }
  else
  {
    printf("%d %s %s %s %d %d\n", NL, jogo->nome, jogo->eq1, jogo->eq2, jogo->scr[0], jogo->scr[1]);
  }

}

void r(tabela *jogos, tabela *equipas, int NL)
{
  char buff[1024];
  dados *jogo;
  getchar();
  for (int buff_index = 0; buff_index < 10; buff_index++)
  {
    buff[buff_index] = new_sym_var(sizeof(char) * 8);
  }

  buff[10 - 1] = '\0';
  if ((jogo = procuraTabela(jogos, buff)) == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
  }
  else
  {
    dados *eq1;
    dados *eq2;
    jogo = procuraTabela(jogos, jogo->nome);
    eq1 = procuraTabela(equipas, jogo->eq1);
    eq2 = procuraTabela(equipas, jogo->eq2);
    if ((eq1 = vencedor(eq1, eq2, jogo->scr[0], jogo->scr[1])) != 0)
    {
      eq1->scr[1]--;
    }
    else
    {
      
    }

    jogo->scr[1] = -1;
  }

}

void s(tabela *jogos, tabela *equipas, int NL)
{
  int scr1;
  int scr2;
  char buff[1024];
  dados *jogo;
  getchar();
  for (int buff_index = 0; buff_index < 10; buff_index++)
  {
    buff[buff_index] = new_sym_var(sizeof(char) * 8);
  }

  buff[10 - 1] = '\0';
  scr1 = new_sym_var(sizeof(int) * 8);
  scr2 = new_sym_var(sizeof(int) * 8);
  if ((jogo = procuraTabela(jogos, buff)) == 0)
  {
    printf("%d Jogo inexistente.\n", NL);
  }
  else
  {
    dados *eq1;
    dados *eq2;
    dados *res1;
    dados *res2;
    eq1 = procuraTabela(equipas, jogo->eq1);
    eq2 = procuraTabela(equipas, jogo->eq2);
    res1 = vencedor(eq1, eq2, jogo->scr[0], jogo->scr[1]);
    res2 = vencedor(eq1, eq2, scr1, scr2);
    if (res1 != res2)
    {
      if (res1 == eq1)
      {
        if (res2 == 0)
        {
          eq1->scr[1]--;
        }
        else
        {
          if (res2 == eq2)
          {
            eq1->scr[1]--;
            eq2->scr[1]++;
          }
          else
          {
            
          }

        }

      }
      else
      {
        if (res1 == 0)
        {
          res2->scr[1]++;
        }
        else
        {
          if (res2 == eq1)
          {
            eq2->scr[1]--;
            eq1->scr[1]++;
          }
          else
          {
            if (res2 == 0)
            {
              eq2->scr[1]--;
            }
            else
            {
              
            }

          }

        }

      }

    }
    else
    {
      
    }

    jogo->scr[0] = scr1;
    jogo->scr[1] = scr2;
  }

}

void P(tabela *equipas, int NL)
{
  char buff[1024];
  dados *equipa;
  getchar();
  for (int buff_index = 0; buff_index < 10; buff_index++)
  {
    buff[buff_index] = new_sym_var(sizeof(char) * 8);
  }

  buff[10 - 1] = '\0';
  if ((equipa = procuraTabela(equipas, buff)) == 0)
  {
    printf("%d Equipa inexistente.\n", NL);
  }
  else
  {
    printf("%d %s %d\n", NL, equipa->nome, equipa->scr[1]);
  }

}

void g(lista *equipasL, int NL)
{
  int max;
  int i;
  lista *queue = novaLista(equipasL->n);
  for (i = 0, max = 0; i < equipasL->n; i++)
    if (equipasL->vetor[i]->scr[1] > max)
  {
    max = equipasL->vetor[i]->scr[1];
  }
  else
  {
    
  }


  for (i = 0; i < equipasL->n; i++)
    if (equipasL->vetor[i]->scr[1] == max)
  {
    queue = insereFinalLista(queue, equipasL->vetor[i]);
  }
  else
  {
    
  }


  ;
  if (queue->n == 0)
  {
    libLista(queue);
    return;
  }
  else
  {
    if (queue->n > 1)
    {
      insertionSort(queue, 0, queue->n);
    }
    else
    {
      
    }

  }

  printf("%d Melhores %d\n", NL, max);
  for (i = 0; i < queue->n; i++)
    printf("%d * %s\n", NL, queue->vetor[i]->nome);

  libLista(queue);
}

