#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "hash.h"


struct _hash
{
  int M;
  table_ptrs tabela;
};
hashtable *criahash(int M)
{
  hashtable *new;
  new = (hashtable *) malloc(sizeof(hashtable));
  new->M = M;
  new->tabela = (table_ptrs) calloc(M, sizeof(list *));
  return new;
}

int hash(char *v, int M)
{
  int h;
  int a = 31415;
  int b = 27183;
  for (h = 0; (*v) != '\0'; v++, a = (a * b) % (M - 1))
  {
    h = ((a * h) + (*v)) % M;
  }

  return h;
}

void inserehash(hashtable *st, Item elemento, char *nome)
{
  int indice;
  indice = hash(nome, st->M);
  if (st->tabela[indice] == 0)
  {
    st->tabela[indice] = crialista();
  }
  else
  {
    
  }

  adicionalista(st->tabela[indice], elemento);
  return;
}

void removehash(hashtable *st, Item elemento, char *nome)
{
  int indice;
  indice = hash(nome, st->M);
  if (st->tabela[indice] == 0)
  {
    return;
  }
  else
  {
    
  }

  removelista(st->tabela[indice], elemento);
  return;
}

list *lehash(hashtable *st, char *nome)
{
  int indice;
  indice = hash(nome, st->M);
  return st->tabela[indice];
}

void freehash(hashtable *st, int M, int controlo, void freeitem(Item))
{
  int i;
  for (i = 0; i < M; i++)
  {
    if (st->tabela[i] != 0)
    {
      freelista(st->tabela[i], controlo, freeitem);
    }
    else
    {
      
    }

  }

  free(st->tabela);
  free(st);
  return;
}

list *indice_hastable(hashtable *st, int i)
{
  return st->tabela[i];
}

