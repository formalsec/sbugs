#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "jogos.h"
#include "equipas.h"


int vitorias_equipa(link_equipa *equipa);
int main()
{
  int linha_input = 1;
  int flag_prog = 1;
  int flag_equipas = 0;
  char command;
  int score1;
  int score2;
  char nome_jogo_temp[1023];
  char equipa1_temp[1023];
  char equipa2_temp[1023];
  char nome_equipa[1023];
  link_equipa *equipa1;
  link_equipa *equipa2;
  link_jogo *jogo;
  hashtable_equipas *tabela_equipas;
  hashtable_jogos *tabela_jogos;
  lista_ord_jogos *lista_jogos;
  tabela_equipas = inicializa_equipas(307);
  tabela_jogos = inicializa_jogos(307);
  lista_jogos = inicializa_jogos_lista();
  while (flag_prog)
  {
    command = new_sym_var(sizeof(char) * 8);
    switch (command)
    {
      case 'a':
        for (int nome_jogo_temp_index = 0; nome_jogo_temp_index < 10; nome_jogo_temp_index++)
      {
        nome_jogo_temp[nome_jogo_temp_index] = new_sym_var(sizeof(char) * 8);
      }

        nome_jogo_temp[10 - 1] = '\0';
        for (int equipa1_temp_index = 0; equipa1_temp_index < 10; equipa1_temp_index++)
      {
        equipa1_temp[equipa1_temp_index] = new_sym_var(sizeof(char) * 8);
      }

        equipa1_temp[10 - 1] = '\0';
        for (int equipa2_temp_index = 0; equipa2_temp_index < 10; equipa2_temp_index++)
      {
        equipa2_temp[equipa2_temp_index] = new_sym_var(sizeof(char) * 8);
      }

        equipa2_temp[10 - 1] = '\0';
        score1 = new_sym_var(sizeof(int) * 8);
        score2 = new_sym_var(sizeof(int) * 8);
        equipa1 = procurar_equipa(equipa1_temp, tabela_equipas);
        equipa2 = procurar_equipa(equipa2_temp, tabela_equipas);
        if (!(procurar_jogo(nome_jogo_temp, tabela_jogos) == 0))
      {
        printf("%d Jogo existente.\n", linha_input);
      }
      else
      {
        if ((equipa1 == 0) || (equipa2 == 0))
        {
          printf("%d Equipa inexistente.\n", linha_input);
        }
        else
        {
          inserir_jogo(nome_jogo_temp, equipa1, equipa2, score1, score2, tabela_jogos, lista_jogos);
        }

      }

        linha_input++;
        break;

      case 'l':
        listar_todos_jogos(linha_input, lista_jogos);
        linha_input++;
        break;

      case 'p':
        for (int nome_jogo_temp_index = 0; nome_jogo_temp_index < 10; nome_jogo_temp_index++)
      {
        nome_jogo_temp[nome_jogo_temp_index] = new_sym_var(sizeof(char) * 8);
      }

        nome_jogo_temp[10 - 1] = '\0';
        jogo = procurar_jogo(nome_jogo_temp, tabela_jogos);
        if (jogo == 0)
      {
        printf("%d Jogo inexistente.\n", linha_input);
      }
      else
      {
        printf("%d %s %s %s %d %d\n", linha_input, jogo->pointer_jogo->nome_jogo, jogo->pointer_jogo->pequipa1->nome_equipa, jogo->pointer_jogo->pequipa2->nome_equipa, jogo->pointer_jogo->pontos1, jogo->pointer_jogo->pontos2);
      }

        linha_input++;
        break;

      case 'r':
        for (int nome_jogo_temp_index = 0; nome_jogo_temp_index < 10; nome_jogo_temp_index++)
      {
        nome_jogo_temp[nome_jogo_temp_index] = new_sym_var(sizeof(char) * 8);
      }

        nome_jogo_temp[10 - 1] = '\0';
        if (procurar_jogo(nome_jogo_temp, tabela_jogos) == 0)
      {
        printf("%d Jogo inexistente.\n", linha_input);
      }
      else
      {
        apagar_jogo(nome_jogo_temp, tabela_jogos, lista_jogos);
      }

        linha_input++;
        break;

      case 's':
        for (int nome_jogo_temp_index = 0; nome_jogo_temp_index < 10; nome_jogo_temp_index++)
      {
        nome_jogo_temp[nome_jogo_temp_index] = new_sym_var(sizeof(char) * 8);
      }

        nome_jogo_temp[10 - 1] = '\0';
        score1 = new_sym_var(sizeof(int) * 8);
        score2 = new_sym_var(sizeof(int) * 8);
        jogo = procurar_jogo(nome_jogo_temp, tabela_jogos);
        if (procurar_jogo(nome_jogo_temp, tabela_jogos) == 0)
      {
        printf("%d Jogo inexistente.\n", linha_input);
      }
      else
      {
        alterar_jogo(jogo, score1, score2);
      }

        linha_input++;
        break;

      case 'A':
        for (int nome_equipa_index = 0; nome_equipa_index < 10; nome_equipa_index++)
      {
        nome_equipa[nome_equipa_index] = new_sym_var(sizeof(char) * 8);
      }

        nome_equipa[10 - 1] = '\0';
        if (procurar_equipa(nome_equipa, tabela_equipas) == 0)
      {
        adicionar_equipa(nome_equipa, tabela_equipas);
      }
      else
      {
        printf("%d Equipa existente.\n", linha_input);
      }

        flag_equipas = 1;
        linha_input++;
        break;

      case 'P':
        for (int nome_equipa_index = 0; nome_equipa_index < 10; nome_equipa_index++)
      {
        nome_equipa[nome_equipa_index] = new_sym_var(sizeof(char) * 8);
      }

        nome_equipa[10 - 1] = '\0';
        equipa1 = procurar_equipa(nome_equipa, tabela_equipas);
        if (equipa1 != 0)
      {
        printf("%d %s %d\n", linha_input, nome_equipa, equipa1->numero_vitorias);
      }
      else
      {
        printf("%d Equipa inexistente.\n", linha_input);
      }

        linha_input++;
        break;

      case 'g':
        if (flag_equipas)
      {
        listar_melhores_equipas(tabela_equipas, linha_input);
      }
      else
      {
        
      }

        linha_input++;
        break;

      case 'x':
        destruir_equipas(tabela_equipas);
        destruir_jogos(tabela_jogos);
        destruir_lista(lista_jogos);
        flag_prog = 0;

      default:
        break;

    }

  }

  return 0;
}

