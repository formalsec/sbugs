#include "/home/fmarques/sbugs/projects/alunos/lib/stubs.h"
/*File generated by PreProcessor.py*/


#include "lists.h"


char *stringdup(char *org)
{
  long int org_size;
  static char *dup;
  char *dup_offset;
  org_size = strlen(org);
  dup = (char *) malloc(((sizeof(char)) * org_size) + 1);
  dup_offset = dup;
  while (*org)
  {
    *dup_offset = *org;
    dup_offset++;
    org++;
  }

  *dup_offset = '\0';
  return dup;
}

list *create(char *txt)
{
  list *temp;
  temp = (list *) malloc(sizeof(list));
  temp->str = stringdup(txt);
  temp->next = 0;
  temp->ant = 0;
  return temp;
}

list *list_insert(char *txt, list *lis)
{
  lis->next = create(txt);
  lis->next->ant = lis;
  return lis->next;
}

int list_size(list *lis)
{
  int i = 0;
  list *temp;
  temp = lis;
  while (temp != 0)
  {
    i++;
    temp = temp->next;
  }

  return i;
}

list *list_remove(char *txt, list *lis)
{
  list *temp;
  list *t1;
  list *t2;
  temp = lis;
  while (temp != 0)
  {
    t1 = temp->next;
    t2 = temp->ant;
    if (strcmp(temp->str, txt) == 0)
    {
      if (t2 != 0)
      {
        if (t1 != 0)
        {
          t2->next = t1;
          t1->ant = t2;
          free(temp->str);
          free(temp);
          return lis;
        }
        else
        {
          t2->next = 0;
          free(temp->str);
          free(temp);
          return lis;
        }

      }
      else
      {
        if (t1 != 0)
        {
          t1->ant = 0;
          free(temp->str);
          free(temp);
          lis = t1;
          return lis;
        }
        else
        {
          lis = 0;
          free(temp->str);
          free(temp);
          return lis;
        }

      }

    }
    else
    {
      temp = temp->next;
    }

  }

  return 0;
}

list *list_search(char *txt, list *lis)
{
  list *temp = lis;
  while (temp != 0)
  {
    if (strcmp(temp->str, txt) == 0)
    {
      return temp;
    }
    else
    {
      temp = temp->next;
    }

  }

  return 0;
}

void free_list(list *lis)
{
  list *temp = lis;
  while (temp != 0)
  {
    lis = lis->next;
    free(temp->str);
    free(temp);
    temp = lis;
  }

  free(temp);
}

