/*File generated by PreProcessor.py*/


#include "FuncoesAux.h"
#include "Estruturas.h"
#include "Hash.h"


void compensa_jogos(p_jogo jogo_apag, p_jogo *fim_j, p_jogo *cab_j)
{
  if ((*fim_j) == (*cab_j))
  {
    *fim_j = 0;
    *cab_j = 0;
  }
  else
  {
    if ((*fim_j) == jogo_apag)
    {
      jogo_apag->ant->prox = 0;
      *fim_j = jogo_apag->ant;
    }
    else
    {
      if ((*cab_j) == jogo_apag)
      {
        jogo_apag->prox->ant = 0;
        *cab_j = jogo_apag->prox;
      }
      else
      {
        jogo_apag->prox->ant = jogo_apag->ant;
        jogo_apag->ant->prox = jogo_apag->prox;
      }

    }

  }

}

p_jogo existe_jogo(char *nome, p_jogo *tab_j)
{
  p_jogo jogo;
  int *posicao;
  posicao = (int *) malloc(sizeof(int));
  jogo = encontra_jogo(nome, tab_j, posicao);
  free(posicao);
  return jogo;
}

void aumenta_vitorias(char *nome, p_equipa *tab_e)
{
  p_equipa equipa;
  equipa = encontra_equipa(nome, tab_e);
  equipa->vitorias++;
}

void remove_vitoria(char *nome, p_equipa *tab_e)
{
  p_equipa equipa;
  equipa = encontra_equipa(nome, tab_e);
  equipa->vitorias--;
}

void ve_vitoria(p_jogo jogo, p_equipa *tab_e)
{
  if (jogo->pontos1 > jogo->pontos2)
  {
    aumenta_vitorias(jogo->equipa1, tab_e);
  }
  else
  {
    if (jogo->pontos2 > jogo->pontos1)
    {
      aumenta_vitorias(jogo->equipa2, tab_e);
    }
    else
    {
      
    }

  }

}

void ve_derrota(p_jogo jogo, p_equipa *tab_e)
{
  if (jogo->pontos1 > jogo->pontos2)
  {
    remove_vitoria(jogo->equipa1, tab_e);
  }
  else
  {
    if (jogo->pontos2 > jogo->pontos1)
    {
      remove_vitoria(jogo->equipa2, tab_e);
    }
    else
    {
      
    }

  }

}

void free_tabela_jogos(p_jogo *tab_j, p_jogo *cab_j)
{
  p_jogo jogo;
  p_jogo prox;
  for (jogo = *cab_j; jogo != 0; jogo = prox)
  {
    prox = jogo->prox;
    free_jogo(jogo);
  }

  free(tab_j);
}

void free_tabela_equipas(p_equipa *tab_e, p_equipa *cab_e)
{
  p_equipa equipa;
  p_equipa prox;
  for (equipa = *cab_e; equipa != 0; equipa = prox)
  {
    prox = equipa->prox;
    free_equipa(equipa);
  }

  free(tab_e);
}

int alfabetico_equipas(const void *a, const void *b)
{
  char **nome1;
  char **nome2;
  nome1 = (char **) a;
  nome2 = (char **) b;
  return strcmp(*nome2, *nome1) < 0;
}

char *novo_nome(char nome[])
{
  char *novo;
  novo = (char *) malloc((sizeof(char)) * (strlen(nome) + 1));
  strcpy(novo, nome);
  return novo;
}

void acerta_jogos(p_jogo jogo, p_equipa *tab_e, p_jogo *cab_j, p_jogo *fim_j)
{
  compensa_jogos(jogo, fim_j, cab_j);
  ve_derrota(jogo, tab_e);
  free_jogo(jogo);
}

